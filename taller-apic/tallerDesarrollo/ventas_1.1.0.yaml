swagger: '2.0'
info:
  title: Ventas
  x-ibm-name: ventas
  version: 1.1.0
  description: >-
    # Ventas Transbank

    API de consulta de las transacciones financieras de ventas realizados en
    Transbank.


    Por medio de esta API se le ofrecen a los comercios de TBK los mecanismos de
    consulta de información de **Transacción Financiera Ventas**.


    ### Mecanismos de control de acceso y autorización

    Este API obliga que el comercio cuente con las siguientes condiciones:
     - Cuenta activa en el portal de APIs de Transbank
     - Aplicación registrada en el portal de APIs en estado aprobado
     - Presentar el identificador único de aplicación (ClientId)


    Versión  | Justificación | Autor

    ----     |-------        |-----   

    1.0.0  | Version inicial creada en base al documento inicial de Req.
    funcionales. | VCSOFT Chile|

    1.1.0  | Modificaciones definidas en documento "Especificación de
    Requerimientos Funcionales -P0002839_ API Transbank V2.0" |
    jaimev@vc-soft.com|
  contact:
    name: Transbank S.A
    email: contacto@transbank.cl
schemes:
  - https
produces:
  - application/json
consumes:
  - application/json
security:
  - clientIdHeader: []
securityDefinitions:
  clientIdHeader:
    type: apiKey
    name: X-Client-Id
    in: header
    x-key-type: client_id
x-ibm-configuration:
  gateway: datapower-api-gateway
  type: rest
  phase: realized
  enforced: true
  testable: true
  assembly:
    execute:
      - switch:
          version: 2.0.0
          title: switch
          case:
            - condition: ($operationPath() = '/transacciones/totales')
              execute:
                - gatewayscript:
                    version: 2.0.0
                    title: validateParameters
                    source: "/******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Validaciones iniciales de los parametros \r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-03-20\r\n * @desc:  version inicial \r\n * \r\n * @version: 2020-03-27\r\n * @desc: se cambian nombres de funciones  @author: jaimev@vc-soft.com\r\n *****/\r\n \r\n /** Constantes del JS */ \r\nconst apim = require('apim');\r\n\r\nconsole.error(\"Inicio de validate-parameter version 2020-04-02:08:45\");\r\n\r\nconst apigw = require('apigw');\r\napim.setvariable(\"ctx.uuid\", apigw.generateUUID());\r\n\r\nconst defaultErrorMsg = \"Invalid Parameter: Validation Failure\";\r\n\r\nlet dateSinceAsString = apim.getvariable('request.parameters.fecha-desde');\r\nlet dateUntilAsString = apim.getvariable('request.parameters.fecha-hasta');\r\nlet codes = apim.getvariable('request.parameters.codigos-comercio');\r\n\r\nconst now = new Date(); \r\n\r\nlet errors = [];\r\n\r\naddValidation(\"fecha-desde\",\r\n              !isDateFormat(dateSinceAsString),\r\n              { \"code\": 400,\r\n                \"title\": \"Fecha Invalida\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha fecha-desde=${dateSinceAsString} tiene que describirse en formato YYYY-MM-DDTHH:mm:ss`\r\n              },true);\r\n              \r\naddValidation(\"fecha-hasta\",\r\n              !isDateFormat(dateUntilAsString),\r\n              { \"code\": 400,\r\n                \"title\": \"Fecha Invalida\",\r\n                \"source\": { \"pointer\" : \"fecha-hasta\" },\r\n                \"detail\": `La fecha fecha-hasta=${dateUntilAsString} tiene que describirse en formato YYYY-MM-DDTHH:mm:ss` \r\n              },true);\r\n\r\nconst dateSince = new Date(dateSinceAsString);\r\nconst dateUntil = new Date(dateUntilAsString);\r\n\r\naddValidation(\"fecha-desde\",\r\n              (now.getTime() - dateSince.getTime())<0, // no cumple que esta en el pasado\r\n              { \"code\": 422,\r\n                \"title\": \"fecha-desde deberia estar en el pasado\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha-desde ${dateSince.toISOString()} tiene que estar en el pasado ` \r\n              }); \r\naddValidation(\"fecha-hasta\",\r\n              (now.getTime() - dateUntil.getTime())<0, // no cumple que esta en el pasado\r\n              { \"code\": 422,\r\n                \"title\": \"fecha-hasta deberia estar en el pasado\",\r\n                \"source\": { \"pointer\" : \"fecha-hasta\" },\r\n                \"detail\": `La fecha-hasta ${dateUntil.toISOString()} tiene que estar en el pasado ` \r\n              }); \r\naddValidation(\"fecha-hasta\",\r\n              (dateUntil.getTime() - dateSince.getTime())<0, // no cumple fecha hasta mayor a desde\r\n              { \"code\": 422,\r\n                \"title\": \"fecha-hasta deberia ser posterior a fecha-desde\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha-hasta ${dateUntil.toISOString()} es menor a la fecha-desde ${dateSince.toISOString()}`\r\n              }); \r\n              \r\nif(codes){\r\n    addValidation(\"codigos-comercio\",\r\n                  (validateEmptySpaces(codes)), //validar espacios\r\n                  { \"code\": 422,\r\n                    \"title\": \"codigos-comercio invalido\",\r\n                    \"source\": { \"pointer\" : \"codigos-comercio\" },\r\n                    \"detail\": `Los codigos-comercio ${codes} contiene espacios en blanco`\r\n                  }); \r\n    addValidation(\"codigos-comercio\",\r\n                  (codes.charAt(codes.length-1) === ','), //validar si termina en coma\r\n                  { \"code\": 422,\r\n                    \"title\": \"codigos-comercio invalido\",\r\n                    \"source\": { \"pointer\" : \"codigos-comercio\" },\r\n                    \"detail\": `Los codigos-comercio ${codes} no debe  terminar con coma`\r\n                  });\r\n}\r\n\r\nif(errors.length > 0){\r\n    throwError();\r\n}\r\n\r\n/*** \r\n* Se utiliza apim.error para lanzar el error \r\n*/              \r\nfunction throwError(){\r\n    if(errors){\r\n        apim.setvariable(\"ctx.errorData\", errors);\r\n        const minStatus = errors.reduce((min, err) => err.code < min ? err.code : min, errors[0].code);\r\n        apim.error(\"ParametersException\",minStatus,defaultErrorMsg,defaultErrorMsg);\r\n    } \r\n}\r\n\r\n/***\r\n * Adiciona un error de validación a la estructura general de errores\r\n * @param field\r\n * @param isError\r\n * @param errorObj\r\n * @param isImmediate\r\n */\r\nfunction addValidation(field, isError, errorObj, isImmediate ){\r\n    console.error(\"Verificacion de validacion campo %s \", field);               \r\n    if(isError){\r\n        console.error(\"Falla de validacion identificada en %s \", field);\r\n        errors.push(errorObj);\r\n        if(isImmediate){\r\n            throwError();\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Entrega si es fecha formada con ISO 8601 2020-04-20T10:45:00\r\n * corregido milli jev  2020-01-01 2020-01-01T01:02:03\r\n * @param dateAsString \r\n */\r\nfunction isDateFormat(dateAsString){\r\n    if(!dateAsString){\r\n        return false;\r\n    }else{\r\n        const reg = /^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])(T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?)?(Z)?$/g;\r\n        if(!reg.test(dateAsString)){\r\n          return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * Valida que la cadena no contenga espacios en blanco\r\n */ \r\nfunction validateEmptySpaces(stringToValidate){\r\n    const reg = /^$|\\s/g;\r\n    if(reg.test(stringToValidate)){\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n\r\n"
                - gatewayscript:
                    version: 2.0.0
                    title: get-rut
                    description: ''
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtención de RUT de consumidor\r\n * \r\n ****************************\r\n * @author: mtorres@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-03-27\r\n * @desc:  version inicial \r\n * \r\n *****/\r\n\r\nconst apim = require('apim');\r\nlet errors = [];\r\nconst rut = apim.getvariable('client.org.name');\r\nconst reg = /^[0-9]+[-|‐]{1}[0-9kK]{1}$/;\r\nif(reg.test(rut)){\r\n    let arrayrut = rut.split('-');\r\n    apim.setvariable('ctx.rutnumero',arrayrut[0],'set');\r\n    apim.setvariable('ctx.rutdigitov',arrayrut[1],'set');\r\n}else{\r\n  addErrors(\"422\",\"RUT invalido\",[\"El RUT no corresponde al formato de RUT\"],\"RUT\");\r\n  apim.setvariable(\"ctx.errorData\", errors);\r\n  apim.error('ParametersException', '422', 'Invalid parameters', 'Invalid parameters')\r\n}\r\nfunction addErrors (code, title, details, pointer) {\r\n  details.map(detail => {\r\n    const error = {\r\n      'code': code,\r\n      'title': title,\r\n      'source': {\r\n        'pointer': pointer\r\n      },\r\n      'detail': detail\r\n    }\r\n    errors.push(error)\r\n  })\r\n}"
                - gatewayscript:
                    version: 2.0.0
                    title: get-codcomercio
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtencion de listado de locales\r\n * \r\n ****************************\r\n * @author: mtorres@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-04-10\r\n * @desc:  version inicial \r\n * \r\n *****/\r\nconst apim = require('apim')\r\nconst codigosComercio = apim.getvariable('request.parameters.codigos-comercio')\r\nlet locals = []\r\nif (codigosComercio) {\r\n  let arrayCodigosComercio = codigosComercio.replace(/\\s|%20/g, '').split(',').filter(function (value, index, self) {return self.indexOf(value) === index;})\r\n  arrayCodigosComercio.forEach(local => {\r\n    if (local.length > 0) {\r\n      locals.push({'codigoLocal': local})\r\n    }\r\n  })\r\n}\r\napim.setvariable('ctx.listLocals', {'local': locals})"
                - map:
                    version: 2.0.0
                    title: requestMap-1
                    inputs:
                      fecha-desde:
                        schema:
                          type: string
                        variable: request.parameters.fecha-desde
                      fecha-hasta:
                        schema:
                          type: string
                        variable: request.parameters.fecha-hasta
                      rutnumero:
                        schema:
                          type: string
                        variable: ctx.rutnumero
                      rutdigitov:
                        schema:
                          type: string
                        variable: ctx.rutdigitov
                      listLocals:
                        schema:
                          type: object
                          properties:
                            local:
                              type: array
                              name: local
                              items:
                                type: object
                                properties:
                                  codigoLocal:
                                    type: string
                                    name: codigoLocal
                        variable: ctx.listLocals
                    outputs:
                      output:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerCantidadTransaccionesInput
                        variable: message.body
                        content: application/xml
                    actions:
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.encabezado.canal
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.encabezado.ipCanal
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.encabezado.idTransaccionMDW
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.encabezado.idTransaccionCanal
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.encabezado.aplicacion
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.encabezado.usuario
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.encabezado.ipUsuario
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.encabezado.espacioNombre
                        value: >-
                          'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.encabezado.servicio
                        value: '''TransaccionFinanciera'''
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.encabezado.operacion
                        value: ''''''
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.cuerpo.fechaDesde
                        from: fecha-desde
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.cuerpo.fechaHasta
                        from: fecha-hasta
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.cuerpo.listaLocales
                        from: listLocals
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.cuerpo.rut.rut
                        from: rutnumero
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.cuerpo.rut.dv
                        from: rutdigitov
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.cuerpo.monedas
                        value: '"CLP"'
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.cuerpo.tipoMovimiento
                        value: '"V"'
                      - set: >-
                          output.Envelope.Body.obtenerCantidadTransaccionesRequest.cuerpo.productos
                        value: '"C"'
                    options:
                      mapEnablePostProcessingJSON: false
                      mapEmulateV4EmptyJSONObject: false
                      mapEmulateV4DefaultRequiredProps: false
                      mapReferenceLimit: 1
                      includeEmptyXMLElements: false
                      inlineNamespaces: false
                - invoke:
                    title: TransaccionFinancieraSOAP
                    version: 2.0.0
                    verb: POST
                    target-url: $(target-url-totales)
                    header-control:
                      type: blacklist
                      values: []
                    parameter-control:
                      type: blacklist
                      values: []
                - xslt:
                    version: 2.0.0
                    title: set-message
                    input: false
                    source: |-
                      <?xml version="1.0" encoding="UTF-8"?>
                      <xsl:stylesheet version="1.0" 
                        xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                        xmlns:dp="http://www.datapower.com/extensions" 
                        xmlns:func="http://exslt.org/functions" 
                        xmlns:apim="http://www.ibm.com/apimanagement" extension-element-prefixes="dp func apim" 
                        xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
                        xmlns:NS1="http://www.transbank.cl/entidad/transaccionFinanciera/v1" 
                        xmlns:NS2="http://www.transbank.cl/Diccionario">
                        <xsl:include href="store:///dp/apim.custom.xsl" />

                        <xsl:template match="/">
                          <xsl:variable name="input" select="apim:payloadRead()" />
                          <xsl:call-template name="apim:setVariable">
                            <xsl:with-param name="varName" select="'ctx.message'" />
                            <xsl:with-param name="value" select="concat($input/soapenv:Envelope/soapenv:Body/*/NS1:cuerpo/NS2:estadoRespuestaDetalle/NS2:estado/NS2:mensajeRespuesta,$input/soapenv:Envelope/soapenv:Body/soapenv:Fault/faultstring)" />
                            <xsl:with-param name="action" select="'add'"/>
                          </xsl:call-template>
                        </xsl:template>
                      </xsl:stylesheet>
                - gatewayscript:
                    version: 2.0.0
                    title: validateResponse
                    source: >-
                      /*******************************************************
                       * \ \   / / ___/ ___| / _ \|  ___|_   _|
                       *  \ \ / | |   \___ \| | | | |_    | |  
                       *   \ V /| |___ ___) | |_| |  _|   | |  
                       *    \_/  \____|____/ \___/|_|     |_|  
                       * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial 
                       * en cualquier medio o en cualquier proyecto, sin previa autorización.
                       *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente 
                       * a personal interno a la empresa definida en la carátula de este documento.
                       *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos 
                       * distintos a los autorizados expresamente por VCSOFT
                       * 
                       *******************************************************
                       * 
                       * Validaciones de la respuesta final
                       * 
                       ****************************
                       * @author: jbernal@vc-soft.com
                       * 
                       * 
                       * @version: 2020-03-20
                       * @desc:  version inicial 
                       * 
                       * @version: 2020-03-27
                       * @desc: se cambian nombres de funciones  @author: jaimev@vc-soft.com
                       *****/
                      console.error("Inicio de validateResponse version
                      2020-04-02:08:45");


                      const apim = require('apim');


                      const defaultErrorMsg = "Service unavailable";


                      const messageBody = apim.getvariable('message.body');

                      const statusCode =
                      apim.getvariable('message.status.code');


                      let errors = [];

                      if(!messageBody){ 
                         setErrors(statusCode,
                              defaultErrorMsg,
                              ['El servicio interno no entregó resultado esperado']);
                      }


                      if(statusCode!=200){ 
                         setErrors(statusCode,
                                  apim.getvariable('message.status.reason'),
                                  [ apim.getvariable('ctx.message') ]); 
                      }


                      if(errors.length > 0 ){
                          throwError()
                      }


                      function throwError(){
                         apim.setvariable("ctx.errorData", errors);
                          const minStatus = errors.reduce((min, err) => err.code < min ? err.code : min, errors[0].code);
                         apim.error("ResponseException",minStatus,defaultErrorMsg,defaultErrorMsg);
                      }


                      /** registra objeto Error ***/

                      function setErrors(code, title, details, isImmediate){
                          details.map(detail => {
                              const error =  {
                                  "code": code,
                                  "title": title,
                                  "detail": detail
                              };
                              
                              errors.push(error);
                              
                              if(isImmediate){
                                  throwError();
                              }
                          })
                      }
                - map:
                    version: 2.0.0
                    title: responseMap
                    inputs:
                      input:
                        schema:
                          description: ''
                          type: object
                          properties:
                            Envelope:
                              type: object
                              properties:
                                Body:
                                  type: object
                                  properties:
                                    obtenerCantidadTransaccionesResponse:
                                      type: object
                                      properties:
                                        encabezado:
                                          type: object
                                          properties:
                                            canal:
                                              type: string
                                              xml:
                                                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                                prefix: NS2
                                              name: canal
                                            ipCanal:
                                              type: string
                                              xml:
                                                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                                prefix: NS3
                                              name: ipCanal
                                            usuario:
                                              type: string
                                              xml:
                                                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                                prefix: NS4
                                              name: usuario
                                            ipUsuario:
                                              type: string
                                              xml:
                                                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                                prefix: NS5
                                              name: ipUsuario
                                            aplicacion:
                                              type: string
                                              xml:
                                                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                                prefix: NS6
                                              name: aplicacion
                                            idTransaccionCanal:
                                              type: string
                                              xml:
                                                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                                prefix: NS7
                                              name: idTransaccionCanal
                                            idTransaccionMDW:
                                              type: string
                                              xml:
                                                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                                prefix: NS8
                                              name: idTransaccionMDW
                                            espacioNombre:
                                              type: string
                                              xml:
                                                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                                prefix: NS9
                                              name: espacioNombre
                                            servicio:
                                              type: string
                                              xml:
                                                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                                prefix: NS10
                                              name: servicio
                                            operacion:
                                              type: string
                                              xml:
                                                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                                prefix: NS11
                                              name: operacion
                                            estadoRespuesta:
                                              type: object
                                              properties:
                                                codigo:
                                                  type: string
                                                  name: codigo
                                              xml:
                                                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                                prefix: NS12
                                              name: estadoRespuesta
                                          name: encabezado
                                        cuerpoObtenerCantidadTransaccionesResponse:
                                          type: object
                                          properties:
                                            estadoRespuestaDetalle:
                                              type: object
                                              properties:
                                                estado:
                                                  type: object
                                                  properties:
                                                    codigoRespuesta:
                                                      type: string
                                                      name: codigoRespuesta
                                                    mensajeRespuesta:
                                                      type: string
                                                      name: mensajeRespuesta
                                                    sistema:
                                                      type: object
                                                      name: sistema
                                                  xml:
                                                    namespace: 'http://www.transbank.cl/Diccionario'
                                                    prefix: NS13
                                                  name: estado
                                              name: estadoRespuestaDetalle
                                            cantidadTransacciones:
                                              type: object
                                              properties:
                                                totalVentasAbonadas:
                                                  type: string
                                                  name: totalVentasAbonadas
                                                totalVentasAbonoPendiente:
                                                  type: string
                                                  name: totalVentasAbonoPendiente
                                                totalVentasNoProcesadas:
                                                  type: string
                                                  name: totalVentasNoProcesadas
                                                totalVentasAnuladas:
                                                  type: string
                                                  name: totalVentasAnuladas
                                                totalRegistros:
                                                  type: string
                                                  name: totalRegistros
                                              name: cantidadTransacciones
                                          name: >-
                                            cuerpoObtenerCantidadTransaccionesResponse
                                      xml:
                                        namespace: >-
                                          http://www.transbank.cl/entidad/transaccionFinanciera/v1
                                        prefix: NS1
                                      name: obtenerCantidadTransaccionesResponse
                                  name: Body
                              xml:
                                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                                prefix: soapenv
                              name: Envelope
                          xml:
                            namespace: ''
                          example: "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\">\r\n   <soapenv:Body>\r\n      <NS1:obtenerCantidadTransaccionesResponse xmlns:NS1=\"http://www.transbank.cl/entidad/transaccionFinanciera/v1\">\r\n         <NS1:encabezado>\r\n            <NS2:canal xmlns:NS2=\"http://www.transbank.cl/EncabezadoPortal\">?</NS2:canal>\r\n            <NS3:ipCanal xmlns:NS3=\"http://www.transbank.cl/EncabezadoPortal\">?</NS3:ipCanal>\r\n            <NS4:usuario xmlns:NS4=\"http://www.transbank.cl/EncabezadoPortal\">?</NS4:usuario>\r\n            <NS5:ipUsuario xmlns:NS5=\"http://www.transbank.cl/EncabezadoPortal\">?</NS5:ipUsuario>\r\n            <NS6:aplicacion xmlns:NS6=\"http://www.transbank.cl/EncabezadoPortal\">?</NS6:aplicacion>\r\n            <NS7:idTransaccionCanal xmlns:NS7=\"http://www.transbank.cl/EncabezadoPortal\">?</NS7:idTransaccionCanal>\r\n            <NS8:idTransaccionMDW xmlns:NS8=\"http://www.transbank.cl/EncabezadoPortal\">?</NS8:idTransaccionMDW>\r\n            <NS9:espacioNombre xmlns:NS9=\"http://www.transbank.cl/EncabezadoPortal\">http://www.transbank.cl/entidad/transaccionFinanciera/v1</NS9:espacioNombre>\r\n            <NS10:servicio xmlns:NS10=\"http://www.transbank.cl/EncabezadoPortal\">TransaccionFinanciera</NS10:servicio>\r\n            <NS11:operacion xmlns:NS11=\"http://www.transbank.cl/EncabezadoPortal\">obtenerCantidadTransacciones</NS11:operacion>\r\n            <NS12:estadoRespuesta xmlns:NS12=\"http://www.transbank.cl/EncabezadoPortal\">\r\n               <NS12:codigo>?</NS12:codigo>\r\n            </NS12:estadoRespuesta>\r\n         </NS1:encabezado>\r\n         <NS1:cuerpoObtenerCantidadTransaccionesResponse>\r\n            <NS1:estadoRespuestaDetalle>\r\n               <NS13:estado xmlns:NS13=\"http://www.transbank.cl/Diccionario\">\r\n                  <NS13:codigoRespuesta>0</NS13:codigoRespuesta>\r\n                  <NS13:mensajeRespuesta>Consulta Exitosa</NS13:mensajeRespuesta>\r\n                  <NS13:sistema/>\r\n               </NS13:estado>\r\n            </NS1:estadoRespuestaDetalle>\r\n            <NS1:cantidadTransacciones>\r\n               <NS1:totalVentasAbonadas>3350</NS1:totalVentasAbonadas>\r\n               <NS1:totalVentasAbonoPendiente>0</NS1:totalVentasAbonoPendiente>\r\n               <NS1:totalVentasNoProcesadas>0</NS1:totalVentasNoProcesadas>\r\n               <NS1:totalVentasAnuladas>0</NS1:totalVentasAnuladas>\r\n               <NS1:totalRegistros>3350</NS1:totalRegistros>\r\n            </NS1:cantidadTransacciones>\r\n         </NS1:cuerpoObtenerCantidadTransaccionesResponse>\r\n      </NS1:obtenerCantidadTransaccionesResponse>\r\n   </soapenv:Body>\r\n</soapenv:Envelope>"
                        variable: message.body
                        content: application/xml
                    outputs:
                      response:
                        schema:
                          $ref: '#/definitions/TotalesTransaccionesRs'
                        variable: message.body
                        content: application/json
                    actions:
                      - set: response.meta._msgId
                        value: >-
                          apim.getvariable('client.app.id')?apim.getvariable('client.app.id'):apim.getvariable('ctx.uuid')
                      - set: response.meta._version
                        value: apim.getvariable('api.version')
                      - set: response.meta._rqDateTime
                        value: apim.getvariable('system.datetime')
                      - set: response.meta._rsLength
                        value: '1'
                      - set: response.meta._clientId
                        value: apim.getvariable('client.org.id')
                      - set: response.data.totalVentasAbonadas
                        from: >-
                          input.Envelope.Body.obtenerCantidadTransaccionesResponse.cuerpoObtenerCantidadTransaccionesResponse.cantidadTransacciones.totalVentasAbonadas
                      - set: response.data.totalVentasAbonoPendiente
                        from: >-
                          input.Envelope.Body.obtenerCantidadTransaccionesResponse.cuerpoObtenerCantidadTransaccionesResponse.cantidadTransacciones.totalVentasAbonoPendiente
                      - set: response.data.totalVentasNoProcesadas
                        from: >-
                          input.Envelope.Body.obtenerCantidadTransaccionesResponse.cuerpoObtenerCantidadTransaccionesResponse.cantidadTransacciones.totalVentasNoProcesadas
                      - set: response.data.totalVentasAnuladas
                        from: >-
                          input.Envelope.Body.obtenerCantidadTransaccionesResponse.cuerpoObtenerCantidadTransaccionesResponse.cantidadTransacciones.totalVentasAnuladas
                      - set: response.data.totalRegistros
                        from: >-
                          input.Envelope.Body.obtenerCantidadTransaccionesResponse.cuerpoObtenerCantidadTransaccionesResponse.cantidadTransacciones.totalRegistros
                      - set: response.meta._transactionId
                        value: >-
                          apim.getvariable('request.headers.X-Global-Transaction-ID');
                - gatewayscript:
                    version: 2.0.0
                    title: insertSelf
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtencion self links\r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-04-08\r\n * @desc:  version inicial \r\n * \r\n *****/\r\nconst apim = require('apim');\r\n\r\nconst path =  `https://${apim.getvariable('request.headers.HostAPIC')}/${apim.getvariable('api.org.name')}/${apim.getvariable('env.path')}${apim.getvariable('api.operation.path')}`;\r\nlet dateSince = apim.getvariable('request.parameters.fecha-desde');\r\nlet dateUntil = apim.getvariable('request.parameters.fecha-hasta');\r\nlet codes = apim.getvariable('request.parameters.codigos-comercio');\r\n\r\nlet messageBody = apim.getvariable(\"message.body\");\r\n\r\nlet codeComer;\r\n\r\n\r\nif(codes){\r\n    codeComer = `&codios-comercio=${codes}`;\r\n}\r\n\r\n\r\n\r\nmessageBody.links = {\r\n     \"self\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:''}`\r\n}\r\n\r\napim.setvariable(\"message.body\", messageBody);"
            - condition: ($operationPath() = '/transacciones/resumen-ventas')
              execute:
                - gatewayscript:
                    version: 2.0.0
                    title: validateParameters
                    source: "/******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Validaciones iniciales de los parametros \r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-03-20\r\n * @desc:  version inicial \r\n * \r\n * @version: 2020-03-27\r\n * @desc: se cambian nombres de funciones  @author: jaimev@vc-soft.com\r\n *****/\r\n \r\n /** Constantes del JS */ \r\nconst apim = require('apim');\r\n\r\nconsole.error(\"Inicio de validate-parameter version 2020-04-02:08:45\");\r\n\r\nconst apigw = require('apigw');\r\napim.setvariable(\"ctx.uuid\", apigw.generateUUID());\r\n\r\nconst defaultErrorMsg = \"Invalid Parameter: Validation Failure\";\r\n\r\nlet dateSinceAsString = apim.getvariable('request.parameters.fecha-desde');\r\nlet dateUntilAsString = apim.getvariable('request.parameters.fecha-hasta');\r\nlet codes = apim.getvariable('request.parameters.codigos-comercio');\r\n\r\nconst now = new Date(); \r\n\r\nlet errors = [];\r\n\r\naddValidation(\"fecha-desde\",\r\n              !isDateFormat(dateSinceAsString),\r\n              { \"code\": 400,\r\n                \"title\": \"Fecha Invalida\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha fecha-desde=${dateSinceAsString} tiene que describirse en formato YYYY-MM-DDTHH:mm:ss`\r\n              },true);\r\n              \r\naddValidation(\"fecha-hasta\",\r\n              !isDateFormat(dateUntilAsString),\r\n              { \"code\": 400,\r\n                \"title\": \"Fecha Invalida\",\r\n                \"source\": { \"pointer\" : \"fecha-hasta\" },\r\n                \"detail\": `La fecha fecha-hasta=${dateUntilAsString} tiene que describirse en formato YYYY-MM-DDTHH:mm:ss` \r\n              },true);\r\n\r\nconst dateSince = new Date(dateSinceAsString);\r\nconst dateUntil = new Date(dateUntilAsString);\r\n\r\naddValidation(\"fecha-desde\",\r\n              (now.getTime() - dateSince.getTime())<0, // no cumple que esta en el pasado\r\n              { \"code\": 422,\r\n                \"title\": \"fecha-desde deberia estar en el pasado\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha-desde ${dateSince.toISOString()} tiene que estar en el pasado ` \r\n              }); \r\naddValidation(\"fecha-hasta\",\r\n               (now.getTime() - dateUntil.getTime())<0, // no cumple que esta en el pasado\r\n               { \"code\": 422,\r\n                 \"title\": \"fecha-hasta deberia estar en el pasado\",\r\n                 \"source\": { \"pointer\" : \"fecha-hasta\" },\r\n                 \"detail\": `La fecha-hasta ${dateUntil.toISOString()} tiene que estar en el pasado ` \r\n               }); \r\naddValidation(\"fecha-hasta\",\r\n              (dateUntil.getTime() - dateSince.getTime())<0, // no cumple fecha hasta mayor a desde\r\n              { \"code\": 422,\r\n                \"title\": \"fecha-hasta deberia ser posterior a fecha-desde\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha-hasta ${dateUntil.toISOString()} es menor a la fecha-desde ${dateSince.toISOString()}`\r\n              }); \r\n              \r\n if(codes){\r\n     addValidation(\"codigos-comercio\",\r\n                   (validateEmptySpaces(codes)), //validar espacios\r\n                   { \"code\": 422,\r\n                     \"title\": \"codigos-comercio invalido\",\r\n                     \"source\": { \"pointer\" : \"codigos-comercio\" },\r\n                     \"detail\": `Los codigos-comercio ${codes} contiene espacios en blanco`\r\n                   }); \r\n     addValidation(\"codigos-comercio\",\r\n                   (codes.charAt(codes.length-1) === ','), //validar si termina en coma\r\n                   { \"code\": 422,\r\n                     \"title\": \"codigos-comercio invalido\",\r\n                     \"source\": { \"pointer\" : \"codigos-comercio\" },\r\n                     \"detail\": `Los codigos-comercio ${codes} no debe  terminar con coma`\r\n                   });\r\n }\r\n\r\nif(errors.length > 0){\r\n    throwError();\r\n}\r\n\r\n/*** \r\n* Se utiliza apim.error para lanzar el error \r\n*/              \r\nfunction throwError(){\r\n    if(errors){\r\n        apim.setvariable(\"ctx.errorData\", errors);\r\n        const minStatus = errors.reduce((min, err) => err.code < min ? err.code : min, errors[0].code);\r\n        apim.error(\"ParametersException\",minStatus,defaultErrorMsg,defaultErrorMsg);\r\n    } \r\n}\r\n\r\n/***\r\n * Adiciona un error de validación a la estructura general de errores\r\n * @param field\r\n * @param isError\r\n * @param errorObj\r\n * @param isImmediate\r\n */\r\nfunction addValidation(field, isError, errorObj, isImmediate ){\r\n    console.error(\"Verificacion de validacion campo %s \", field);               \r\n    if(isError){\r\n        console.error(\"Falla de validacion identificada en %s \", field);\r\n        errors.push(errorObj);\r\n        if(isImmediate){\r\n            throwError();\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Entrega si es fecha formada con ISO 8601 2020-04-20T10:45:00\r\n * corregido milli jev  2020-01-01 2020-01-01T01:02:03\r\n * @param dateAsString \r\n */\r\nfunction isDateFormat(dateAsString){\r\n    if(!dateAsString){\r\n        return false;\r\n    }else{\r\n        var reg = /^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])(T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?)?(Z)?$/g;\r\n        if(!reg.test(dateAsString)){\r\n          return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n /**\r\n  * Valida que la cadena no contenga espacios en blanco\r\n  */ \r\n function validateEmptySpaces(stringToValidate){\r\n     const reg = /^$|\\s/g;\r\n     if(reg.test(stringToValidate)){\r\n         return true;\r\n     }\r\n     return false;\r\n }\r\n\r\n"
                    description: ''
                - gatewayscript:
                    version: 2.0.0
                    title: get-rut
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtención de RUT de consumidor\r\n * \r\n ****************************\r\n * @author: mtorres@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-03-27\r\n * @desc:  version inicial \r\n * \r\n *****/\r\n\r\nconst apim = require('apim');\r\nlet errors = [];\r\nconst rut = apim.getvariable('client.org.name');\r\nconst reg = /^[0-9]+[-|‐]{1}[0-9kK]{1}$/;\r\nif(reg.test(rut)){\r\n    let arrayrut = rut.split('-');\r\n    apim.setvariable('ctx.rutnumero',arrayrut[0],'set');\r\n    apim.setvariable('ctx.rutdigitov',arrayrut[1],'set');\r\n}else{\r\n  addErrors(\"422\",\"RUT invalido\",[\"El RUT no corresponde al formato de RUT\"],\"RUT\");\r\n  apim.setvariable(\"ctx.errorData\", errors);\r\n  apim.error('ParametersException', '422', 'Invalid parameters', 'Invalid parameters')\r\n}\r\nfunction addErrors (code, title, details, pointer) {\r\n  details.map(detail => {\r\n    const error = {\r\n      'code': code,\r\n      'title': title,\r\n      'source': {\r\n        'pointer': pointer\r\n      },\r\n      'detail': detail\r\n    }\r\n    errors.push(error)\r\n  })\r\n}"
                - gatewayscript:
                    version: 2.0.0
                    title: get-codcomercio
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtencion de listado de locales\r\n * \r\n ****************************\r\n * @author: mtorres@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-04-10\r\n * @desc:  version inicial \r\n * \r\n *****/\r\nconst apim = require('apim')\r\nconst codigosComercio = apim.getvariable('request.parameters.codigos-comercio')\r\nlet locals = []\r\nif (codigosComercio) {\r\n  let arrayCodigosComercio = codigosComercio.replace(/\\s|%20/g, '').split(',').filter(function (value, index, self) {return self.indexOf(value) === index;})\r\n  arrayCodigosComercio.forEach(local => {\r\n    if (local.length > 0) {\r\n      locals.push({'codigoLocal': local})\r\n    }\r\n  })\r\n}\r\napim.setvariable('ctx.listLocals', {'local': locals})"
                - map:
                    version: 2.0.0
                    title: requestMap-2
                    inputs:
                      fecha-desde:
                        schema:
                          type: string
                        variable: request.parameters.fecha-desde
                      fecha-hasta:
                        schema:
                          type: string
                        variable: request.parameters.fecha-hasta
                      rutnumero:
                        schema:
                          type: string
                        variable: ctx.rutnumero
                      rutdigitov:
                        schema:
                          type: string
                        variable: ctx.rutdigitov
                      listLocals:
                        schema:
                          type: object
                          properties:
                            local:
                              type: array
                              name: local
                              items:
                                type: object
                                properties:
                                  codigoLocal:
                                    type: string
                                    name: codigoLocal
                        variable: ctx.listLocals
                    outputs:
                      output:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerResumenTransaccionInput
                        variable: message.body
                        content: application/xml
                    actions:
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.encabezado.canal
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.encabezado.ipCanal
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.encabezado.usuario
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.encabezado.ipUsuario
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.encabezado.aplicacion
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.encabezado.idTransaccionCanal
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.encabezado.idTransaccionMDW
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.encabezado.espacioNombre
                        value: >-
                          'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.encabezado.servicio
                        value: '''TransaccionFinanciera'''
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.encabezado.operacion
                        value: '''obtenerResumenTransaccion'''
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.cuerpo.fechaInicio
                        from: fecha-desde
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.cuerpo.fechaFin
                        from: fecha-hasta
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.cuerpo.listaLocales
                        from: listLocals
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.cuerpo.rut.rut
                        from: rutnumero
                      - set: >-
                          output.Envelope.Body.obtenerResumenTransaccionRequest.cuerpo.rut.dv
                        from: rutdigitov
                    options:
                      mapEnablePostProcessingJSON: false
                      mapEmulateV4EmptyJSONObject: false
                      mapEmulateV4DefaultRequiredProps: false
                      mapReferenceLimit: 1
                      includeEmptyXMLElements: false
                      inlineNamespaces: false
                - invoke:
                    title: TransaccionFinancieraSOAP
                    version: 2.0.0
                    verb: POST
                    target-url: $(target-url)
                    header-control:
                      type: blacklist
                      values: []
                    parameter-control:
                      type: blacklist
                      values: []
                - xslt:
                    version: 2.0.0
                    title: set-message
                    input: false
                    source: |-
                      <?xml version="1.0" encoding="UTF-8"?>
                      <xsl:stylesheet version="1.0" 
                        xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                        xmlns:dp="http://www.datapower.com/extensions" 
                        xmlns:func="http://exslt.org/functions" 
                        xmlns:apim="http://www.ibm.com/apimanagement" extension-element-prefixes="dp func apim" 
                        xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
                        xmlns:NS1="http://www.transbank.cl/entidad/transaccionFinanciera/v1" 
                        xmlns:NS2="http://www.transbank.cl/Diccionario">
                        <xsl:include href="store:///dp/apim.custom.xsl" />

                        <xsl:template match="/">
                          <xsl:variable name="input" select="apim:payloadRead()" />
                          <xsl:call-template name="apim:setVariable">
                            <xsl:with-param name="varName" select="'ctx.message'" />
                            <xsl:with-param name="value" select="concat($input/soapenv:Envelope/soapenv:Body/*/NS1:cuerpo/NS2:estadoRespuestaDetalle/NS2:estado/NS2:mensajeRespuesta,$input/soapenv:Envelope/soapenv:Body/soapenv:Fault/faultstring)" />
                            <xsl:with-param name="action" select="'add'"/>
                          </xsl:call-template>
                        </xsl:template>
                      </xsl:stylesheet>
                - gatewayscript:
                    version: 2.0.0
                    title: validateResponse
                    source: >-
                      /*******************************************************
                       * \ \   / / ___/ ___| / _ \|  ___|_   _|
                       *  \ \ / | |   \___ \| | | | |_    | |  
                       *   \ V /| |___ ___) | |_| |  _|   | |  
                       *    \_/  \____|____/ \___/|_|     |_|  
                       * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial 
                       * en cualquier medio o en cualquier proyecto, sin previa autorización.
                       *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente 
                       * a personal interno a la empresa definida en la carátula de este documento.
                       *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos 
                       * distintos a los autorizados expresamente por VCSOFT
                       * 
                       *******************************************************
                       * 
                       * Validaciones de la respuesta final
                       * 
                       ****************************
                       * @author: jbernal@vc-soft.com
                       * 
                       * 
                       * @version: 2020-03-20
                       * @desc:  version inicial 
                       * 
                       * @version: 2020-03-27
                       * @desc: se cambian nombres de funciones  @author: jaimev@vc-soft.com
                       *****/
                      console.error("Inicio de validateResponse version
                      2020-04-02:08:45");


                      const apim = require('apim');


                      const defaultErrorMsg = "Service unavailable";


                      const messageBody = apim.getvariable('message.body');

                      const statusCode =
                      apim.getvariable('message.status.code');


                      let errors = [];


                      if(!messageBody){ 
                         setErrors(statusCode,
                              defaultErrorMsg,
                              ['El servicio interno no entregó resultado esperado']);
                      }


                      if(statusCode!=200){ 
                         setErrors(statusCode,
                                  apim.getvariable('message.status.reason'),
                                  [ apim.getvariable('ctx.message') ]); 
                      }



                      if(errors.length > 0 ){
                          throwError()
                      }


                      function throwError(){
                         apim.setvariable("ctx.errorData", errors);
                          const minStatus = errors.reduce((min, err) => err.code < min ? err.code : min, errors[0].code);
                         apim.error("ResponseException",minStatus,defaultErrorMsg,defaultErrorMsg);
                      }


                      /** registra objeto Error ***/

                      function setErrors(code, title, details, isImmediate){
                          details.map(detail => {
                              const error =  {
                                  "code": code,
                                  "title": title,
                                  "detail": detail
                              };
                              
                              errors.push(error);
                              
                              if(isImmediate){
                                  throwError();
                              }
                          })
                      }
                - map:
                    version: 2.0.0
                    title: responseMap
                    inputs:
                      input:
                        schema:
                          description: ''
                          type: object
                          properties:
                            Envelope:
                              type: object
                              properties:
                                Body:
                                  type: object
                                  properties:
                                    obtenerResumenTransaccionResponse:
                                      type: object
                                      properties:
                                        encabezado:
                                          type: object
                                          properties:
                                            canal:
                                              type: string
                                              name: canal
                                            ipCanal:
                                              type: string
                                              name: ipCanal
                                            usuario:
                                              type: string
                                              name: usuario
                                            aplicacion:
                                              type: string
                                              name: aplicacion
                                            idTransaccionCanal:
                                              type: string
                                              name: idTransaccionCanal
                                            idTransaccionMDW:
                                              type: string
                                              name: idTransaccionMDW
                                            espacioNombre:
                                              type: string
                                              name: espacioNombre
                                            servicio:
                                              type: string
                                              name: servicio
                                            operacion:
                                              type: string
                                              name: operacion
                                            estadoRespuesta:
                                              type: object
                                              properties:
                                                codigo:
                                                  type: string
                                                  name: codigo
                                              name: estadoRespuesta
                                          xml:
                                            namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                            prefix: NS2
                                          name: encabezado
                                        cuerpo:
                                          type: object
                                          properties:
                                            estadoRespuestaDetalle:
                                              type: object
                                              properties:
                                                estado:
                                                  type: object
                                                  properties:
                                                    codigoRespuesta:
                                                      type: string
                                                      name: codigoRespuesta
                                                    mensajeRespuesta:
                                                      type: string
                                                      name: mensajeRespuesta
                                                  name: estado
                                              xml:
                                                namespace: 'http://www.transbank.cl/Diccionario'
                                                prefix: NS3
                                              name: estadoRespuestaDetalle
                                            listaTransaccion:
                                              type: object
                                              properties:
                                                transaccion:
                                                  type: array
                                                  items:
                                                    properties:
                                                      fechaVenta:
                                                        type: string
                                                        name: fechaVenta
                                                      transaccionPesos:
                                                        type: string
                                                        name: transaccionPesos
                                                      transaccionPesosCredito:
                                                        type: string
                                                        name: transaccionPesosCredito
                                                      transaccionPesosDebito:
                                                        type: string
                                                        name: transaccionPesosDebito
                                                      transaccionDolar:
                                                        type: string
                                                        name: transaccionDolar
                                                      transaccionDolarCredito:
                                                        type: string
                                                        name: transaccionDolarCredito
                                                      transaccionDolarDebito:
                                                        type: string
                                                        name: transaccionDolarDebito
                                                      transaccionPesosPrepago:
                                                        type: string
                                                        name: transaccionPesosPrepago
                                                      transaccionDolarPrepago:
                                                        type: string
                                                        name: transaccionDolarPrepago
                                                    type: object
                                                  name: transaccion
                                              xml:
                                                namespace: >-
                                                  http://www.transbank.cl/entidad/transaccionFinanciera/v1
                                                prefix: NS2
                                              name: listaTransaccion
                                          name: cuerpo
                                      xml:
                                        namespace: >-
                                          http://www.transbank.cl/entidad/transaccionFinanciera/v1
                                        prefix: NS1
                                      name: obtenerResumenTransaccionResponse
                                  name: Body
                              xml:
                                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                                prefix: soapenv
                              name: Envelope
                          xml:
                            namespace: ''
                          example: "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\">\r\n   <soapenv:Body>\r\n      <NS1:obtenerResumenTransaccionResponse xmlns:NS1=\"http://www.transbank.cl/entidad/transaccionFinanciera/v1\">\r\n         <NS2:encabezado xmlns:NS2=\"http://www.transbank.cl/EncabezadoPortal\">\r\n            <NS2:canal>?</NS2:canal>\r\n            <NS2:ipCanal>?</NS2:ipCanal>\r\n            <NS2:usuario>?</NS2:usuario>\r\n            <NS2:aplicacion>?</NS2:aplicacion>\r\n            <NS2:idTransaccionCanal>?</NS2:idTransaccionCanal>\r\n            <NS2:idTransaccionMDW>5633756268576e62354e5454324b6a417366344d364b3936</NS2:idTransaccionMDW>\r\n            <NS2:espacioNombre>http://www.transbank.cl/entidad/transaccionFinanciera/v1</NS2:espacioNombre>\r\n            <NS2:servicio>TransaccionFinanciera</NS2:servicio>\r\n            <NS2:operacion>obtenerResumenTransaccion</NS2:operacion>\r\n            <NS2:estadoRespuesta>\r\n               <NS2:codigo>0</NS2:codigo>\r\n            </NS2:estadoRespuesta>\r\n         </NS2:encabezado>\r\n         <NS1:cuerpo>\r\n            <NS3:estadoRespuestaDetalle xmlns:NS3=\"http://www.transbank.cl/Diccionario\">\r\n               <NS3:estado>\r\n                  <NS3:codigoRespuesta>0</NS3:codigoRespuesta>\r\n                  <NS3:mensajeRespuesta>Consulta Exitosa</NS3:mensajeRespuesta>\r\n               </NS3:estado>\r\n            </NS3:estadoRespuestaDetalle>\r\n            <NS2:listaTransaccion xmlns:NS2=\"http://www.transbank.cl/entidad/transaccionFinanciera/v1\">\r\n               <NS2:transaccion>\r\n                  <NS2:fechaVenta>2015-01-08T00:00:00</NS2:fechaVenta>\r\n                  <NS2:transaccionPesos>23700</NS2:transaccionPesos>\r\n                  <NS2:transaccionPesosCredito>0</NS2:transaccionPesosCredito>\r\n                  <NS2:transaccionPesosDebito>23700</NS2:transaccionPesosDebito>\r\n                  <NS2:transaccionDolar>0</NS2:transaccionDolar>\r\n                  <NS2:transaccionDolarCredito>0</NS2:transaccionDolarCredito>\r\n                  <NS2:transaccionDolarDebito>0</NS2:transaccionDolarDebito>\r\n                  <NS2:transaccionPesosPrepago>0</NS2:transaccionPesosPrepago>\r\n                  <NS2:transaccionDolarPrepago>0</NS2:transaccionDolarPrepago>\r\n               </NS2:transaccion>\r\n               <NS2:transaccion>\r\n                  <NS2:fechaVenta>2015-01-07T00:00:00</NS2:fechaVenta>\r\n                  <NS2:transaccionPesos>70187</NS2:transaccionPesos>\r\n                  <NS2:transaccionPesosCredito>0</NS2:transaccionPesosCredito>\r\n                  <NS2:transaccionPesosDebito>70187</NS2:transaccionPesosDebito>\r\n                  <NS2:transaccionDolar>0</NS2:transaccionDolar>\r\n                  <NS2:transaccionDolarCredito>0</NS2:transaccionDolarCredito>\r\n                  <NS2:transaccionDolarDebito>0</NS2:transaccionDolarDebito>\r\n                  <NS2:transaccionPesosPrepago>0</NS2:transaccionPesosPrepago>\r\n                  <NS2:transaccionDolarPrepago>0</NS2:transaccionDolarPrepago>\r\n               </NS2:transaccion>\r\n            </NS2:listaTransaccion>\r\n         </NS1:cuerpo>\r\n      </NS1:obtenerResumenTransaccionResponse>\r\n   </soapenv:Body>\r\n</soapenv:Envelope>"
                        variable: message.body
                        content: application/xml
                    outputs:
                      response:
                        schema:
                          $ref: '#/definitions/ResumenTransaccionesRs'
                        variable: message.body
                        content: application/json
                    actions:
                      - create: response.data
                        foreach: >-
                          input.Envelope.Body.obtenerResumenTransaccionResponse.cuerpo.listaTransaccion.transaccion
                        from: >-
                          input.Envelope.Body.obtenerResumenTransaccionResponse.cuerpo.listaTransaccion.transaccion
                        actions:
                          - set: transaccionPesos
                            from: transaccionPesos
                          - set: transaccionPesosCredito
                            from: transaccionPesosCredito
                          - set: transaccionPesosDebito
                            from: transaccionPesosDebito
                          - set: transaccionDolar
                            from: transaccionDolar
                          - set: transaccionDolarCredito
                            from: transaccionDolarCredito
                          - set: transaccionDolarDebito
                            from: transaccionDolarDebito
                          - set: transaccionPesosPrepago
                            from: transaccionPesosPrepago
                          - set: transaccionDolarPrepago
                            from: transaccionDolarPrepago
                          - set: fechaVenta
                            from: fechaVenta
                      - set: response.meta._msgId
                        value: >-
                          apim.getvariable('client.app.id')?apim.getvariable('client.app.id'):apim.getvariable('ctx.uuid')
                      - set: response.meta._version
                        value: apim.getvariable('api.version')
                      - set: response.meta._rqDateTime
                        value: apim.getvariable('system.datetime')
                      - set: response.meta._clientId
                        value: apim.getvariable('client.org.id')
                      - set: response.meta._transactionId
                        value: >-
                          apim.getvariable('request.headers.X-Global-Transaction-ID');
                - gatewayscript:
                    version: 2.0.0
                    title: insertSelf
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtencion self links\r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-04-08\r\n * @desc:  version inicial \r\n * \r\n *****/\r\nconst apim = require('apim');\r\n\r\nconst path =  `https://${apim.getvariable('request.headers.HostAPIC')}/${apim.getvariable('api.org.name')}/${apim.getvariable('env.path')}${apim.getvariable('api.operation.path')}`;\r\nlet dateSince = apim.getvariable('request.parameters.fecha-desde');\r\nlet dateUntil = apim.getvariable('request.parameters.fecha-hasta');\r\nlet codes = apim.getvariable('request.parameters.codigos-comercio');\r\n\r\nlet messageBody = apim.getvariable(\"message.body\");\r\n\r\nlet codeComer;\r\n\r\n\r\nif(codes){\r\n    codeComer = `&codios-comercio=${codes}`;\r\n}\r\n\r\nmessageBody.meta[\"_rsLength\"] = messageBody.data?messageBody.data.length:0;\r\n\r\nmessageBody.links = {\r\n     \"self\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:''}`\r\n}\r\n\r\napim.setvariable(\"message.body\", messageBody);"
            - condition: ($operationPath() = '/transacciones')
              execute:
                - gatewayscript:
                    version: 2.0.0
                    title: validateParameters
                    source: "/******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Validaciones iniciales de los parametros \r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-03-20\r\n * @desc:  version inicial \r\n * \r\n * @version: 2020-03-27\r\n * @desc: se cambian nombres de funciones  @author: jaimev@vc-soft.com\r\n *****/\r\n \r\n /** Constantes del JS */ \r\nconst apim = require('apim');\r\n\r\nconsole.error(\"Inicio de validate-parameter version 2020-04-02:08:45\");\r\n\r\nconst apigw = require('apigw');\r\napim.setvariable(\"ctx.uuid\", apigw.generateUUID());\r\n\r\nconst defaultErrorMsg = \"Invalid Parameter: Validation Failure\";\r\nconst defaultPageSizeMax = $(defaultPageSizeMax);\r\nconst defaultPageSize = $(defaultPageSize);\r\n\r\n\r\nlet dateSinceAsString = apim.getvariable('request.parameters.fecha-desde');\r\nlet dateUntilAsString = apim.getvariable('request.parameters.fecha-hasta');\r\nlet codes = apim.getvariable('request.parameters.codigos-comercio');\r\nlet pageNumber = apim.getvariable('request.parameters.page-number');\r\nlet pageSize = apim.getvariable('request.parameters.page-size');\r\n\r\n\r\nif(!pageNumber){\r\n    pageNumber = 1;\r\n}\r\n\r\nif(!pageSize){\r\n    pageSize = defaultPageSize;\r\n}   \r\n\r\nconst now = new Date(); \r\n\r\nlet errors = [];\r\n\r\naddValidation(\"fecha-desde\",\r\n              !isDateFormat(dateSinceAsString),\r\n              { \"code\": 400,\r\n                \"title\": \"Fecha Invalida\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha fecha-desde=${dateSinceAsString} tiene que describirse en formato YYYY-MM-DDTHH:mm:ss`\r\n              },true);\r\n              \r\naddValidation(\"fecha-hasta\",\r\n              !isDateFormat(dateUntilAsString),\r\n              { \"code\": 400,\r\n                \"title\": \"Fecha Invalida\",\r\n                \"source\": { \"pointer\" : \"fecha-hasta\" },\r\n                \"detail\": `La fecha fecha-hasta=${dateUntilAsString} tiene que describirse en formato YYYY-MM-DDTHH:mm:ss` \r\n              },true);\r\n\r\naddValidation(\"page-number\",\r\n              isNumberFormat(pageNumber),\r\n              { \"code\": 400,\r\n                \"title\": \"Numero de pagina invalida\",\r\n                \"source\": { \"pointer\" : \"page-number\" },\r\n                \"detail\": `El numero page-number=${pageNumber} debe ser numerico` \r\n              });\r\naddValidation(\"page-size\",\r\n              isNumberFormat(pageSize),\r\n              { \"code\": 400,\r\n                \"title\": \"Numero de tamaño de pagina invalida\",\r\n                \"source\": { \"pointer\" : \"page-size\" },\r\n                \"detail\": `El numero page-size=${pageSize} debe se numerico` \r\n              });\r\naddValidation(\"page-size\",\r\n              (pageSize>defaultPageSizeMax),\r\n              { \"code\": 400,\r\n                \"title\": \"Numero de tamaño de pagina invalida\",\r\n                \"source\": { \"pointer\" : \"page-size\" },\r\n                \"detail\": `El numero page-size=${pageSize} debe ser menor al valor maximo permitido ${defaultPageSizeMax}` \r\n              });\r\n\r\n\r\nconst dateSince = new Date(dateSinceAsString);\r\nconst dateUntil = new Date(dateUntilAsString);\r\n\r\naddValidation(\"fecha-desde\",\r\n              (now.getTime() - dateSince.getTime())<0, // no cumple que esta en el pasado\r\n              { \"code\": 422,\r\n                \"title\": \"fecha-desde deberia estar en el pasado\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha-desde ${dateSince.toISOString()} tiene que estar en el pasado ` \r\n              }); \r\naddValidation(\"fecha-hasta\",\r\n              (now.getTime() - dateUntil.getTime())<0, // no cumple que esta en el pasado\r\n              { \"code\": 422,\r\n                \"title\": \"fecha-hasta deberia estar en el pasado\",\r\n                \"source\": { \"pointer\" : \"fecha-hasta\" },\r\n                \"detail\": `La fecha-hasta ${dateUntil.toISOString()} tiene que estar en el pasado ` \r\n              });               \r\n              \r\naddValidation(\"fecha-hasta\",\r\n              (dateUntil.getTime() - dateSince.getTime())<0, // no cumple fecha hasta mayor a desde\r\n              { \"code\": 422,\r\n                \"title\": \"fecha-hasta deberia ser posterior a fecha-desde\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha-hasta ${dateUntil.toISOString()} es menor a la fecha-desde ${dateSince.toISOString()}`\r\n              }); \r\n              \r\n if(codes){\r\n     addValidation(\"codigos-comercio\",\r\n                   (validateEmptySpaces(codes)), //validar espacios\r\n                   { \"code\": 422,\r\n                     \"title\": \"codigos-comercio invalido\",\r\n                     \"source\": { \"pointer\" : \"codigos-comercio\" },\r\n                     \"detail\": `Los codigos-comercio ${codes} contiene espacios en blanco`\r\n                   }); \r\n     addValidation(\"codigos-comercio\",\r\n                   (codes.charAt(codes.length-1) === ','), //validar si termina en coma\r\n                   { \"code\": 422,\r\n                     \"title\": \"codigos-comercio invalido\",\r\n                     \"source\": { \"pointer\" : \"codigos-comercio\" },\r\n                     \"detail\": `Los codigos-comercio ${codes} no debe  terminar con coma`\r\n                   });\r\n }\r\n\r\nif(errors.length > 0){\r\n    throwError();\r\n}\r\n\r\n/*** \r\n* Se utiliza apim.error para lanzar el error \r\n*/              \r\nfunction throwError(){\r\n    if(errors){\r\n        apim.setvariable(\"ctx.errorData\", errors);\r\n        const minStatus = errors.reduce((min, err) => err.code < min ? err.code : min, errors[0].code);\r\n        apim.error(\"ParametersException\",minStatus,defaultErrorMsg,defaultErrorMsg);\r\n    } \r\n}\r\n\r\n/***\r\n * Adiciona un error de validación a la estructura general de errores\r\n * @param field\r\n * @param isError\r\n * @param errorObj\r\n * @param isImmediate\r\n */\r\nfunction addValidation(field, isError, errorObj, isImmediate ){\r\n    console.error(\"Verificacion de validacion campo %s \", field);               \r\n    if(isError){\r\n        console.error(\"Falla de validacion identificada en %s \", field);\r\n        errors.push(errorObj);\r\n        if(isImmediate){\r\n            throwError();\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Entrega si es fecha formada con ISO 8601 2020-04-20T10:45:00\r\n * corregido milli jev  2020-01-01 2020-01-01T01:02:03\r\n * @param dateAsString \r\n */\r\nfunction isDateFormat(dateAsString){\r\n    if(!dateAsString){\r\n        return false;\r\n    }else{\r\n        var reg = /^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])(T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?)?(Z)?$/g;\r\n        if(!reg.test(dateAsString)){\r\n          return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * Valida que el numero ingresado sea un numerico\r\n */\r\nfunction isNumberFormat(number){\r\n    \r\n    let reg = /^([1-9])/;\r\n    if(reg.test(number)){\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\n /**\r\n  * Valida que la cadena no contenga espacios en blanco\r\n  */ \r\n function validateEmptySpaces(stringToValidate){\r\n     const reg = /^$|\\s/g;\r\n     if(reg.test(stringToValidate)){\r\n         return true;\r\n     }\r\n     return false;\r\n }\r\n"
                    description: ''
                - gatewayscript:
                    version: 2.0.0
                    title: parsing-date
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Conversion fecha a fomato date ISO8601\r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-03-27\r\n * @desc:  version inicial \r\n * \r\n *****/\r\n\r\nconst apim = require('apim');\r\n\r\nconsole.error(\"Inicio convercion fecha version 2020-04-16:08:45\");\r\n\r\nconst dateSinceAsSrting = apim.getvariable('request.parameters.fecha-desde');\r\nconst dateUntilAsString = apim.getvariable('request.parameters.fecha-hasta');\r\n\r\n\r\nlet dateSince = getFormattedDate(new Date(dateSinceAsSrting));\r\nlet dateUntil = getFormattedDate(new Date(dateUntilAsString));\r\n\r\napim.setvariable('ctx.fechaDesde', dateSince, 'set');\r\napim.setvariable('ctx.fechaHasta', dateUntil, 'set');\r\n\r\nfunction getFormattedDate(date) {\r\n\r\n    let month = '' + (date.getMonth() + 1);\r\n    let day = '' + date.getDate();\r\n    let year = date.getFullYear();\r\n\r\n    if (month.length < 2) {\r\n        month = '0' + month;\r\n    }\r\n    if (day.length < 2) {\r\n        day = '0' + day;\r\n    }\r\n    let formattedDate = `${year}-${month}-${day}`;\r\n    console.error(\"fecha formada \" + formattedDate);\r\n    return formattedDate;\r\n\r\n}"
                - gatewayscript:
                    version: 2.0.0
                    title: get-rut
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtención de RUT de consumidor\r\n * \r\n ****************************\r\n * @author: mtorres@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-03-27\r\n * @desc:  version inicial \r\n * \r\n *****/\r\n\r\nconst apim = require('apim');\r\nlet errors = [];\r\nconst rut = apim.getvariable('client.org.name');\r\nconst reg = /^[0-9]+[-|‐]{1}[0-9kK]{1}$/;\r\nif(reg.test(rut)){\r\n    let arrayrut = rut.split('-');\r\n    apim.setvariable('ctx.rutnumero',arrayrut[0],'set');\r\n    apim.setvariable('ctx.rutdigitov',arrayrut[1],'set');\r\n}else{\r\n  addErrors(\"422\",\"RUT invalido\",[\"El RUT no corresponde al formato de RUT\"],\"RUT\");\r\n  apim.setvariable(\"ctx.errorData\", errors);\r\n  apim.error('ParametersException', '422', 'Invalid parameters', 'Invalid parameters')\r\n}\r\nfunction addErrors (code, title, details, pointer) {\r\n  details.map(detail => {\r\n    const error = {\r\n      'code': code,\r\n      'title': title,\r\n      'source': {\r\n        'pointer': pointer\r\n      },\r\n      'detail': detail\r\n    }\r\n    errors.push(error)\r\n  })\r\n}"
                - gatewayscript:
                    version: 2.0.0
                    title: get-codcomercio
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtencion de listado de locales\r\n * \r\n ****************************\r\n * @author: mtorres@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-04-10\r\n * @desc:  version inicial \r\n * \r\n *****/\r\nconst apim = require('apim')\r\nconst codigosComercio = apim.getvariable('request.parameters.codigos-comercio')\r\nlet locals = []\r\nif (codigosComercio) {\r\n  let arrayCodigosComercio = codigosComercio.replace(/\\s|%20/g, '').split(',').filter(function (value, index, self) {return self.indexOf(value) === index;})\r\n  arrayCodigosComercio.forEach(local => {\r\n    if (local.length > 0) {\r\n      locals.push({'codigoLocal': local})\r\n    }\r\n  })\r\n}\r\napim.setvariable('ctx.listLocals', {'local': locals})"
                - map:
                    version: 2.0.0
                    title: requestMap-3
                    inputs:
                      fechaDesde:
                        schema:
                          type: string
                        variable: ctx.fechaDesde
                      fechaHasta:
                        schema:
                          type: string
                        variable: ctx.fechaHasta
                      page-number:
                        schema:
                          type: integer
                        variable: request.parameters.page-number
                      page-size:
                        schema:
                          type: integer
                        variable: request.parameters.page-size
                      rutnumero:
                        schema:
                          type: string
                        variable: ctx.rutnumero
                      rutdigitov:
                        schema:
                          type: string
                        variable: ctx.rutdigitov
                      listLocals:
                        schema:
                          type: object
                          properties:
                            local:
                              type: array
                              name: local
                              items:
                                type: object
                                properties:
                                  codigoLocal:
                                    type: string
                                    name: codigoLocal
                        variable: ctx.listLocals
                      objeto:
                        schema:
                          type: object
                        variable: ''
                    outputs:
                      output:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerTransaccionInput
                        variable: message.body
                        content: application/xml
                    actions:
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.encabezado.operacion
                        value: '''obtenerTransaccion'''
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.encabezado.servicio
                        value: '''TransaccionFinanciera'''
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.encabezado.espacioNombre
                        value: >-
                          'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.encabezado.idTransaccionMDW
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.encabezado.idTransaccionCanal
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.encabezado.aplicacion
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.encabezado.ipUsuario
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.encabezado.usuario
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.encabezado.canal
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.encabezado.ipCanal
                        value: '"?"'
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.cuerpo.rut.rut
                        from: rutnumero
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.cuerpo.rut.dv
                        from: rutdigitov
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.cuerpo.listaLocales
                        from: listLocals
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.cuerpo.verTarjeta
                        value: 'false'
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.cuerpo.fechaTransaccionInicio
                        from: fechaDesde
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.cuerpo.fechaTransaccionFin
                        from: fechaHasta
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.cuerpo.tipoTransaccion
                        value: '"V"'
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.cuerpo.paginacion.registroInicial
                        from: page-number
                        value: '$(page-number)?$(page-number):1;'
                        default: 1
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.cuerpo.paginacion.registroPorPagina
                        from: page-size
                        value: '$(page-size)?$(page-size):$(defaultPageSize);'
                        default: 20
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.cuerpo.listaProductos
                        from: objeto
                        value: >-
                          var listaProductos={};

                          listaProductos={"producto":[{"codigoProducto":"C,D,P"}]}
                      - set: >-
                          output.Envelope.Body.obtenerTransaccionRequest.cuerpo.listaMonedas
                        from: objeto
                        value: |-
                          var listaMonedas={};
                          listaMonedas={"moneda":[{"codigoMoneda":"CLP"}]};
                    options:
                      mapEnablePostProcessingJSON: false
                      mapEmulateV4EmptyJSONObject: false
                      mapEmulateV4DefaultRequiredProps: false
                      mapReferenceLimit: 1
                      includeEmptyXMLElements: false
                      inlineNamespaces: false
                - invoke:
                    title: TransaccionFinancieraSOAP
                    version: 2.0.0
                    verb: POST
                    target-url: $(target-url)
                    header-control:
                      type: blacklist
                      values: []
                    parameter-control:
                      type: blacklist
                      values: []
                - xslt:
                    version: 2.0.0
                    title: set-message
                    input: false
                    source: |-
                      <?xml version="1.0" encoding="UTF-8"?>
                      <xsl:stylesheet version="1.0" 
                        xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                        xmlns:dp="http://www.datapower.com/extensions" 
                        xmlns:func="http://exslt.org/functions" 
                        xmlns:apim="http://www.ibm.com/apimanagement" extension-element-prefixes="dp func apim" 
                        xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
                        xmlns:NS1="http://www.transbank.cl/entidad/transaccionFinanciera/v1" 
                        xmlns:NS2="http://www.transbank.cl/Diccionario">
                        <xsl:include href="store:///dp/apim.custom.xsl" />

                        <xsl:template match="/">
                          <xsl:variable name="input" select="apim:payloadRead()" />
                          <xsl:call-template name="apim:setVariable">
                            <xsl:with-param name="varName" select="'ctx.message'" />
                            <xsl:with-param name="value" select="concat($input/soapenv:Envelope/soapenv:Body/*/NS1:cuerpo/NS2:estadoRespuestaDetalle/NS2:estado/NS2:mensajeRespuesta,$input/soapenv:Envelope/soapenv:Body/soapenv:Fault/faultstring)" />
                            <xsl:with-param name="action" select="'add'"/>
                          </xsl:call-template>
                        </xsl:template>
                      </xsl:stylesheet>
                - gatewayscript:
                    version: 2.0.0
                    title: validateResponse
                    source: >-
                      /*******************************************************
                       * \ \   / / ___/ ___| / _ \|  ___|_   _|
                       *  \ \ / | |   \___ \| | | | |_    | |  
                       *   \ V /| |___ ___) | |_| |  _|   | |  
                       *    \_/  \____|____/ \___/|_|     |_|  
                       * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial 
                       * en cualquier medio o en cualquier proyecto, sin previa autorización.
                       *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente 
                       * a personal interno a la empresa definida en la carátula de este documento.
                       *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos 
                       * distintos a los autorizados expresamente por VCSOFT
                       * 
                       *******************************************************
                       * 
                       * Validaciones de la respuesta final
                       * 
                       ****************************
                       * @author: jbernal@vc-soft.com
                       * 
                       * 
                       * @version: 2020-03-20
                       * @desc:  version inicial 
                       * 
                       * @version: 2020-03-27
                       * @desc: se cambian nombres de funciones  @author: jaimev@vc-soft.com
                       *****/
                      console.error("Inicio de validateResponse version
                      2020-04-02:08:45");


                      const apim = require('apim');


                      const defaultErrorMsg = "Service unavailable";


                      const messageBody = apim.getvariable('message.body');

                      const statusCode =
                      apim.getvariable('message.status.code');


                      let errors = [];


                      if(!messageBody){ 
                         setErrors(statusCode,
                              defaultErrorMsg,
                              ['El servicio interno no entregó resultado esperado']);
                      }


                      if(statusCode!=200){ 
                         setErrors(statusCode,
                                  apim.getvariable('message.status.reason'),
                                  [ apim.getvariable('ctx.message') ]); 
                      }



                      if(errors.length > 0 ){
                          throwError()
                      }


                      function throwError(){
                         apim.setvariable("ctx.errorData", errors);
                          const minStatus = errors.reduce((min, err) => err.code < min ? err.code : min, errors[0].code);
                         apim.error("ResponseException",minStatus,defaultErrorMsg,defaultErrorMsg);
                      }


                      /** registra objeto Error ***/

                      function setErrors(code, title, details, isImmediate){
                          details.map(detail => {
                              const error =  {
                                  "code": code,
                                  "title": title,
                                  "detail": detail
                              };
                              
                              errors.push(error);
                              
                              if(isImmediate){
                                  throwError();
                              }
                          })
                      }
                - map:
                    version: 2.0.0
                    title: responseMap
                    inputs:
                      input:
                        schema:
                          description: ''
                          type: object
                          properties:
                            Envelope:
                              type: object
                              properties:
                                Body:
                                  type: object
                                  properties:
                                    obtenerTransaccionResponse:
                                      type: object
                                      properties:
                                        encabezado:
                                          type: object
                                          properties:
                                            canal:
                                              type: string
                                              name: canal
                                            ipCanal:
                                              type: string
                                              name: ipCanal
                                            usuario:
                                              type: string
                                              name: usuario
                                            aplicacion:
                                              type: string
                                              name: aplicacion
                                            idTransaccionCanal:
                                              type: string
                                              name: idTransaccionCanal
                                            idTransaccionMDW:
                                              type: string
                                              name: idTransaccionMDW
                                            espacioNombre:
                                              type: string
                                              name: espacioNombre
                                            servicio:
                                              type: string
                                              name: servicio
                                            operacion:
                                              type: string
                                              name: operacion
                                            estadoRespuesta:
                                              type: object
                                              properties:
                                                codigo:
                                                  type: string
                                                  name: codigo
                                              name: estadoRespuesta
                                          xml:
                                            namespace: 'http://www.transbank.cl/EncabezadoPortal'
                                            prefix: NS2
                                          name: encabezado
                                        cuerpo:
                                          type: object
                                          properties:
                                            estadoRespuestaDetalle:
                                              type: object
                                              properties:
                                                estado:
                                                  type: object
                                                  properties:
                                                    codigoRespuesta:
                                                      type: string
                                                      name: codigoRespuesta
                                                    mensajeRespuesta:
                                                      type: string
                                                      name: mensajeRespuesta
                                                  name: estado
                                              xml:
                                                namespace: 'http://www.transbank.cl/Diccionario'
                                                prefix: NS3
                                              name: estadoRespuestaDetalle
                                            paginacion:
                                              type: object
                                              properties:
                                                registroInicial:
                                                  type: string
                                                  name: registroInicial
                                                registroPorPagina:
                                                  type: string
                                                  name: registroPorPagina
                                                totalRegistros:
                                                  type: string
                                                  name: totalRegistros
                                              xml:
                                                namespace: 'http://www.transbank.cl/Diccionario'
                                                prefix: NS2
                                              name: paginacion
                                            ordenamiento:
                                              type: object
                                              xml:
                                                namespace: 'http://www.transbank.cl/Diccionario'
                                                prefix: NS3
                                              name: ordenamiento
                                            listaTransaccionFinanciera:
                                              type: object
                                              properties:
                                                transaccionFinanciera:
                                                  type: array
                                                  items:
                                                    properties:
                                                      transaccion:
                                                        type: object
                                                        properties:
                                                          codigoLocal:
                                                            type: string
                                                            name: codigoLocal
                                                          nombreLocal:
                                                            type: string
                                                            name: nombreLocal
                                                          tipoTransaccion:
                                                            type: string
                                                            name: tipoTransaccion
                                                          horaTransaccion:
                                                            type: object
                                                            name: horaTransaccion
                                                          fechaTransaccion:
                                                            type: string
                                                            name: fechaTransaccion
                                                          fechaProceso:
                                                            type: string
                                                            name: fechaProceso
                                                          ordenPedido:
                                                            type: object
                                                            name: ordenPedido
                                                          idServicio:
                                                            type: object
                                                            name: idServicio
                                                          numeroTarjeta:
                                                            type: string
                                                            name: numeroTarjeta
                                                          moneda:
                                                            type: string
                                                            name: moneda
                                                          tipoProducto:
                                                            type: string
                                                            name: tipoProducto
                                                          tipoMedioPago:
                                                            type: object
                                                            name: tipoMedioPago
                                                          tipoCuota:
                                                            type: string
                                                            name: tipoCuota
                                                          totalCuotas:
                                                            type: string
                                                            name: totalCuotas
                                                          tipoVenta:
                                                            type: string
                                                            name: tipoVenta
                                                          numeroCuota:
                                                            type: string
                                                            name: numeroCuota
                                                          montoTransaccion:
                                                            type: string
                                                            name: montoTransaccion
                                                          montoCuotas:
                                                            type: string
                                                            name: montoCuotas
                                                          codigoAutorizacion:
                                                            type: string
                                                            name: codigoAutorizacion
                                                          numeroBoleta:
                                                            type: string
                                                            name: numeroBoleta
                                                          fechaAbono:
                                                            type: string
                                                            name: fechaAbono
                                                          montoAbono:
                                                            type: string
                                                            name: montoAbono
                                                          montoOriginalVenta:
                                                            type: string
                                                            name: montoOriginalVenta
                                                          montoExentoTotal:
                                                            type: string
                                                            name: montoExentoTotal
                                                          montoAfecto:
                                                            type: string
                                                            name: montoAfecto
                                                          comision:
                                                            type: string
                                                            name: comision
                                                          ivaComision:
                                                            type: string
                                                            name: ivaComision
                                                          comisionAdicional:
                                                            type: string
                                                            name: comisionAdicional
                                                          ivaComisionAdicional:
                                                            type: string
                                                            name: ivaComisionAdicional
                                                          datoLiquidacion:
                                                            type: string
                                                            name: datoLiquidacion
                                                          desfaseAbono:
                                                            type: string
                                                            name: desfaseAbono
                                                          lninsec:
                                                            type: string
                                                            name: lninsec
                                                          lninsecAnterior:
                                                            type: object
                                                            name: lninsecAnterior
                                                          estado:
                                                            type: string
                                                            name: estado
                                                          debitoPrepago:
                                                            type: string
                                                            name: debitoPrepago
                                                          origenTransaccion:
                                                            type: string
                                                            name: origenTransaccion
                                                          montoVuelto:
                                                            type: string
                                                            name: montoVuelto
                                                        name: transaccion
                                                    type: object
                                                  name: transaccionFinanciera
                                              xml:
                                                namespace: >-
                                                  http://www.transbank.cl/entidad/transaccionFinanciera/v1
                                                prefix: NS4
                                              name: listaTransaccionFinanciera
                                          name: cuerpo
                                      xml:
                                        namespace: >-
                                          http://www.transbank.cl/entidad/transaccionFinanciera/v1
                                        prefix: NS1
                                      name: obtenerTransaccionResponse
                                  name: Body
                              xml:
                                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                                prefix: soapenv
                              name: Envelope
                          xml:
                            namespace: ''
                          example: "<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\">\r\n   <soapenv:Body>\r\n      <NS1:obtenerTransaccionResponse xmlns:NS1=\"http://www.transbank.cl/entidad/transaccionFinanciera/v1\">\r\n         <NS2:encabezado xmlns:NS2=\"http://www.transbank.cl/EncabezadoPortal\">\r\n            <NS2:canal>?</NS2:canal>\r\n            <NS2:ipCanal>?</NS2:ipCanal>\r\n            <NS2:usuario>?</NS2:usuario>\r\n            <NS2:aplicacion>?</NS2:aplicacion>\r\n            <NS2:idTransaccionCanal>?</NS2:idTransaccionCanal>\r\n            <NS2:idTransaccionMDW>423932695975666878667a615945455a67544542516a7158</NS2:idTransaccionMDW>\r\n            <NS2:espacioNombre>http://www.transbank.cl/entidad/transaccionFinanciera/v1</NS2:espacioNombre>\r\n            <NS2:servicio>TransaccionFinanciera</NS2:servicio>\r\n            <NS2:operacion>obtenerTransaccion</NS2:operacion>\r\n            <NS2:estadoRespuesta>\r\n               <NS2:codigo>0</NS2:codigo>\r\n            </NS2:estadoRespuesta>\r\n         </NS2:encabezado>\r\n         <NS1:cuerpo>\r\n            <NS3:estadoRespuestaDetalle xmlns:NS3=\"http://www.transbank.cl/Diccionario\">\r\n               <NS3:estado>\r\n                  <NS3:codigoRespuesta>0</NS3:codigoRespuesta>\r\n                  <NS3:mensajeRespuesta>Consulta Exitosa</NS3:mensajeRespuesta>\r\n               </NS3:estado>\r\n            </NS3:estadoRespuestaDetalle>\r\n            <NS2:paginacion xmlns:NS2=\"http://www.transbank.cl/Diccionario\">\r\n               <NS2:registroInicial>1</NS2:registroInicial>\r\n               <NS2:registroPorPagina>10</NS2:registroPorPagina>\r\n               <NS2:totalRegistros>0</NS2:totalRegistros>\r\n            </NS2:paginacion>\r\n            <NS3:ordenamiento xmlns:NS3=\"http://www.transbank.cl/Diccionario\"/>\r\n            <NS4:listaTransaccionFinanciera xmlns:NS4=\"http://www.transbank.cl/entidad/transaccionFinanciera/v1\">\r\n               <NS4:transaccionFinanciera>\r\n                  <NS4:transaccion>\r\n                     <NS4:codigoLocal>27403611</NS4:codigoLocal>\r\n                     <NS4:nombreLocal>COOPEUCH ALAMEDA 194 P.6</NS4:nombreLocal>\r\n                     <NS4:tipoTransaccion>V</NS4:tipoTransaccion>\r\n                     <NS4:horaTransaccion></NS4:horaTransaccion>\r\n                     <NS4:fechaTransaccion>2019-12-26</NS4:fechaTransaccion>\r\n                     <NS4:fechaProceso>2019-12-26</NS4:fechaProceso>\r\n                     <NS4:ordenPedido/>\r\n                     <NS4:idServicio/>\r\n                     <NS4:numeroTarjeta>XXX2446</NS4:numeroTarjeta>\r\n                     <NS4:moneda>CLP</NS4:moneda>\r\n                     <NS4:tipoProducto>D</NS4:tipoProducto>\r\n                     <NS4:tipoMedioPago/>\r\n                     <NS4:tipoCuota>Normal</NS4:tipoCuota>\r\n                     <NS4:totalCuotas>1</NS4:totalCuotas>\r\n                     <NS4:tipoVenta>Venta Normal sin cuotas</NS4:tipoVenta>\r\n                     <NS4:numeroCuota>1</NS4:numeroCuota>\r\n                     <NS4:montoTransaccion>7411.00</NS4:montoTransaccion>\r\n                     <NS4:montoCuotas>0</NS4:montoCuotas>\r\n                     <NS4:codigoAutorizacion>902446</NS4:codigoAutorizacion>\r\n                     <NS4:numeroBoleta>0000000001</NS4:numeroBoleta>\r\n                     <NS4:fechaAbono>2019-12-27</NS4:fechaAbono>\r\n                     <NS4:montoAbono>7235</NS4:montoAbono>\r\n                     <NS4:montoOriginalVenta>7411</NS4:montoOriginalVenta>\r\n                     <NS4:montoExentoTotal>-1</NS4:montoExentoTotal>\r\n                     <NS4:montoAfecto>7411</NS4:montoAfecto>\r\n                     <NS4:comision>148</NS4:comision>\r\n                     <NS4:ivaComision>28</NS4:ivaComision>\r\n                     <NS4:comisionAdicional>0</NS4:comisionAdicional>\r\n                     <NS4:ivaComisionAdicional>0</NS4:ivaComisionAdicional>\r\n                     <NS4:datoLiquidacion>00</NS4:datoLiquidacion>\r\n                     <NS4:desfaseAbono>0</NS4:desfaseAbono>\r\n                     <NS4:lninsec>00000000000000003902446</NS4:lninsec>\r\n                     <NS4:lninsecAnterior/>\r\n                     <NS4:estado>Abonado</NS4:estado>\r\n                     <NS4:debitoPrepago>D</NS4:debitoPrepago>\r\n                     <NS4:origenTransaccion>TXA</NS4:origenTransaccion>\r\n                     <NS4:montoVuelto>0</NS4:montoVuelto>\r\n                  </NS4:transaccion>\r\n               </NS4:transaccionFinanciera>\r\n               <NS4:transaccionFinanciera>\r\n                  <NS4:transaccion>\r\n                     <NS4:codigoLocal>27403611</NS4:codigoLocal>\r\n                     <NS4:nombreLocal>COOPEUCH ALAMEDA 194 P.6</NS4:nombreLocal>\r\n                     <NS4:tipoTransaccion>V</NS4:tipoTransaccion>\r\n                     <NS4:horaTransaccion></NS4:horaTransaccion>\r\n                     <NS4:fechaTransaccion>2019-12-26</NS4:fechaTransaccion>\r\n                     <NS4:fechaProceso>2019-12-26</NS4:fechaProceso>\r\n                     <NS4:ordenPedido/>\r\n                     <NS4:idServicio/>\r\n                     <NS4:numeroTarjeta>XXX2380</NS4:numeroTarjeta>\r\n                     <NS4:moneda>CLP</NS4:moneda>\r\n                     <NS4:tipoProducto>D</NS4:tipoProducto>\r\n                     <NS4:tipoMedioPago/>\r\n                     <NS4:tipoCuota>Normal</NS4:tipoCuota>\r\n                     <NS4:totalCuotas>1</NS4:totalCuotas>\r\n                     <NS4:tipoVenta>Venta Normal sin cuotas</NS4:tipoVenta>\r\n                     <NS4:numeroCuota>1</NS4:numeroCuota>\r\n                     <NS4:montoTransaccion>7949.00</NS4:montoTransaccion>\r\n                     <NS4:montoCuotas>0</NS4:montoCuotas>\r\n                     <NS4:codigoAutorizacion>902380</NS4:codigoAutorizacion>\r\n                     <NS4:numeroBoleta>0000000001</NS4:numeroBoleta>\r\n                     <NS4:fechaAbono>2019-12-27</NS4:fechaAbono>\r\n                     <NS4:montoAbono>7760</NS4:montoAbono>\r\n                     <NS4:montoOriginalVenta>7949</NS4:montoOriginalVenta>\r\n                     <NS4:montoExentoTotal>-1</NS4:montoExentoTotal>\r\n                     <NS4:montoAfecto>7949</NS4:montoAfecto>\r\n                     <NS4:comision>159</NS4:comision>\r\n                     <NS4:ivaComision>30</NS4:ivaComision>\r\n                     <NS4:comisionAdicional>0</NS4:comisionAdicional>\r\n                     <NS4:ivaComisionAdicional>0</NS4:ivaComisionAdicional>\r\n                     <NS4:datoLiquidacion>00</NS4:datoLiquidacion>\r\n                     <NS4:desfaseAbono>0</NS4:desfaseAbono>\r\n                     <NS4:lninsec>00000000000000003902380</NS4:lninsec>\r\n                     <NS4:lninsecAnterior/>\r\n                     <NS4:estado>Abonado</NS4:estado>\r\n                     <NS4:debitoPrepago>D</NS4:debitoPrepago>\r\n                     <NS4:origenTransaccion>TXA</NS4:origenTransaccion>\r\n                     <NS4:montoVuelto>0</NS4:montoVuelto>\r\n                  </NS4:transaccion>\r\n               </NS4:transaccionFinanciera>\r\n               <NS4:transaccionFinanciera>\r\n                  <NS4:transaccion>\r\n                     <NS4:codigoLocal>27403611</NS4:codigoLocal>\r\n                     <NS4:nombreLocal>COOPEUCH ALAMEDA 194 P.6</NS4:nombreLocal>\r\n                     <NS4:tipoTransaccion>V</NS4:tipoTransaccion>\r\n                     <NS4:horaTransaccion></NS4:horaTransaccion>\r\n                     <NS4:fechaTransaccion>2019-12-26</NS4:fechaTransaccion>\r\n                     <NS4:fechaProceso>2019-12-26</NS4:fechaProceso>\r\n                     <NS4:ordenPedido/>\r\n                     <NS4:idServicio/>\r\n                     <NS4:numeroTarjeta>XXX2450</NS4:numeroTarjeta>\r\n                     <NS4:moneda>CLP</NS4:moneda>\r\n                     <NS4:tipoProducto>D</NS4:tipoProducto>\r\n                     <NS4:tipoMedioPago/>\r\n                     <NS4:tipoCuota>Normal</NS4:tipoCuota>\r\n                     <NS4:totalCuotas>1</NS4:totalCuotas>\r\n                     <NS4:tipoVenta>Venta Normal sin cuotas</NS4:tipoVenta>\r\n                     <NS4:numeroCuota>1</NS4:numeroCuota>\r\n                     <NS4:montoTransaccion>5112.00</NS4:montoTransaccion>\r\n                     <NS4:montoCuotas>0</NS4:montoCuotas>\r\n                     <NS4:codigoAutorizacion>902450</NS4:codigoAutorizacion>\r\n                     <NS4:numeroBoleta>0000000001</NS4:numeroBoleta>\r\n                     <NS4:fechaAbono>2019-12-27</NS4:fechaAbono>\r\n                     <NS4:montoAbono>4991</NS4:montoAbono>\r\n                     <NS4:montoOriginalVenta>5112</NS4:montoOriginalVenta>\r\n                     <NS4:montoExentoTotal>-1</NS4:montoExentoTotal>\r\n                     <NS4:montoAfecto>5112</NS4:montoAfecto>\r\n                     <NS4:comision>102</NS4:comision>\r\n                     <NS4:ivaComision>19</NS4:ivaComision>\r\n                     <NS4:comisionAdicional>0</NS4:comisionAdicional>\r\n                     <NS4:ivaComisionAdicional>0</NS4:ivaComisionAdicional>\r\n                     <NS4:datoLiquidacion>00</NS4:datoLiquidacion>\r\n                     <NS4:desfaseAbono>0</NS4:desfaseAbono>\r\n                     <NS4:lninsec>00000000000000003902450</NS4:lninsec>\r\n                     <NS4:lninsecAnterior/>\r\n                     <NS4:estado>Abonado</NS4:estado>\r\n                     <NS4:debitoPrepago>D</NS4:debitoPrepago>\r\n                     <NS4:origenTransaccion>TXA</NS4:origenTransaccion>\r\n                     <NS4:montoVuelto>0</NS4:montoVuelto>\r\n                  </NS4:transaccion>\r\n               </NS4:transaccionFinanciera>\r\n               <NS4:transaccionFinanciera>\r\n                  <NS4:transaccion>\r\n                     <NS4:codigoLocal>27403611</NS4:codigoLocal>\r\n                     <NS4:nombreLocal>COOPEUCH ALAMEDA 194 P.6</NS4:nombreLocal>\r\n                     <NS4:tipoTransaccion>V</NS4:tipoTransaccion>\r\n                     <NS4:horaTransaccion></NS4:horaTransaccion>\r\n                     <NS4:fechaTransaccion>2019-12-26</NS4:fechaTransaccion>\r\n                     <NS4:fechaProceso>2019-12-26</NS4:fechaProceso>\r\n                     <NS4:ordenPedido/>\r\n                     <NS4:idServicio/>\r\n                     <NS4:numeroTarjeta>XXX2452</NS4:numeroTarjeta>\r\n                     <NS4:moneda>CLP</NS4:moneda>\r\n                     <NS4:tipoProducto>D</NS4:tipoProducto>\r\n                     <NS4:tipoMedioPago/>\r\n                     <NS4:tipoCuota>Normal</NS4:tipoCuota>\r\n                     <NS4:totalCuotas>1</NS4:totalCuotas>\r\n                     <NS4:tipoVenta>Venta Normal sin cuotas</NS4:tipoVenta>\r\n                     <NS4:numeroCuota>1</NS4:numeroCuota>\r\n                     <NS4:montoTransaccion>5114.00</NS4:montoTransaccion>\r\n                     <NS4:montoCuotas>0</NS4:montoCuotas>\r\n                     <NS4:codigoAutorizacion>902452</NS4:codigoAutorizacion>\r\n                     <NS4:numeroBoleta>0000000001</NS4:numeroBoleta>\r\n                     <NS4:fechaAbono>2019-12-27</NS4:fechaAbono>\r\n                     <NS4:montoAbono>4993</NS4:montoAbono>\r\n                     <NS4:montoOriginalVenta>5114</NS4:montoOriginalVenta>\r\n                     <NS4:montoExentoTotal>-1</NS4:montoExentoTotal>\r\n                     <NS4:montoAfecto>5114</NS4:montoAfecto>\r\n                     <NS4:comision>102</NS4:comision>\r\n                     <NS4:ivaComision>19</NS4:ivaComision>\r\n                     <NS4:comisionAdicional>0</NS4:comisionAdicional>\r\n                     <NS4:ivaComisionAdicional>0</NS4:ivaComisionAdicional>\r\n                     <NS4:datoLiquidacion>00</NS4:datoLiquidacion>\r\n                     <NS4:desfaseAbono>0</NS4:desfaseAbono>\r\n                     <NS4:lninsec>00000000000000003902452</NS4:lninsec>\r\n                     <NS4:lninsecAnterior/>\r\n                     <NS4:estado>Abonado</NS4:estado>\r\n                     <NS4:debitoPrepago>D</NS4:debitoPrepago>\r\n                     <NS4:origenTransaccion>TXA</NS4:origenTransaccion>\r\n                     <NS4:montoVuelto>0</NS4:montoVuelto>\r\n                  </NS4:transaccion>\r\n               </NS4:transaccionFinanciera>\r\n               <NS4:transaccionFinanciera>\r\n                  <NS4:transaccion>\r\n                     <NS4:codigoLocal>27403611</NS4:codigoLocal>\r\n                     <NS4:nombreLocal>COOPEUCH ALAMEDA 194 P.6</NS4:nombreLocal>\r\n                     <NS4:tipoTransaccion>V</NS4:tipoTransaccion>\r\n                     <NS4:horaTransaccion></NS4:horaTransaccion>\r\n                     <NS4:fechaTransaccion>2019-12-26</NS4:fechaTransaccion>\r\n                     <NS4:fechaProceso>2019-12-26</NS4:fechaProceso>\r\n                     <NS4:ordenPedido/>\r\n                     <NS4:idServicio/>\r\n                     <NS4:numeroTarjeta>XXX2454</NS4:numeroTarjeta>\r\n                     <NS4:moneda>CLP</NS4:moneda>\r\n                     <NS4:tipoProducto>D</NS4:tipoProducto>\r\n                     <NS4:tipoMedioPago/>\r\n                     <NS4:tipoCuota>Normal</NS4:tipoCuota>\r\n                     <NS4:totalCuotas>1</NS4:totalCuotas>\r\n                     <NS4:tipoVenta>Venta Normal sin cuotas</NS4:tipoVenta>\r\n                     <NS4:numeroCuota>1</NS4:numeroCuota>\r\n                     <NS4:montoTransaccion>8732.00</NS4:montoTransaccion>\r\n                     <NS4:montoCuotas>0</NS4:montoCuotas>\r\n                     <NS4:codigoAutorizacion>902454</NS4:codigoAutorizacion>\r\n                     <NS4:numeroBoleta>0000000001</NS4:numeroBoleta>\r\n                     <NS4:fechaAbono>2019-12-27</NS4:fechaAbono>\r\n                     <NS4:montoAbono>8524</NS4:montoAbono>\r\n                     <NS4:montoOriginalVenta>8732</NS4:montoOriginalVenta>\r\n                     <NS4:montoExentoTotal>-1</NS4:montoExentoTotal>\r\n                     <NS4:montoAfecto>8732</NS4:montoAfecto>\r\n                     <NS4:comision>175</NS4:comision>\r\n                     <NS4:ivaComision>33</NS4:ivaComision>\r\n                     <NS4:comisionAdicional>0</NS4:comisionAdicional>\r\n                     <NS4:ivaComisionAdicional>0</NS4:ivaComisionAdicional>\r\n                     <NS4:datoLiquidacion>00</NS4:datoLiquidacion>\r\n                     <NS4:desfaseAbono>0</NS4:desfaseAbono>\r\n                     <NS4:lninsec>00000000000000003902454</NS4:lninsec>\r\n                     <NS4:lninsecAnterior/>\r\n                     <NS4:estado>Abonado</NS4:estado>\r\n                     <NS4:debitoPrepago>D</NS4:debitoPrepago>\r\n                     <NS4:origenTransaccion>TXA</NS4:origenTransaccion>\r\n                     <NS4:montoVuelto>0</NS4:montoVuelto>\r\n                  </NS4:transaccion>\r\n               </NS4:transaccionFinanciera>\r\n               <NS4:transaccionFinanciera>\r\n                  <NS4:transaccion>\r\n                     <NS4:codigoLocal>27403611</NS4:codigoLocal>\r\n                     <NS4:nombreLocal>COOPEUCH ALAMEDA 194 P.6</NS4:nombreLocal>\r\n                     <NS4:tipoTransaccion>V</NS4:tipoTransaccion>\r\n                     <NS4:horaTransaccion></NS4:horaTransaccion>\r\n                     <NS4:fechaTransaccion>2019-12-26</NS4:fechaTransaccion>\r\n                     <NS4:fechaProceso>2019-12-26</NS4:fechaProceso>\r\n                     <NS4:ordenPedido/>\r\n                     <NS4:idServicio/>\r\n                     <NS4:numeroTarjeta>XXX2456</NS4:numeroTarjeta>\r\n                     <NS4:moneda>CLP</NS4:moneda>\r\n                     <NS4:tipoProducto>D</NS4:tipoProducto>\r\n                     <NS4:tipoMedioPago/>\r\n                     <NS4:tipoCuota>Normal</NS4:tipoCuota>\r\n                     <NS4:totalCuotas>1</NS4:totalCuotas>\r\n                     <NS4:tipoVenta>Venta Normal sin cuotas</NS4:tipoVenta>\r\n                     <NS4:numeroCuota>1</NS4:numeroCuota>\r\n                     <NS4:montoTransaccion>6232.00</NS4:montoTransaccion>\r\n                     <NS4:montoCuotas>0</NS4:montoCuotas>\r\n                     <NS4:codigoAutorizacion>902456</NS4:codigoAutorizacion>\r\n                     <NS4:numeroBoleta>0000000001</NS4:numeroBoleta>\r\n                     <NS4:fechaAbono>2019-12-27</NS4:fechaAbono>\r\n                     <NS4:montoAbono>6083</NS4:montoAbono>\r\n                     <NS4:montoOriginalVenta>6232</NS4:montoOriginalVenta>\r\n                     <NS4:montoExentoTotal>-1</NS4:montoExentoTotal>\r\n                     <NS4:montoAfecto>6232</NS4:montoAfecto>\r\n                     <NS4:comision>125</NS4:comision>\r\n                     <NS4:ivaComision>24</NS4:ivaComision>\r\n                     <NS4:comisionAdicional>0</NS4:comisionAdicional>\r\n                     <NS4:ivaComisionAdicional>0</NS4:ivaComisionAdicional>\r\n                     <NS4:datoLiquidacion>00</NS4:datoLiquidacion>\r\n                     <NS4:desfaseAbono>0</NS4:desfaseAbono>\r\n                     <NS4:lninsec>00000000000000003902456</NS4:lninsec>\r\n                     <NS4:lninsecAnterior/>\r\n                     <NS4:estado>Abonado</NS4:estado>\r\n                     <NS4:debitoPrepago>D</NS4:debitoPrepago>\r\n                     <NS4:origenTransaccion>TXA</NS4:origenTransaccion>\r\n                     <NS4:montoVuelto>0</NS4:montoVuelto>\r\n                  </NS4:transaccion>\r\n               </NS4:transaccionFinanciera>\r\n               <NS4:transaccionFinanciera>\r\n                  <NS4:transaccion>\r\n                     <NS4:codigoLocal>27403611</NS4:codigoLocal>\r\n                     <NS4:nombreLocal>COOPEUCH ALAMEDA 194 P.6</NS4:nombreLocal>\r\n                     <NS4:tipoTransaccion>V</NS4:tipoTransaccion>\r\n                     <NS4:horaTransaccion></NS4:horaTransaccion>\r\n                     <NS4:fechaTransaccion>2019-12-26</NS4:fechaTransaccion>\r\n                     <NS4:fechaProceso>2019-12-26</NS4:fechaProceso>\r\n                     <NS4:ordenPedido/>\r\n                     <NS4:idServicio/>\r\n                     <NS4:numeroTarjeta>XXX2382</NS4:numeroTarjeta>\r\n                     <NS4:moneda>CLP</NS4:moneda>\r\n                     <NS4:tipoProducto>D</NS4:tipoProducto>\r\n                     <NS4:tipoMedioPago/>\r\n                     <NS4:tipoCuota>Normal</NS4:tipoCuota>\r\n                     <NS4:totalCuotas>1</NS4:totalCuotas>\r\n                     <NS4:tipoVenta>Venta Normal sin cuotas</NS4:tipoVenta>\r\n                     <NS4:numeroCuota>1</NS4:numeroCuota>\r\n                     <NS4:montoTransaccion>6471.00</NS4:montoTransaccion>\r\n                     <NS4:montoCuotas>0</NS4:montoCuotas>\r\n                     <NS4:codigoAutorizacion>902382</NS4:codigoAutorizacion>\r\n                     <NS4:numeroBoleta>0000000001</NS4:numeroBoleta>\r\n                     <NS4:fechaAbono>2019-12-27</NS4:fechaAbono>\r\n                     <NS4:montoAbono>6317</NS4:montoAbono>\r\n                     <NS4:montoOriginalVenta>6471</NS4:montoOriginalVenta>\r\n                     <NS4:montoExentoTotal>-1</NS4:montoExentoTotal>\r\n                     <NS4:montoAfecto>6471</NS4:montoAfecto>\r\n                     <NS4:comision>129</NS4:comision>\r\n                     <NS4:ivaComision>25</NS4:ivaComision>\r\n                     <NS4:comisionAdicional>0</NS4:comisionAdicional>\r\n                     <NS4:ivaComisionAdicional>0</NS4:ivaComisionAdicional>\r\n                     <NS4:datoLiquidacion>00</NS4:datoLiquidacion>\r\n                     <NS4:desfaseAbono>0</NS4:desfaseAbono>\r\n                     <NS4:lninsec>00000000000000003902382</NS4:lninsec>\r\n                     <NS4:lninsecAnterior/>\r\n                     <NS4:estado>Abonado</NS4:estado>\r\n                     <NS4:debitoPrepago>D</NS4:debitoPrepago>\r\n                     <NS4:origenTransaccion>TXA</NS4:origenTransaccion>\r\n                     <NS4:montoVuelto>0</NS4:montoVuelto>\r\n                  </NS4:transaccion>\r\n               </NS4:transaccionFinanciera>\r\n               <NS4:transaccionFinanciera>\r\n                  <NS4:transaccion>\r\n                     <NS4:codigoLocal>27403611</NS4:codigoLocal>\r\n                     <NS4:nombreLocal>COOPEUCH ALAMEDA 194 P.6</NS4:nombreLocal>\r\n                     <NS4:tipoTransaccion>V</NS4:tipoTransaccion>\r\n                     <NS4:horaTransaccion></NS4:horaTransaccion>\r\n                     <NS4:fechaTransaccion>2019-12-26</NS4:fechaTransaccion>\r\n                     <NS4:fechaProceso>2019-12-26</NS4:fechaProceso>\r\n                     <NS4:ordenPedido/>\r\n                     <NS4:idServicio/>\r\n                     <NS4:numeroTarjeta>XXX2384</NS4:numeroTarjeta>\r\n                     <NS4:moneda>CLP</NS4:moneda>\r\n                     <NS4:tipoProducto>D</NS4:tipoProducto>\r\n                     <NS4:tipoMedioPago/>\r\n                     <NS4:tipoCuota>Normal</NS4:tipoCuota>\r\n                     <NS4:totalCuotas>1</NS4:totalCuotas>\r\n                     <NS4:tipoVenta>Venta Normal sin cuotas</NS4:tipoVenta>\r\n                     <NS4:numeroCuota>1</NS4:numeroCuota>\r\n                     <NS4:montoTransaccion>6066.00</NS4:montoTransaccion>\r\n                     <NS4:montoCuotas>0</NS4:montoCuotas>\r\n                     <NS4:codigoAutorizacion>902384</NS4:codigoAutorizacion>\r\n                     <NS4:numeroBoleta>0000000001</NS4:numeroBoleta>\r\n                     <NS4:fechaAbono>2019-12-27</NS4:fechaAbono>\r\n                     <NS4:montoAbono>5922</NS4:montoAbono>\r\n                     <NS4:montoOriginalVenta>6066</NS4:montoOriginalVenta>\r\n                     <NS4:montoExentoTotal>-1</NS4:montoExentoTotal>\r\n                     <NS4:montoAfecto>6066</NS4:montoAfecto>\r\n                     <NS4:comision>121</NS4:comision>\r\n                     <NS4:ivaComision>23</NS4:ivaComision>\r\n                     <NS4:comisionAdicional>0</NS4:comisionAdicional>\r\n                     <NS4:ivaComisionAdicional>0</NS4:ivaComisionAdicional>\r\n                     <NS4:datoLiquidacion>00</NS4:datoLiquidacion>\r\n                     <NS4:desfaseAbono>0</NS4:desfaseAbono>\r\n                     <NS4:lninsec>00000000000000003902384</NS4:lninsec>\r\n                     <NS4:lninsecAnterior/>\r\n                     <NS4:estado>Abonado</NS4:estado>\r\n                     <NS4:debitoPrepago>D</NS4:debitoPrepago>\r\n                     <NS4:origenTransaccion>TXA</NS4:origenTransaccion>\r\n                     <NS4:montoVuelto>0</NS4:montoVuelto>\r\n                  </NS4:transaccion>\r\n               </NS4:transaccionFinanciera>\r\n               <NS4:transaccionFinanciera>\r\n                  <NS4:transaccion>\r\n                     <NS4:codigoLocal>27403611</NS4:codigoLocal>\r\n                     <NS4:nombreLocal>COOPEUCH ALAMEDA 194 P.6</NS4:nombreLocal>\r\n                     <NS4:tipoTransaccion>V</NS4:tipoTransaccion>\r\n                     <NS4:horaTransaccion></NS4:horaTransaccion>\r\n                     <NS4:fechaTransaccion>2019-12-26</NS4:fechaTransaccion>\r\n                     <NS4:fechaProceso>2019-12-26</NS4:fechaProceso>\r\n                     <NS4:ordenPedido/>\r\n                     <NS4:idServicio/>\r\n                     <NS4:numeroTarjeta>XXX2386</NS4:numeroTarjeta>\r\n                     <NS4:moneda>CLP</NS4:moneda>\r\n                     <NS4:tipoProducto>D</NS4:tipoProducto>\r\n                     <NS4:tipoMedioPago/>\r\n                     <NS4:tipoCuota>Normal</NS4:tipoCuota>\r\n                     <NS4:totalCuotas>1</NS4:totalCuotas>\r\n                     <NS4:tipoVenta>Venta Normal sin cuotas</NS4:tipoVenta>\r\n                     <NS4:numeroCuota>1</NS4:numeroCuota>\r\n                     <NS4:montoTransaccion>9808.00</NS4:montoTransaccion>\r\n                     <NS4:montoCuotas>0</NS4:montoCuotas>\r\n                     <NS4:codigoAutorizacion>902386</NS4:codigoAutorizacion>\r\n                     <NS4:numeroBoleta>0000000001</NS4:numeroBoleta>\r\n                     <NS4:fechaAbono>2019-12-27</NS4:fechaAbono>\r\n                     <NS4:montoAbono>9575</NS4:montoAbono>\r\n                     <NS4:montoOriginalVenta>9808</NS4:montoOriginalVenta>\r\n                     <NS4:montoExentoTotal>-1</NS4:montoExentoTotal>\r\n                     <NS4:montoAfecto>9808</NS4:montoAfecto>\r\n                     <NS4:comision>196</NS4:comision>\r\n                     <NS4:ivaComision>37</NS4:ivaComision>\r\n                     <NS4:comisionAdicional>0</NS4:comisionAdicional>\r\n                     <NS4:ivaComisionAdicional>0</NS4:ivaComisionAdicional>\r\n                     <NS4:datoLiquidacion>00</NS4:datoLiquidacion>\r\n                     <NS4:desfaseAbono>0</NS4:desfaseAbono>\r\n                     <NS4:lninsec>00000000000000003902386</NS4:lninsec>\r\n                     <NS4:lninsecAnterior/>\r\n                     <NS4:estado>Abonado</NS4:estado>\r\n                     <NS4:debitoPrepago>D</NS4:debitoPrepago>\r\n                     <NS4:origenTransaccion>TXA</NS4:origenTransaccion>\r\n                     <NS4:montoVuelto>0</NS4:montoVuelto>\r\n                  </NS4:transaccion>\r\n               </NS4:transaccionFinanciera>\r\n               <NS4:transaccionFinanciera>\r\n                  <NS4:transaccion>\r\n                     <NS4:codigoLocal>27403611</NS4:codigoLocal>\r\n                     <NS4:nombreLocal>COOPEUCH ALAMEDA 194 P.6</NS4:nombreLocal>\r\n                     <NS4:tipoTransaccion>V</NS4:tipoTransaccion>\r\n                     <NS4:horaTransaccion></NS4:horaTransaccion>\r\n                     <NS4:fechaTransaccion>2019-12-26</NS4:fechaTransaccion>\r\n                     <NS4:fechaProceso>2019-12-26</NS4:fechaProceso>\r\n                     <NS4:ordenPedido/>\r\n                     <NS4:idServicio/>\r\n                     <NS4:numeroTarjeta>XXX2388</NS4:numeroTarjeta>\r\n                     <NS4:moneda>CLP</NS4:moneda>\r\n                     <NS4:tipoProducto>D</NS4:tipoProducto>\r\n                     <NS4:tipoMedioPago/>\r\n                     <NS4:tipoCuota>Normal</NS4:tipoCuota>\r\n                     <NS4:totalCuotas>1</NS4:totalCuotas>\r\n                     <NS4:tipoVenta>Venta Normal sin cuotas</NS4:tipoVenta>\r\n                     <NS4:numeroCuota>1</NS4:numeroCuota>\r\n                     <NS4:montoTransaccion>6885.00</NS4:montoTransaccion>\r\n                     <NS4:montoCuotas>0</NS4:montoCuotas>\r\n                     <NS4:codigoAutorizacion>902388</NS4:codigoAutorizacion>\r\n                     <NS4:numeroBoleta>0000000001</NS4:numeroBoleta>\r\n                     <NS4:fechaAbono>2019-12-27</NS4:fechaAbono>\r\n                     <NS4:montoAbono>6721</NS4:montoAbono>\r\n                     <NS4:montoOriginalVenta>6885</NS4:montoOriginalVenta>\r\n                     <NS4:montoExentoTotal>-1</NS4:montoExentoTotal>\r\n                     <NS4:montoAfecto>6885</NS4:montoAfecto>\r\n                     <NS4:comision>138</NS4:comision>\r\n                     <NS4:ivaComision>26</NS4:ivaComision>\r\n                     <NS4:comisionAdicional>0</NS4:comisionAdicional>\r\n                     <NS4:ivaComisionAdicional>0</NS4:ivaComisionAdicional>\r\n                     <NS4:datoLiquidacion>00</NS4:datoLiquidacion>\r\n                     <NS4:desfaseAbono>0</NS4:desfaseAbono>\r\n                     <NS4:lninsec>00000000000000003902388</NS4:lninsec>\r\n                     <NS4:lninsecAnterior/>\r\n                     <NS4:estado>Abonado</NS4:estado>\r\n                     <NS4:debitoPrepago>P</NS4:debitoPrepago>\r\n                     <NS4:origenTransaccion>TXA</NS4:origenTransaccion>\r\n                     <NS4:montoVuelto>0</NS4:montoVuelto>\r\n                  </NS4:transaccion>\r\n               </NS4:transaccionFinanciera>\r\n            </NS4:listaTransaccionFinanciera>\r\n         </NS1:cuerpo>\r\n      </NS1:obtenerTransaccionResponse>\r\n   </soapenv:Body>\r\n</soapenv:Envelope>"
                        variable: message.body
                        content: application/xml
                    outputs:
                      response:
                        schema:
                          $ref: '#/definitions/TransaccionesRs'
                        variable: message.body
                      totalRecords:
                        schema:
                          type: integer
                        variable: totalRecords
                    actions:
                      - create: response.data
                        foreach: >-
                          input.Envelope.Body.obtenerTransaccionResponse.cuerpo.listaTransaccionFinanciera.transaccionFinanciera
                        from: >-
                          input.Envelope.Body.obtenerTransaccionResponse.cuerpo.listaTransaccionFinanciera.transaccionFinanciera
                        actions:
                          - set: fechaTransaccion
                            from: transaccion.fechaTransaccion
                          - set: numeroTarjeta
                            from: transaccion.numeroTarjeta
                          - set: tipoProducto
                            from: transaccion.tipoProducto
                          - set: tipoCuota
                            from: transaccion.tipoCuota
                          - set: totalCuotas
                            from: transaccion.totalCuotas
                          - set: montoCuotas
                            from: transaccion.montoCuotas
                          - set: codigoAutorizacion
                            from: transaccion.codigoAutorizacion
                          - set: montoAfecto
                            from: transaccion.montoAfecto
                          - set: montoExentoTotal
                            from: transaccion.montoExentoTotal
                          - set: codigoLocal
                            from: transaccion.codigoLocal
                          - set: nombreLocal
                            from: transaccion.nombreLocal
                          - set: tipoTransaccion
                            from: transaccion.tipoTransaccion
                      - set: response.meta._rsLength
                        from: >-
                          input.Envelope.Body.obtenerTransaccionResponse.cuerpo.listaTransaccionFinanciera.transaccionFinanciera
                        value: >-
                          const data =
                          $(input.Envelope.Body.obtenerTransaccionResponse.cuerpo.listaTransaccionFinanciera.transaccionFinanciera);

                          data.length
                      - set: response.meta._msgId
                        value: >-
                          apim.getvariable('client.app.id')?apim.getvariable('client.app.id'):apim.getvariable('ctx.uuid')
                      - set: response.meta._version
                        value: apim.getvariable('api.version')
                      - set: response.meta._rqDateTime
                        value: apim.getvariable('system.datetime')
                      - set: response.meta._clientId
                        value: apim.getvariable('client.org.id')
                      - set: response.meta._transactionId
                        value: >-
                          apim.getvariable('request.headers.X-Global-Transaction-ID');
                      - set: totalRecords
                        from: >-
                          input.Envelope.Body.obtenerTransaccionResponse.cuerpo.paginacion.totalRegistros
                    options:
                      mapEnablePostProcessingJSON: false
                      mapEmulateV4EmptyJSONObject: false
                      mapEmulateV4DefaultRequiredProps: false
                      mapReferenceLimit: 1
                - gatewayscript:
                    version: 2.0.0
                    title: insertLinksPagination
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtencion links de respuesta con paginación\r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-04-08\r\n * @desc:  version inicial \r\n * \r\n *****/\r\nconst apim = require('apim');\r\n\r\nconst path =  `https://${apim.getvariable('request.headers.HostAPIC')}/${apim.getvariable('api.org.name')}/${apim.getvariable('env.path')}${apim.getvariable('api.operation.path')}`;\r\nlet dateSince = apim.getvariable('request.parameters.fecha-desde');\r\nlet dateUntil = apim.getvariable('request.parameters.fecha-hasta');\r\nlet codes = apim.getvariable('request.parameters.codigos-comercio');\r\n\r\n\r\nlet messageBody = apim.getvariable(\"message.body\");\r\n\r\nconst pageSize =  apim.getvariable('request.parameters.page-size')?apim.getvariable('request.parameters.page-size'):$(defaultPageSize);\r\nconst currentPage = apim.getvariable('request.parameters.page-number');\r\nconst lastPage =  Math.round(apim.getvariable('totalRecords')/pageSize);\r\n\r\nlet pagePrev=1;\r\nlet pageNext= 2;\r\nlet codeComer;\r\n\r\nif(codes){\r\n    codeComer = `&codios-comercio=${codes}&`;\r\n}\r\n\r\nif(currentPage){\r\n    pagePrev = (currentPage-1) > 0 ? (currentPage-1) : 1 ;\r\n    pageNext = (parseInt(currentPage) + 1);\r\n}\r\n\r\nmessageBody.links = {\r\n    \"self\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:'&'}page-number=${currentPage ? currentPage:1}&page-size=${pageSize}`,\r\n    \"first\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:'&'}page-number=1&page-size=${pageSize}`,\r\n    \"prev\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:'&'}page-number=${pagePrev}&page-size=${pageSize}`,\r\n    \"next\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:'&'}page-number=${pageNext>lastPage?(pageNext-1):pageNext}&page-size=${pageSize}`,\r\n    \"last\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:'&'}page-number=${(lastPage)>= 1 ? lastPage: 1}&page-size=${pageSize}`\r\n}\r\n\r\napim.setvariable(\"message.body\", messageBody);\r\n\r\n\r\n\r\n"
            - condition: ($operationPath() = '/transacciones/online')
              execute:
                - gatewayscript:
                    version: 2.0.0
                    title: validateParameters
                    source: "/******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Validaciones iniciales de los parametros \r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-03-20\r\n * @desc:  version inicial \r\n * \r\n * @version: 2020-03-27\r\n * @desc: se cambian nombres de funciones  @author: jaimev@vc-soft.com\r\n *****/\r\n \r\n /** Constantes del JS */ \r\nconst apim = require('apim');\r\n\r\nconsole.error(\"Inicio de validate-parameter version 2020-04-02:08:45\");\r\n\r\nconst apigw = require('apigw');\r\napim.setvariable(\"ctx.uuid\", apigw.generateUUID());\r\n\r\nconst defaultErrorMsg = \"Invalid Parameter: Validation Failure\";\r\nconst defaultPageSizeMax = $(defaultPageSizeMax);\r\nconst defaultPageSize = $(defaultPageSize);\r\nconst defaultPageNumber = 1;\r\nconst valuesSalesType = [\"VENTA\",\"ANULACION\"];\r\nconst valuesPaymentMethod = [\"CREDITO\",\"DEBITO\",\"PREPAGO\"];\r\n\r\n\r\nlet dateSinceAsString = apim.getvariable('request.parameters.fecha-desde');\r\nlet dateUntilAsString = apim.getvariable('request.parameters.fecha-hasta');\r\nlet pageNumber = apim.getvariable('request.parameters.page-number');\r\nlet pageSize = apim.getvariable('request.parameters.page-size');\r\nlet codes = apim.getvariable('request.parameters.codigos-comercio');\r\nlet cardType = apim.getvariable('request.parameters.tipo-tarjeta');\r\nlet salesType = apim.getvariable('request.parameters.tipo-ventas');\r\n\r\nif(!pageNumber){\r\n    pageNumber = defaultPageNumber;\r\n}\r\n\r\nif(!pageSize){\r\n    pageSize = defaultPageSize;\r\n}   \r\n\r\nconst now = new Date(); \r\n\r\nlet errors = [];\r\n\r\naddValidation(\"fecha-desde\",\r\n              !isDateFormat(dateSinceAsString),\r\n              { \"code\": 400,\r\n                \"title\": \"Fecha Invalida\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha fecha-desde=${dateSinceAsString} tiene que describirse en formato YYYY-MM-DDTHH:mm:ss`\r\n              },true);\r\n              \r\naddValidation(\"fecha-hasta\",\r\n              !isDateFormat(dateUntilAsString),\r\n              { \"code\": 400,\r\n                \"title\": \"Fecha Invalida\",\r\n                \"source\": { \"pointer\" : \"fecha-hasta\" },\r\n                \"detail\": `La fecha fecha-hasta=${dateUntilAsString} tiene que describirse en formato YYYY-MM-DDTHH:mm:ss` \r\n              },true);\r\n\r\naddValidation(\"page-number\",\r\n              !isNumberFormat(pageNumber),\r\n              { \"code\": 400,\r\n                \"title\": \"Numero de pagina invalida\",\r\n                \"source\": { \"pointer\" : \"page-number\" },\r\n                \"detail\": `El numero page-number=${pageNumber} debe ser numerico` \r\n              });\r\naddValidation(\"page-size\",\r\n              !isNumberFormat(pageSize),\r\n              { \"code\": 400,\r\n                \"title\": \"Numero de tamaño de pagina invalida\",\r\n                \"source\": { \"pointer\" : \"page-size\" },\r\n                \"detail\": `El numero page-size=${pageSize} debe ser numerico ` \r\n              });\r\naddValidation(\"page-size\",\r\n              (pageSize>defaultPageSizeMax),\r\n              { \"code\": 400,\r\n                \"title\": \"Numero de tamaño de pagina invalida\",\r\n                \"source\": { \"pointer\" : \"page-size\" },\r\n                \"detail\": `El numero page-size=${pageSize} debe ser menor al valor maximo permitido ${defaultPageSizeMax}` \r\n              });\r\n\r\n\r\n\r\nconst dateSince = new Date(dateSinceAsString);\r\nconst dateUntil = new Date(dateUntilAsString);\r\n\r\naddValidation(\"fecha-desde\",\r\n              (now.getTime() - dateSince.getTime())<0, // no cumple que esta en el pasado\r\n              { \"code\": 422,\r\n                \"title\": \"fecha-desde deberia estar en el pasado\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha-desde ${dateSince.toISOString()} tiene que estar en el pasado ` \r\n              }); \r\naddValidation(\"fecha-hasta\",\r\n              (now.getTime() - dateUntil.getTime())<0, // no cumple que esta en el pasado\r\n              { \"code\": 422,\r\n                \"title\": \"fecha-hasta deberia estar en el pasado\",\r\n                \"source\": { \"pointer\" : \"fecha-hasta\" },\r\n                \"detail\": `La fecha-hasta ${dateUntil.toISOString()} tiene que estar en el pasado ` \r\n              });               \r\n              \r\naddValidation(\"fecha-hasta\",\r\n              (dateUntil.getTime() - dateSince.getTime())<0, // no cumple fecha hasta mayor a desde\r\n              { \"code\": 422,\r\n                \"title\": \"fecha-hasta deberia ser posterior a fecha-desde\",\r\n                \"source\": { \"pointer\" : \"fecha-desde\" },\r\n                \"detail\": `La fecha-hasta ${dateUntil.toISOString()} es menor a la fecha-desde ${dateSince.toISOString()}`\r\n              }); \r\n\r\nif(codes){\r\n     addValidation(\"codigos-comercio\",\r\n                   (validateEmptySpaces(codes)), //validar espacios\r\n                   { \"code\": 422,\r\n                     \"title\": \"codigos-comercio invalido\",\r\n                     \"source\": { \"pointer\" : \"codigos-comercio\" },\r\n                     \"detail\": `Los codigos-comercio ${codes} contiene espacios en blanco`\r\n                   }); \r\n     addValidation(\"codigos-comercio\",\r\n                   (codes.charAt(codes.length-1) === ','), //validar si termina en coma\r\n                   { \"code\": 422,\r\n                     \"title\": \"codigos-comercio invalido\",\r\n                     \"source\": { \"pointer\" : \"codigos-comercio\" },\r\n                     \"detail\": `Los codigos-comercio ${codes} no debe  terminar con coma`\r\n                   });\r\n }\r\n \r\n if(cardType){\r\n     addValidation(\"tipo-tarjeta\",\r\n              !valuesPaymentMethod.includes(cardType),\r\n              { \"code\": 400,\r\n                \"title\": \"tipo de  tarjeta invalido \",\r\n                \"source\": { \"pointer\" : \"tipo-tarjeta\" },\r\n                \"detail\": `El  tipo-tarjeta=${cardType} no corresponde a un tipo de tarjeta valido ${valuesPaymentMethod}` \r\n              });\r\n }\r\n \r\n  if(salesType){\r\n     addValidation(\"tipo-ventas\",\r\n              !valuesSalesType.includes(salesType),\r\n              { \"code\": 400,\r\n                \"title\": \"tipo de  venta invalido \",\r\n                \"source\": { \"pointer\" : \"tipo-ventas\" },\r\n                \"detail\": `El  tipo-ventas=${salesType} no corresponde a un tipo de venta valido ${valuesSalesType}` \r\n              });\r\n }\r\n\r\nif(errors.length > 0){\r\n    throwError();\r\n}\r\n\r\n/*** \r\n* Se utiliza apim.error para lanzar el error \r\n*/              \r\nfunction throwError(){\r\n    if(errors){\r\n        apim.setvariable(\"ctx.errorData\", errors);\r\n        const minStatus = errors.reduce((min, err) => err.code < min ? err.code : min, errors[0].code);\r\n        apim.error(\"ParametersException\",minStatus,defaultErrorMsg,defaultErrorMsg);\r\n    } \r\n}\r\n\r\n/***\r\n * Adiciona un error de validación a la estructura general de errores\r\n * @param field\r\n * @param isError\r\n * @param errorObj\r\n * @param isImmediate\r\n */\r\nfunction addValidation(field, isError, errorObj, isImmediate ){\r\n    console.error(\"Verificacion de validacion campo %s \", field);               \r\n    if(isError){\r\n        console.error(\"Falla de validacion identificada en %s \", field);\r\n        errors.push(errorObj);\r\n        if(isImmediate){\r\n            throwError();\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Entrega si es fecha formada con ISO 8601 2020-04-20T10:45:00\r\n * corregido milli jev  2020-01-01 2020-01-01T01:02:03\r\n * @param dateAsString \r\n */\r\nfunction isDateFormat(dateAsString){\r\n    if(!dateAsString){\r\n        return false;\r\n    }else{\r\n        var reg = /^(\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2})/;\r\n        if(!reg.test(dateAsString)){\r\n          return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * Valida que el numero ingresado sea un numero\r\n */\r\nfunction isNumberFormat(number){\r\n    \r\n    let reg = /^([1-9])/;\r\n    if(!reg.test(number)){\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\n /**\r\n  * Valida que la cadena no contenga espacios en blanco\r\n  */ \r\n function validateEmptySpaces(stringToValidate){\r\n     const reg = /^$|\\s/g;\r\n     if(reg.test(stringToValidate)){\r\n         return true;\r\n     }\r\n     return false;\r\n }\r\n"
                    description: ''
                - gatewayscript:
                    version: 2.0.0
                    title: parsing-date
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtención de fecha y hora\r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-03-27\r\n * @desc:  version inicial \r\n * \r\n *****/\r\n \r\nconst apim = require('apim');\r\n \r\nconst since = apim.getvariable('request.parameters.fecha-desde').split(\"T\");\r\nconst until = apim.getvariable('request.parameters.fecha-hasta').split(\"T\");\r\n\r\nconst dateSince = since[0].split(\"-\");\r\nconst dateUntil = until[0].split(\"-\");\r\n\r\nconst hourSince = since[1].split(\":\");\r\nconst hourUntil = until[1].split(\":\");\r\n\r\napim.setvariable('ctx.fromDate',dateSince[0]+dateSince[1]+dateSince[2],'set');\r\napim.setvariable('ctx.fromHour',hourSince[0]+hourSince[1]+hourSince[2],'set');\r\napim.setvariable('ctx.toDate',dateUntil[0]+dateUntil[1]+dateUntil[2],'set');\r\napim.setvariable('ctx.toHour',hourUntil[0]+hourUntil[1]+hourUntil[2],'set');\r\n\r\n\r\n"
                - gatewayscript:
                    version: 2.0.0
                    title: get-rut-dv
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtención de RUT de consumidor\r\n * \r\n ****************************\r\n * @author: mtorres@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-03-27\r\n * @desc:  version inicial \r\n * \r\n *****/\r\n\r\nconst apim = require('apim');\r\nlet errors = [];\r\nconst rut = apim.getvariable('client.org.name');\r\nconst reg = /^[0-9]+[-|‐]{1}[0-9kK]{1}$/;\r\nif(reg.test(rut)){\r\n    const rutDv =rut.split('-');\r\n    apim.setvariable('ctx.rutnumerodv',rutDv[0]+rutDv[1],'set');\r\n}else{\r\n  addErrors(\"422\",\"RUT invalido\",[\"El RUT no corresponde al formato de RUT\"],\"RUT\");\r\n  apim.setvariable(\"ctx.errorData\", errors);\r\n  apim.error('ParametersException', '422', 'Invalid parameters', 'Invalid parameters')\r\n}\r\nfunction addErrors (code, title, details, pointer) {\r\n  details.map(detail => {\r\n    const error = {\r\n      'code': code,\r\n      'title': title,\r\n      'source': {\r\n        'pointer': pointer\r\n      },\r\n      'detail': detail\r\n    }\r\n    errors.push(error)\r\n  })\r\n}"
                - gatewayscript:
                    version: 2.0.0
                    title: get-codcomercio
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtencion de listado de locales\r\n * \r\n ****************************\r\n * @author: mtorres@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-04-10\r\n * @desc:  version inicial \r\n * \r\n *****/\r\nconst apim = require('apim')\r\nconst codigosComercio = apim.getvariable('request.parameters.codigos-comercio')\r\nlet locals = []\r\nif (codigosComercio) {\r\n  locals = codigosComercio.split(\",\");\r\n  apim.setvariable('ctx.listLocals', locals);\r\n}else{\r\napim.setvariable('ctx.listLocals', null);\r\n}"
                - gatewayscript:
                    version: 2.0.0
                    title: get-saleType
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtención valor tipo movimiento\r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-04-13\r\n * @desc:  version inicial \r\n * \r\n *****/\r\n\r\nconst apim = require('apim');\r\n\r\nconst values = {\r\n    \"VENTA\": 'AUTHORIZATION',\r\n    \"ANULACION\": 'NULLIFY'\r\n}\r\n\r\nconst saleType = apim.getvariable('request.parameters.tipo-ventas');\r\n\r\nconst value = values[saleType];\r\n\r\nif (value) {\r\n  apim.setvariable('ctx.saleType', value);\r\n}else{\r\napim.setvariable('ctx.saleType', null);\r\n}\r\n\r\n\r\n\r\n"
                - gatewayscript:
                    version: 2.0.0
                    title: get-paymentMethod
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtención valor tipo movimiento\r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-04-13\r\n * @desc:  version inicial \r\n * \r\n *****/\r\n\r\nconst apim = require('apim');\r\n\r\n\r\nconst values = {\r\n    \"CREDITO\": 'CREDIT',\r\n    \"DEBITO\": 'DEBIT',\r\n    \"PREPAGO\":'PREPAID'\r\n}\r\n\r\nconst typeCard = apim.getvariable('request.parameters.tipo-tarjeta');\r\n\r\nconst value = values[typeCard];\r\n\r\nif (value) {\r\n  apim.setvariable('ctx.typeCard', value);\r\n}else{\r\napim.setvariable('ctx.typeCard', null);\r\n}\r\n\r\n\r\n\r\n"
                - map:
                    version: 2.0.0
                    title: requestMap-4
                    inputs:
                      fromDate:
                        schema:
                          type: string
                        variable: ctx.fromDate
                      toDate:
                        schema:
                          type: string
                        variable: ctx.toDate
                      page-number:
                        schema:
                          type: integer
                        variable: request.parameters.page-number
                      page-size:
                        schema:
                          type: integer
                        variable: request.parameters.page-size
                      tipo-tarjeta:
                        schema:
                          type: string
                        variable: ctx.typeCard
                      tipo-ventas:
                        schema:
                          type: string
                        variable: ctx.saleType
                      rutnumerodv:
                        schema:
                          type: string
                        variable: ctx.rutnumerodv
                      fromHour:
                        schema:
                          type: string
                        variable: ctx.fromHour
                      toHour:
                        schema:
                          type: string
                        variable: ctx.toHour
                      listLocals:
                        schema:
                          type: array
                        variable: ctx.listLocals
                    outputs:
                      output:
                        schema:
                          description: ''
                          type: object
                          properties:
                            rut:
                              type: string
                              name: rut
                            fromDate:
                              type: string
                              name: fromDate
                            fromHour:
                              type: string
                              name: fromHour
                            toDate:
                              type: string
                              name: toDate
                            toHour:
                              type: string
                              name: toHour
                            getCount:
                              type: boolean
                              name: getCount
                            page:
                              type: number
                              name: page
                            pageSize:
                              type: number
                              name: pageSize
                            paymentMethod:
                              type: string
                              name: paymentMethod
                            saleType:
                              type: string
                              name: saleType
                            localCodes:
                              type: array
                              items:
                                type: string
                              name: localCodes
                          example: "{\r\n    \"rut\": \"618080005\",\r\n    \"fromDate\": \"20200101\",\r\n    \"fromHour\":\"100020\",\r\n    \"toDate\": \"20200116\",\r\n    \"toHour\":\"190020\",\r\n    \"getCount\": true,\r\n    \"page\": 1,\r\n    \"pageSize\": 2,\r\n    \"paymentMethod\": \"CREDIT\",\r\n    \"saleType\": \"NULLIFY\",\r\n    \"localCodes\": [\"597012345678\",\"8238220\"]\r\n}"
                        variable: message.body
                        content: application/json
                    actions:
                      - set: output.page
                        from: page-number
                        value: '$(page-number)?$(page-number):1;'
                      - set: output.pageSize
                        from: page-size
                        value: '$(page-size)?$(page-size):$(defaultPageSize);'
                      - set: output.rut
                        from: rutnumerodv
                      - set: output.getCount
                        value: 'true'
                      - set: output.fromDate
                        from: fromDate
                      - set: output.toDate
                        from: toDate
                      - set: output.fromHour
                        from: fromHour
                      - set: output.toHour
                        from: toHour
                      - set: output.localCodes
                        from: listLocals
                      - set: output.paymentMethod
                        from: tipo-tarjeta
                      - set: output.saleType
                        from: tipo-ventas
                    options:
                      mapEnablePostProcessingJSON: false
                      mapEmulateV4EmptyJSONObject: false
                      mapEmulateV4DefaultRequiredProps: false
                      mapReferenceLimit: 1
                      includeEmptyXMLElements: false
                      inlineNamespaces: false
                - invoke:
                    title: TransaccionFinancieraSOAP
                    version: 2.0.0
                    verb: POST
                    target-url: $(target-url-online)
                    header-control:
                      type: blacklist
                      values: []
                    parameter-control:
                      type: blacklist
                      values: []
                - map:
                    version: 2.0.0
                    title: responseMap-4
                    inputs:
                      input:
                        schema:
                          description: ''
                          type: object
                          properties:
                            code:
                              type: number
                              name: code
                            description:
                              type: string
                              name: description
                            totalTransactions:
                              type: number
                              name: totalTransactions
                            transactions:
                              type: array
                              items:
                                properties:
                                  address:
                                    type: object
                                    properties:
                                      comune:
                                        type: string
                                        name: comune
                                      city:
                                        type: string
                                        name: city
                                      country:
                                        type: string
                                        name: country
                                      fullAddress:
                                        type: string
                                        name: fullAddress
                                    name: address
                                  checkingAccountNumber:
                                    type: string
                                    name: checkingAccountNumber
                                  establishment:
                                    type: object
                                    properties:
                                      rut:
                                        type: string
                                        name: rut
                                      businessName:
                                        type: string
                                        name: businessName
                                      connectionType:
                                        type: string
                                        name: connectionType
                                    name: establishment
                                  applicationVersion:
                                    type: string
                                    name: applicationVersion
                                  transactionId:
                                    type: number
                                    name: transactionId
                                  cardBrand:
                                    type: string
                                    name: cardBrand
                                  cardNumber:
                                    type: string
                                    name: cardNumber
                                  retailerId:
                                    type: string
                                    name: retailerId
                                  terminalId:
                                    type: string
                                    name: terminalId
                                  transactionYear:
                                    type: number
                                    name: transactionYear
                                  transactionMonth:
                                    type: number
                                    name: transactionMonth
                                  transactionDay:
                                    type: number
                                    name: transactionDay
                                  transactionHour:
                                    type: string
                                    name: transactionHour
                                  transactionAmount:
                                    type: number
                                    name: transactionAmount
                                  authorizationCode:
                                    type: string
                                    name: authorizationCode
                                  entryMode:
                                    type: number
                                    name: entryMode
                                  currencyCode:
                                    type: number
                                    name: currencyCode
                                  transactionSubtype:
                                    type: string
                                    name: transactionSubtype
                                  paymentMethod:
                                    type: string
                                    name: paymentMethod
                                  installmentsNumber:
                                    type: number
                                    name: installmentsNumber
                                  interestRate:
                                    type: string
                                    name: interestRate
                                  tipAmount:
                                    type: number
                                    name: tipAmount
                                  invoiceNumber:
                                    type: string
                                    name: invoiceNumber
                                  fantasyName:
                                    type: string
                                    name: fantasyName
                                  installmentType:
                                    type: string
                                    name: installmentType
                                  employeeCode:
                                    type: string
                                    name: employeeCode
                                  buyOrder:
                                    type: string
                                    name: buyOrder
                                  messageType:
                                    type: number
                                    name: messageType
                                  change:
                                    type: number
                                    name: change
                                  approvedStatus:
                                    type: string
                                    name: approvedStatus
                                  productAmount:
                                    type: number
                                    name: productAmount
                                  voucherType:
                                    type: string
                                    name: voucherType
                                  serviceId:
                                    type: string
                                    name: serviceId
                                  operationNumber:
                                    type: string
                                    name: operationNumber
                                  terminalSerialNumber:
                                    type: string
                                    name: terminalSerialNumber
                                  installmentAmount:
                                    type: number
                                    name: installmentAmount
                                  installmentNumber:
                                    type: number
                                    name: installmentNumber
                                type: object
                              name: transactions
                          example: ''
                        variable: message.body
                        content: application/json
                    outputs:
                      response:
                        schema:
                          $ref: '#/definitions/TransaccionesOnlineRs'
                        variable: message.body
                        content: application/json
                      totalRecords:
                        schema:
                          type: integer
                        variable: totalRecords
                    actions:
                      - create: response.data
                        foreach: input.transactions
                        from: input.transactions
                        actions:
                          - set: direccion.comuna
                            from: address.comune
                          - set: direccion.ciudad
                            from: address.city
                          - set: direccion.pais
                            from: address.country
                          - set: direccion.direccionCompleta
                            from: address.fullAddress
                          - set: codigoAutorizacion
                            from: checkingAccountNumber
                          - set: ordenCompra
                            from: buyOrder
                          - set: tarjeta
                            from: cardBrand
                          - set: numeroTarjeta
                            from: cardNumber
                          - set: numeroCuenta
                            from: checkingAccountNumber
                          - set: moneda
                            from: currencyCode
                          - set: numeroEmpleado
                            from: employeeCode
                          - set: nombreFantasia
                            from: fantasyName
                          - set: tipoCuotas
                            from: installmentType
                          - set: numeroCuotas
                            from: installmentsNumber
                          - set: tasaInteres
                            from: interestRate
                          - set: numeroBoleta
                            from: invoiceNumber
                          - set: tipoMensaje
                            from: messageType
                          - set: tipoMovimiento
                            from: paymentMethod
                          - set: codigoLocal
                            from: retailerId
                          - set: numeroEquipo
                            from: terminalId
                          - set: propina
                            from: tipAmount
                          - set: montoTransaccion
                            from: transactionAmount
                          - set: diaTransaccion
                            from: transactionDay
                          - set: horaTransaccion
                            from: transactionHour
                          - set: mesTransaccion
                            from: transactionMonth
                          - set: anioTransaccion
                            from: transactionYear
                          - set: vuelto
                            from: change
                          - set: tipovoucher
                            from: productAmount
                          - set: tipoTransaccion
                            from: transactionSubtype
                          - set: idServicio
                            from: serviceId
                          - set: numeroOperacion
                            from: operationNumber
                          - set: montoCuota
                            from: installmentAmount
                          - set: numeroSerieTerminal
                            from: terminalSerialNumber
                          - set: numeroCuota
                            from: installmentNumber
                      - set: response.meta._msgId
                        value: >-
                          apim.getvariable('client.app.id')?apim.getvariable('client.app.id'):apim.getvariable('ctx.uuid')
                      - set: response.meta._version
                        value: apim.getvariable('api.version')
                      - set: response.meta._rqDateTime
                        value: apim.getvariable('system.datetime')
                      - set: response.meta._clientId
                        value: apim.getvariable('client.org.id')
                      - set: response.meta._transactionId
                        value: >-
                          apim.getvariable('request.headers.X-Global-Transaction-ID');
                      - set: totalRecords
                        from: input.totalTransactions
                      - set: response.meta._rsLength
                        from: input.transactions
                        value: '$(input.transactions)?$(input.transactions).length:0;'
                    options:
                      mapEnablePostProcessingJSON: false
                      mapEmulateV4EmptyJSONObject: false
                      mapEmulateV4DefaultRequiredProps: false
                      mapReferenceLimit: 1
                - gatewayscript:
                    version: 2.0.0
                    title: insertLinksPagination
                    source: "/*******************************************************\r\n * \\ \\   / / ___/ ___| / _ \\|  ___|_   _|\r\n *  \\ \\ / | |   \\___ \\| | | | |_    | |  \r\n *   \\ V /| |___ ___) | |_| |  _|   | |  \r\n *    \\_/  \\____|____/ \\___/|_|     |_|  \r\n * Documento propiedad Intelectual de VCSOFT., Se prohíbe su reproducción, uso, aplicación total o parcial \r\n * en cualquier medio o en cualquier proyecto, sin previa autorización.\r\n *  La información contenida en este documento es confidencial y reservada, y está dirigida exclusivamente \r\n * a personal interno a la empresa definida en la carátula de este documento.\r\n *  La información contenida en este documento no puede ser divulgada, duplicada o utilizada con propósitos \r\n * distintos a los autorizados expresamente por VCSOFT\r\n * \r\n *******************************************************\r\n * \r\n * Obtencion links de respuesta con paginación\r\n * \r\n ****************************\r\n * @author: jbernal@vc-soft.com\r\n * \r\n * \r\n * @version: 2020-04-08\r\n * @desc:  version inicial \r\n * \r\n *****/\r\nconst apim = require('apim');\r\n\r\nconst path =  `https://${apim.getvariable('request.headers.HostAPIC')}/${apim.getvariable('api.org.name')}/${apim.getvariable('env.path')}${apim.getvariable('api.operation.path')}`;\r\nlet dateSince = apim.getvariable('request.parameters.fecha-desde');\r\nlet dateUntil = apim.getvariable('request.parameters.fecha-hasta');\r\nlet codes = apim.getvariable('request.parameters.codigos-comercio');\r\nconst saleType = apim.getvariable('request.parameters.tipo-ventas');\r\nconst typeCard = apim.getvariable('request.parameters.tipo-tarjeta');\r\n\r\nlet messageBody = apim.getvariable(\"message.body\");\r\n\r\nconst pageSize =  apim.getvariable('request.parameters.page-size')?apim.getvariable('request.parameters.page-size'):$(defaultPageSize);\r\nconst currentPage = apim.getvariable('request.parameters.page-number');\r\nconst lastPage = Math.round(apim.getvariable('totalRecords')/(pageSize));\r\n\r\nlet pagePrev=1;\r\nlet pageNext= 2;\r\nlet codeComer;\r\nlet valueSaleType;\r\nlet valuetypeCard;\r\n\r\nif(codes){\r\n    codeComer = `&codios-comercio=${codes}`;\r\n}\r\n\r\nif(typeCard){\r\n    valuetypeCard = `&tipo-tarjeta=${typeCard}`;\r\n}\r\n\r\n\r\nif(saleType){\r\n    valueSaleType = `&tipo-ventas=${saleType}`;\r\n}\r\n\r\n\r\nif(currentPage){\r\n    pagePrev = (currentPage-1) > 0 ? (currentPage-1) : 1 ;\r\n    pageNext = (parseInt(currentPage) + 1);\r\n}\r\n\r\nmessageBody.links = {\r\n    \"self\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:''}${valueSaleType?valueSaleType:''}${valuetypeCard?valuetypeCard:''}&page-number=${currentPage ? currentPage:1}&page-size=${pageSize}`,\r\n    \"first\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:''}${valueSaleType?valueSaleType:''}${valuetypeCard?valuetypeCard:''}&page-number=1&page-size=${pageSize}`,\r\n    \"prev\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:''}${valueSaleType?valueSaleType:''}${valuetypeCard?valuetypeCard:''}&page-number=${pagePrev}&page-size=${pageSize}`,\r\n    \"next\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:''}${valueSaleType?valueSaleType:''}${valuetypeCard?valuetypeCard:''}&page-number=${pageNext>lastPage?(pageNext-1):pageNext}&page-size=${pageSize}`,\r\n    \"last\": `${path}?fecha-desde=${dateSince}&fecha-hasta=${dateUntil}${codeComer?codeComer:''}${valueSaleType?valueSaleType:''}${valuetypeCard?valuetypeCard:''}&page-number=${(lastPage)>= 1 ? lastPage: 1}&page-size=${pageSize}`\r\n}\r\n\r\napim.setvariable(\"message.body\", messageBody);\r\n\r\n\r\n\r\n"
    catch:
      - errors:
          - ParametersException
          - ResponseException
        execute:
          - gatewayscript:
              version: 2.0.0
              title: assembleException
              source: "let apim = require('apim');\r\n\r\nconst errors = apim.getvariable('ctx.errorData');\r\n\r\nconst minStatus = errors.reduce((min, err) => err.code < min ? err.code : min, errors[0].code);\r\n\r\napim.setvariable('message.status.code',minStatus);\r\napim.setvariable('message.headers.content-type','application/json');\r\n\r\nsession.output.write({\r\n    \"meta\":    {\r\n      \"_msgId\": apim.getvariable('client.app.id')?apim.getvariable('client.app.id'):apim.getvariable('ctx.uuid'),\r\n      \"_version\": apim.getvariable('api.version'),\r\n      \"_rqDateTime\": apim.getvariable('system.datetime'),\r\n      \"_clientId\": apim.getvariable('client.org.id'),\r\n      \"_transactionId\": apim.getvariable('request.headers.X-Global-Transaction-ID'),\r\n      \"_rsLength\": errors.length\r\n   },\r\n    \"errors\": errors\r\n    \r\n});"
      - default:
          - gatewayscript:
              version: 2.0.0
              title: defaultException
              source: >
                let apim = require('apim');


                apim.setvariable('message.headers.content-type',"application/json");


                apim.setvariable('message.status.code',503);



                session.output.write({
                    "meta":{
                        "_msgId": apim.getvariable('client.app.id')?apim.getvariable('client.app.id'):apim.getvariable('ctx.uuid'),
                        "_version": apim.getvariable('api.version'),
                        "_rqDateTime": apim.getvariable('system.datetime'),
                        "_rsLength": 1,
                        "_clientId": apim.getvariable('client.org.id'),
                        "_transactionId": apim.getvariable('request.headers.X-Global-Transaction-ID')
                    },
                    "errors": [{
                        "code": 503,
                        "title": "Servicio no disponible",
                        "detail": "El servicio  no se encuentra disponible. Intente por favor más tarde."
                    }]
                });
  properties:
    target-url:
      value: >-
        https://microcks.vc-soft.com:8080/soap/TransaccionFinancieraSOAP_HTTP_Binding+Mock/0.007
      description: |-
        TransaccionFinancieraSOAP Endpoint
        http://172.30.149.30:7808/Integracion/TransaccionFinanciera
      encoded: false
    defaultDays:
      value: '30'
      description: >-
        Dias default que se utilizan para periodos de busqueda si no hay valores
        de entrada. Ejemplo 30 dias
      encoded: false
    defaultPageSizeMax:
      value: '200'
      description: Numero maximo de registros en una página
      encoded: false
    defaultPageSize:
      value: '10'
      description: Tamaño de pagina default
      encoded: false
    target-url-totales:
      value: >-
        https://microcks.vc-soft.com:8080/soap/TransaccionFinancieraSOAP_HTTP_Binding+Mock/0.007
      description: 'target-url para la operacion transacciones/totales '
      encoded: false
    target-url-online:
      value: 'https://172.31.149.61:9012/venta-en-linea-trx/transactions/'
      description: >-
        target-url operación /transacciones/online con el endpoint para esta
        operación
      encoded: false
  cors:
    enabled: true
  activity-log:
    enabled: true
    error-content: header
    success-content: activity
  application-authentication:
    certificate: false
  catalogs:
    publico:
      properties:
        target-url: 'http://172.30.149.30:7810/Integracion/WSSoapReceiver'
        target-url-totales: 'http://172.30.149.30:7808/Integracion/TransaccionFinanciera'
        target-url-online: 'https://172.31.149.61:9012/venta-en-linea-trx/transactions/'
    sandbox:
      properties:
        target-url: >-
          https://microcks.vc-soft.com:8080/soap/TransaccionFinancieraSOAP_HTTP_Binding+Mock/0.007
        defaultPageSizeMax: '200'
        defaultPageSize: '15'
        target-url-totales: >-
          https://microcks.vc-soft.com:8080/soap/TransaccionFinancieraSOAP_HTTP_Binding+Mock/0.007
        target-url-online: 'https://172.31.149.61:9012/venta-en-linea-trx/transactions/'
  targets:
    TransaccionFinancieraSOAP_HTTP_Service:
      swagger: '2.0'
      info:
        title: TransaccionFinancieraSOAP_HTTP_Service
        description: ''
        x-ibm-name: transaccionfinancierasoaphttpservice
        version: 1.0.0
      schemes:
        - https
      basePath: /TransaccionFinancieraSOAP_HTTP_Service
      produces:
        - application/xml
      consumes:
        - text/xml
      securityDefinitions:
        clientID:
          type: apiKey
          name: X-IBM-Client-Id
          in: header
          description: ''
      security:
        - clientID: []
      x-ibm-configuration:
        type: wsdl
        phase: realized
        enforced: true
        testable: true
        gateway: datapower-api-gateway
        cors:
          enabled: true
        wsdl-definition:
          wsdl: wsdl-TransaccionFinanciera.zip
          service: TransaccionFinancieraSOAP_HTTP_Service
          port: TransaccionFinancieraSOAP_HTTP_Port
          soap-version: '1.1'
        assembly:
          execute:
            - invoke:
                title: invoke
                target-url: >-
                  http://{host}:{port}/transbank/entidad/transaccionFinanciera/v1
                version: 2.0.0
        x-ibm-apiconnect-wsdl:
          package-version: 1.8.20
          options: {}
          messages:
            info: []
            warning: []
            error: []
      paths:
        /obtenerTransaccionCapturaDiferida:
          post:
            summary: Operation obtenerTransaccionCapturaDiferida
            description: ''
            operationId: obtenerTransaccionCapturaDiferida
            x-ibm-soap:
              soap-action: >-
                http://www.transbank.cl/entidad/transaccionFinanciera/v1/obtenerTransaccionCapturaDiferida
              soap-operation: >-
                {http://www.transbank.cl/entidad/transaccionFinanciera/v1}obtenerTransaccionCapturaDiferidaRequest
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerTransaccionCapturaDiferidaInput
            responses:
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerTransaccionCapturaDiferidaOutput
        /obtenerDetalleTransaccion:
          post:
            summary: Operation obtenerDetalleTransaccion
            description: ''
            operationId: obtenerDetalleTransaccion
            x-ibm-soap:
              soap-action: >-
                http://www.transbank.cl/entidad/transaccionFinanciera/v1/obtenerDetalleTransaccion
              soap-operation: >-
                {http://www.transbank.cl/entidad/transaccionFinanciera/v1}obtenerDetalleTransaccionRequest
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerDetalleTransaccionInput
            responses:
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerDetalleTransaccionOutput
        /obtenerMovimientoTransaccion:
          post:
            summary: Operation obtenerMovimientoTransaccion
            description: ''
            operationId: obtenerMovimientoTransaccion
            x-ibm-soap:
              soap-action: >-
                http://www.transbank.cl/entidad/transaccionFinanciera/v1/obtenerMovimientoTransaccion
              soap-operation: >-
                {http://www.transbank.cl/entidad/transaccionFinanciera/v1}obtenerMovimientoTransaccionRequest
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerMovimientoTransaccionInput
            responses:
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerMovimientoTransaccionOutput
        /obtenerResumenTransaccion:
          post:
            summary: Operation obtenerResumenTransaccion
            description: ''
            operationId: obtenerResumenTransaccion
            x-ibm-soap:
              soap-action: >-
                http://www.transbank.cl/entidad/transaccionFinanciera/v1/obtenerResumenTransaccion
              soap-operation: >-
                {http://www.transbank.cl/entidad/transaccionFinanciera/v1}obtenerResumenTransaccionRequest
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerResumenTransaccionInput
            responses:
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerResumenTransaccionOutput
        /obtenerTransaccion:
          post:
            summary: Operation obtenerTransaccion
            description: ''
            operationId: obtenerTransaccion
            x-ibm-soap:
              soap-action: >-
                http://www.transbank.cl/entidad/transaccionFinanciera/v1/obtenerTransaccion
              soap-operation: >-
                {http://www.transbank.cl/entidad/transaccionFinanciera/v1}obtenerTransaccionRequest
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerTransaccionInput
            responses:
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerTransaccionOutput
        /obtenerCantidadTransacciones:
          post:
            summary: Operation obtenerCantidadTransacciones
            description: ''
            operationId: obtenerCantidadTransacciones
            x-ibm-soap:
              soap-action: >-
                http://www.transbank.cl/entidad/transaccionFinanciera/v1/obtenerCantidadTransacciones
              soap-operation: >-
                {http://www.transbank.cl/entidad/transaccionFinanciera/v1}obtenerCantidadTransaccionesRequest
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerCantidadTransaccionesInput
            responses:
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerCantidadTransaccionesOutput
      definitions:
        Security:
          xml:
            namespace: >-
              http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd
            prefix: wsse
          description: Header for WS-Security
          type: object
          properties:
            UsernameToken:
              xml:
                namespace: >-
                  http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd
                prefix: wsse
              type: object
              properties:
                Username:
                  xml:
                    namespace: >-
                      http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd
                    prefix: wsse
                  type: string
                Password:
                  xml:
                    namespace: >-
                      http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd
                    prefix: wsse
                  type: string
                Nonce:
                  xml:
                    namespace: >-
                      http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd
                    prefix: wsse
                  type: string
                  properties:
                    EncodingType:
                      xml:
                        namespace: ''
                        attribute: true
                      type: string
                Created:
                  xml:
                    namespace: >-
                      http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd
                    prefix: wsu
                  type: string
            Timestamp:
              xml:
                namespace: >-
                  http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd
                prefix: wsu
              type: object
              properties:
                Created:
                  xml:
                    namespace: >-
                      http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd
                    prefix: wsu
                  type: string
                Expires:
                  xml:
                    namespace: >-
                      http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd
                    prefix: wsu
                  type: string
                Id:
                  xml:
                    namespace: >-
                      http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd
                    prefix: wsu
                    attribute: true
                  type: string
        obtenerTransaccionCapturaDiferidaInput:
          description: >-
            Input message for wsdl operation
            obtenerTransaccionCapturaDiferidaRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerTransaccionCapturaDiferidaHeader
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerTransaccionCapturaDiferidaRequest:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerTransaccionCapturaDiferidaRequest_element_tns
                  required:
                    - obtenerTransaccionCapturaDiferidaRequest
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerTransaccionCapturaDiferidaRequest
            wsdl-message-direction-or-name: obtenerTransaccionCapturaDiferidaRequestRequest
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Header>
              <!-- The Security element should be removed if WS-Security is not enabled on the SOAP target-url -->
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
               <wsse:UsernameToken>
                <wsse:Username>string</wsse:Username>
                <wsse:Password>string</wsse:Password>
                <wsse:Nonce EncodingType="string">string</wsse:Nonce>
                <wsu:Created>string</wsu:Created>
               </wsse:UsernameToken>
               <wsu:Timestamp wsu:Id="string">
                <wsu:Created>string</wsu:Created>
                <wsu:Expires>string</wsu:Expires>
               </wsu:Timestamp>
              </wsse:Security>
             </soapenv:Header>
             <soapenv:Body>
              <tns:obtenerTransaccionCapturaDiferidaRequest xmlns:dic="http://www.transbank.cl/Diccionario" xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1"><!-- mandatory -->
               <enc:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </enc:encabezado>
               <tns:cuerpo><!-- mandatory -->
                <dic:paginacion>
                 <dic:registroInicial>3</dic:registroInicial>
                 <dic:registroPorPagina>3</dic:registroPorPagina>
                 <dic:totalRegistros>3</dic:totalRegistros>
                </dic:paginacion>
                <tns:rutEmpresa>string</tns:rutEmpresa>
                <tns:fechaDesde>2016-04-18</tns:fechaDesde>
                <tns:fechaHasta>2016-04-18</tns:fechaHasta>
                <tns:tarjeta>string</tns:tarjeta>
                <tns:ordenPedido>string</tns:ordenPedido>
                <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
                <tns:monto>3</tns:monto>
                <tns:listaLocales>
                 <tns:local><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:codigoLocal>string</tns:codigoLocal>
                 </tns:local>
                </tns:listaLocales>
                <dic:ordenamiento>
                 <dic:ordenColumna>string</dic:ordenColumna>
                 <dic:tipoOrden>string</dic:tipoOrden>
                </dic:ordenamiento>
               </tns:cuerpo>
              </tns:obtenerTransaccionCapturaDiferidaRequest>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerTransaccionCapturaDiferidaHeader:
          description: >-
            Input headers for wsdl operation
            obtenerTransaccionCapturaDiferidaRequest
          type: object
          properties:
            Security:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/Security
        obtenerTransaccionCapturaDiferidaOutput:
          description: >-
            Output message for wsdl operation
            obtenerTransaccionCapturaDiferidaRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerTransaccionCapturaDiferidaResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerTransaccionCapturaDiferidaResponse_element_tns
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerTransaccionCapturaDiferidaRequest
            wsdl-message-direction-or-name: obtenerTransaccionCapturaDiferidaRequestResponse
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Body>
              <tns:obtenerTransaccionCapturaDiferidaResponse xmlns:dic="http://www.transbank.cl/Diccionario" xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
               <enc:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </enc:encabezado>
               <tns:cuerpo>
                <dic:estadoRespuestaDetalle><!-- mandatory -->
                 <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                  <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                  <dic:sistema>string</dic:sistema>
                 </dic:estado>
                </dic:estadoRespuestaDetalle>
                <dic:paginacion>
                 <dic:registroInicial>3</dic:registroInicial>
                 <dic:registroPorPagina>3</dic:registroPorPagina>
                 <dic:totalRegistros>3</dic:totalRegistros>
                </dic:paginacion>
                <tns:listaCapturasDiferidas>
                 <tns:capturasDiferidas><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:codigoComercio>string</tns:codigoComercio>
                  <tns:moneda>string</tns:moneda>
                  <tns:fechaCaptura>2016-04-18</tns:fechaCaptura>
                  <tns:fechaAutorizacion>2016-04-18</tns:fechaAutorizacion>
                  <tns:tarjeta>string</tns:tarjeta>
                  <tns:numeroPedido>string</tns:numeroPedido>
                  <tns:tarjetaPedido>string</tns:tarjetaPedido>
                  <tns:montoAutorizacion>3</tns:montoAutorizacion>
                  <tns:tipoVenta>string</tns:tipoVenta>
                  <tns:numeroCuotas>3</tns:numeroCuotas>
                  <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
                  <tns:montoVenta>3</tns:montoVenta>
                  <tns:vci>3</tns:vci>
                 </tns:capturasDiferidas>
                </tns:listaCapturasDiferidas>
               </tns:cuerpo>
              </tns:obtenerTransaccionCapturaDiferidaResponse>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerDetalleTransaccionInput:
          description: Input message for wsdl operation obtenerDetalleTransaccionRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerDetalleTransaccionHeader
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerDetalleTransaccionRequest:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerDetalleTransaccionRequest_element_tns
                  required:
                    - obtenerDetalleTransaccionRequest
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerDetalleTransaccionRequest
            wsdl-message-direction-or-name: obtenerDetalleTransaccionRequestRequest
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Header>
              <!-- The Security element should be removed if WS-Security is not enabled on the SOAP target-url -->
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
               <wsse:UsernameToken>
                <wsse:Username>string</wsse:Username>
                <wsse:Password>string</wsse:Password>
                <wsse:Nonce EncodingType="string">string</wsse:Nonce>
                <wsu:Created>string</wsu:Created>
               </wsse:UsernameToken>
               <wsu:Timestamp wsu:Id="string">
                <wsu:Created>string</wsu:Created>
                <wsu:Expires>string</wsu:Expires>
               </wsu:Timestamp>
              </wsse:Security>
             </soapenv:Header>
             <soapenv:Body>
              <tns:obtenerDetalleTransaccionRequest xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1"><!-- mandatory -->
               <enc:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </enc:encabezado>
               <tns:cuerpo><!-- mandatory -->
                <tns:lninsec>string</tns:lninsec>
                <tns:fecha>2016-04-18</tns:fecha>
                <tns:codigoLocal>string</tns:codigoLocal>
                <tns:tipoTransaccion>string</tns:tipoTransaccion>
                <tns:verTarjeta>true</tns:verTarjeta>
               </tns:cuerpo>
              </tns:obtenerDetalleTransaccionRequest>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerDetalleTransaccionHeader:
          description: Input headers for wsdl operation obtenerDetalleTransaccionRequest
          type: object
          properties:
            Security:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/Security
        obtenerDetalleTransaccionOutput:
          description: Output message for wsdl operation obtenerDetalleTransaccionRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerDetalleTransaccionResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerDetalleTransaccionResponse_element_tns
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerDetalleTransaccionRequest
            wsdl-message-direction-or-name: obtenerDetalleTransaccionRequestResponse
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Body>
              <tns:obtenerDetalleTransaccionResponse xmlns:dic="http://www.transbank.cl/Diccionario" xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
               <enc:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </enc:encabezado>
               <tns:cuerpo><!-- mandatory -->
                <dic:estadoRespuestaDetalle><!-- mandatory -->
                 <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                  <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                  <dic:sistema>string</dic:sistema>
                 </dic:estado>
                </dic:estadoRespuestaDetalle>
                <tns:transaccionFinanciera>
                 <tns:transaccionFinanciera><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:motivo>string</tns:motivo>
                  <tns:transaccion>
                   <tns:codigoLocal>string</tns:codigoLocal>
                   <tns:nombreLocal>string</tns:nombreLocal>
                   <tns:tipoTransaccion>string</tns:tipoTransaccion>
                   <tns:horaTransaccion>string</tns:horaTransaccion>
                   <tns:fechaTransaccion>2016-04-18</tns:fechaTransaccion>
                   <tns:fechaProceso>2016-04-18</tns:fechaProceso>
                   <tns:fechaContable>2016-04-18</tns:fechaContable>
                   <tns:ordenPedido>string</tns:ordenPedido>
                   <tns:numeroPedido>string</tns:numeroPedido>
                   <tns:tarjetaPedido>string</tns:tarjetaPedido>
                   <tns:numeroOperacion>3</tns:numeroOperacion>
                   <tns:idServicio>string</tns:idServicio>
                   <tns:numeroTarjeta>string</tns:numeroTarjeta>
                   <tns:moneda>string</tns:moneda>
                   <tns:bancoEmisor>string</tns:bancoEmisor>
                   <tns:tipoProducto>string</tns:tipoProducto>
                   <tns:tipoMedioPago>string</tns:tipoMedioPago>
                   <tns:tipoVenta>string</tns:tipoVenta>
                   <tns:tipoCuota>string</tns:tipoCuota>
                   <tns:numeroCuota>3</tns:numeroCuota>
                   <tns:totalCuotas>3</tns:totalCuotas>
                   <tns:montoTransaccion>3</tns:montoTransaccion>
                   <tns:montoCuotas>3</tns:montoCuotas>
                   <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
                   <tns:montoAutorizacion>3</tns:montoAutorizacion>
                   <tns:fechaAutorizacion>2016-04-18</tns:fechaAutorizacion>
                   <tns:numeroBoleta>string</tns:numeroBoleta>
                   <tns:fechaAbono>2016-04-18</tns:fechaAbono>
                   <tns:montoAbono>3</tns:montoAbono>
                   <tns:montoOriginalVenta>3</tns:montoOriginalVenta>
                   <tns:montoAfecto>3</tns:montoAfecto>
                   <tns:montoExentoTotal>3</tns:montoExentoTotal>
                   <tns:comision>3</tns:comision>
                   <tns:ivaComision>3</tns:ivaComision>
                   <tns:comisionAdicional>3</tns:comisionAdicional>
                   <tns:ivaComisionAdicional>3</tns:ivaComisionAdicional>
                   <tns:tasaDescuento>3</tns:tasaDescuento>
                   <tns:montoDescuento>3</tns:montoDescuento>
                   <tns:montoRetencion>3</tns:montoRetencion>
                   <tns:montoAnulacion>3</tns:montoAnulacion>
                   <tns:fechaAnulacion>2016-04-18</tns:fechaAnulacion>
                   <tns:tarifaAdicional>3</tns:tarifaAdicional>
                   <tns:desfaseAbono>string</tns:desfaseAbono>
                   <tns:fechaPrimerAbono>2016-04-18</tns:fechaPrimerAbono>
                   <tns:lninsec>string</tns:lninsec>
                   <tns:lninsecAnterior>string</tns:lninsecAnterior>
                   <tns:estado>string</tns:estado>
                   <tns:folio>string</tns:folio>
                   <tns:terminal>string</tns:terminal>
                   <tns:esAnuladaDia>string</tns:esAnuladaDia>
                   <!-- Number of properties exceeds 50, truncated example -->
                  </tns:transaccion>
                  <tns:totalAnulaciones>3</tns:totalAnulaciones>
                  <tns:totalVentas>3</tns:totalVentas>
                 </tns:transaccionFinanciera>
                </tns:transaccionFinanciera>
               </tns:cuerpo>
              </tns:obtenerDetalleTransaccionResponse>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerMovimientoTransaccionInput:
          description: Input message for wsdl operation obtenerMovimientoTransaccionRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerMovimientoTransaccionHeader
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerMovimientoTransaccionRequest:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerMovimientoTransaccionRequest_element_tns
                  required:
                    - obtenerMovimientoTransaccionRequest
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerMovimientoTransaccionRequest
            wsdl-message-direction-or-name: obtenerMovimientoTransaccionRequestRequest
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Header>
              <!-- The Security element should be removed if WS-Security is not enabled on the SOAP target-url -->
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
               <wsse:UsernameToken>
                <wsse:Username>string</wsse:Username>
                <wsse:Password>string</wsse:Password>
                <wsse:Nonce EncodingType="string">string</wsse:Nonce>
                <wsu:Created>string</wsu:Created>
               </wsse:UsernameToken>
               <wsu:Timestamp wsu:Id="string">
                <wsu:Created>string</wsu:Created>
                <wsu:Expires>string</wsu:Expires>
               </wsu:Timestamp>
              </wsse:Security>
             </soapenv:Header>
             <soapenv:Body>
              <tns:obtenerMovimientoTransaccionRequest xmlns:dic="http://www.transbank.cl/Diccionario" xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1"><!-- mandatory -->
               <enc:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </enc:encabezado>
               <tns:cuerpo><!-- mandatory -->
                <dic:paginacion>
                 <dic:registroInicial>3</dic:registroInicial>
                 <dic:registroPorPagina>3</dic:registroPorPagina>
                 <dic:totalRegistros>3</dic:totalRegistros>
                </dic:paginacion>
                <dic:ordenamiento>
                 <dic:ordenColumna>string</dic:ordenColumna>
                 <dic:tipoOrden>string</dic:tipoOrden>
                </dic:ordenamiento>
                <tns:rut>
                 <dic:rut><!-- mandatory -->3</dic:rut>
                 <dic:dv><!-- mandatory -->string</dic:dv>
                </tns:rut>
                <tns:fecha>2016-04-18</tns:fecha>
                <tns:listaLocales>
                 <tns:local><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:codigoLocal>string</tns:codigoLocal>
                 </tns:local>
                </tns:listaLocales>
                <tns:cuenta>
                 <tns:numeroCuenta>string</tns:numeroCuenta>
                 <tns:codigoBanco>string</tns:codigoBanco>
                 <tns:codigoMoneda>string</tns:codigoMoneda>
                </tns:cuenta>
                <tns:tipoProducto>string</tns:tipoProducto>
                <tns:verTarjeta>true</tns:verTarjeta>
                <tns:lninsec>string</tns:lninsec>
                <tns:monedas>string</tns:monedas>
                <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
               </tns:cuerpo>
              </tns:obtenerMovimientoTransaccionRequest>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerMovimientoTransaccionHeader:
          description: Input headers for wsdl operation obtenerMovimientoTransaccionRequest
          type: object
          properties:
            Security:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/Security
        obtenerMovimientoTransaccionOutput:
          description: >-
            Output message for wsdl operation
            obtenerMovimientoTransaccionRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerMovimientoTransaccionResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerMovimientoTransaccionResponse_element_tns
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerMovimientoTransaccionRequest
            wsdl-message-direction-or-name: obtenerMovimientoTransaccionRequestResponse
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Body>
              <tns:obtenerMovimientoTransaccionResponse xmlns:dic="http://www.transbank.cl/Diccionario" xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
               <enc:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </enc:encabezado>
               <tns:cuerpo><!-- mandatory -->
                <dic:estadoRespuestaDetalle><!-- mandatory -->
                 <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                  <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                  <dic:sistema>string</dic:sistema>
                 </dic:estado>
                </dic:estadoRespuestaDetalle>
                <dic:paginacion>
                 <dic:registroInicial>3</dic:registroInicial>
                 <dic:registroPorPagina>3</dic:registroPorPagina>
                 <dic:totalRegistros>3</dic:totalRegistros>
                </dic:paginacion>
                <tns:listaMovimientos>
                 <tns:movimiento><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:codigoComercio>string</tns:codigoComercio>
                  <tns:identificadorLocal>string</tns:identificadorLocal>
                  <tns:tipoMovimiento>string</tns:tipoMovimiento>
                  <tns:tipoTarjeta>string</tns:tipoTarjeta>
                  <tns:identificador>string</tns:identificador>
                  <tns:idServicio>string</tns:idServicio>
                  <tns:bancoEmisor>string</tns:bancoEmisor>
                  <tns:moneda>string</tns:moneda>
                  <tns:tipoProducto>string</tns:tipoProducto>
                  <tns:tipoCuota>string</tns:tipoCuota>
                  <tns:numeroCuota>3</tns:numeroCuota>
                  <tns:totalCuotas>3</tns:totalCuotas>
                  <tns:montoCuota>3</tns:montoCuota>
                  <tns:montoOriginalVenta>3</tns:montoOriginalVenta>
                  <tns:fechaVenta>2016-04-18</tns:fechaVenta>
                  <tns:horaVenta>string</tns:horaVenta>
                  <tns:numeroBoleta>string</tns:numeroBoleta>
                  <tns:montoAbono>3</tns:montoAbono>
                  <tns:montoAfecto>3</tns:montoAfecto>
                  <tns:fechaAbono>2016-04-18</tns:fechaAbono>
                  <tns:montoExento>3</tns:montoExento>
                  <tns:comision>3</tns:comision>
                  <tns:ivaComision>3</tns:ivaComision>
                  <tns:comisionAdicional>3</tns:comisionAdicional>
                  <tns:ivaComisionAdicional>3</tns:ivaComisionAdicional>
                  <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
                  <tns:lninsec>string</tns:lninsec>
                  <tns:lninsecAnterior>string</tns:lninsecAnterior>
                  <tns:esAnulacionDia>string</tns:esAnulacionDia>
                  <tns:fechaAnulacion>2016-04-18</tns:fechaAnulacion>
                  <tns:numeroOrdenPedido>string</tns:numeroOrdenPedido>
                  <tns:datoLiquidacion>string</tns:datoLiquidacion>
                  <tns:codigoRetencion>string</tns:codigoRetencion>
                  <tns:tasaDescuento>string</tns:tasaDescuento>
                  <tns:montoDescuento>3</tns:montoDescuento>
                  <tns:desfase>string</tns:desfase>
                  <tns:estado>string</tns:estado>
                  <tns:fechaProceso>2016-04-18</tns:fechaProceso>
                  <tns:montoTransaccion>string</tns:montoTransaccion>
                  <tns:totalAbonoPesos>3</tns:totalAbonoPesos>
                  <tns:totalAbonoDolares>3</tns:totalAbonoDolares>
                  <tns:debitoPrepago>string</tns:debitoPrepago>
                 </tns:movimiento>
                </tns:listaMovimientos>
               </tns:cuerpo>
              </tns:obtenerMovimientoTransaccionResponse>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerResumenTransaccionInput:
          description: Input message for wsdl operation obtenerResumenTransaccionRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerResumenTransaccionHeader
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerResumenTransaccionRequest:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerResumenTransaccionRequest_element_tns
                  required:
                    - obtenerResumenTransaccionRequest
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerResumenTransaccionRequest
            wsdl-message-direction-or-name: obtenerResumenTransaccionRequestRequest
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Header>
              <!-- The Security element should be removed if WS-Security is not enabled on the SOAP target-url -->
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
               <wsse:UsernameToken>
                <wsse:Username>string</wsse:Username>
                <wsse:Password>string</wsse:Password>
                <wsse:Nonce EncodingType="string">string</wsse:Nonce>
                <wsu:Created>string</wsu:Created>
               </wsse:UsernameToken>
               <wsu:Timestamp wsu:Id="string">
                <wsu:Created>string</wsu:Created>
                <wsu:Expires>string</wsu:Expires>
               </wsu:Timestamp>
              </wsse:Security>
             </soapenv:Header>
             <soapenv:Body>
              <tns:obtenerResumenTransaccionRequest xmlns:dic="http://www.transbank.cl/Diccionario" xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1"><!-- mandatory -->
               <enc:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </enc:encabezado>
               <tns:cuerpo><!-- mandatory -->
                <tns:rut><!-- mandatory -->
                 <dic:rut><!-- mandatory -->3</dic:rut>
                 <dic:dv><!-- mandatory -->string</dic:dv>
                </tns:rut>
                <tns:tipoTransaccion>string</tns:tipoTransaccion>
                <tns:fechaInicio>2016-04-18</tns:fechaInicio>
                <tns:fechaFin>2016-04-18</tns:fechaFin>
                <tns:listaLocales>
                 <tns:local><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:codigoLocal>string</tns:codigoLocal>
                 </tns:local>
                </tns:listaLocales>
               </tns:cuerpo>
              </tns:obtenerResumenTransaccionRequest>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerResumenTransaccionHeader:
          description: Input headers for wsdl operation obtenerResumenTransaccionRequest
          type: object
          properties:
            Security:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/Security
        obtenerResumenTransaccionOutput:
          description: Output message for wsdl operation obtenerResumenTransaccionRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerResumenTransaccionResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerResumenTransaccionResponse_element_tns
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerResumenTransaccionRequest
            wsdl-message-direction-or-name: obtenerResumenTransaccionRequestResponse
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Body>
              <tns:obtenerResumenTransaccionResponse xmlns:dic="http://www.transbank.cl/Diccionario" xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
               <enc:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </enc:encabezado>
               <tns:cuerpo><!-- mandatory -->
                <dic:estadoRespuestaDetalle><!-- mandatory -->
                 <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                  <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                  <dic:sistema>string</dic:sistema>
                 </dic:estado>
                </dic:estadoRespuestaDetalle>
                <tns:listaTransaccion><!-- between zero and unlimited repetitions of this element -->
                 <tns:transaccion><!-- between zero and unlimited repetitions of this element -->
                  <tns:fechaVenta>string</tns:fechaVenta>
                  <tns:transaccionPesos>3</tns:transaccionPesos>
                  <tns:transaccionPesosCredito>3</tns:transaccionPesosCredito>
                  <tns:transaccionPesosDebito>3</tns:transaccionPesosDebito>
                  <tns:transaccionDolar>3</tns:transaccionDolar>
                  <tns:transaccionDolarCredito>3</tns:transaccionDolarCredito>
                  <tns:transaccionDolarDebito>3</tns:transaccionDolarDebito>
                  <tns:transaccionPesosPrepago>3</tns:transaccionPesosPrepago>
                  <tns:transaccionDolarPrepago>3</tns:transaccionDolarPrepago>
                 </tns:transaccion>
                </tns:listaTransaccion>
               </tns:cuerpo>
              </tns:obtenerResumenTransaccionResponse>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerTransaccionInput:
          description: Input message for wsdl operation obtenerTransaccionRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerTransaccionHeader
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerTransaccionRequest:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerTransaccionRequest_element_tns
                  required:
                    - obtenerTransaccionRequest
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerTransaccionRequest
            wsdl-message-direction-or-name: obtenerTransaccionRequestRequest
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Header>
              <!-- The Security element should be removed if WS-Security is not enabled on the SOAP target-url -->
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
               <wsse:UsernameToken>
                <wsse:Username>string</wsse:Username>
                <wsse:Password>string</wsse:Password>
                <wsse:Nonce EncodingType="string">string</wsse:Nonce>
                <wsu:Created>string</wsu:Created>
               </wsse:UsernameToken>
               <wsu:Timestamp wsu:Id="string">
                <wsu:Created>string</wsu:Created>
                <wsu:Expires>string</wsu:Expires>
               </wsu:Timestamp>
              </wsse:Security>
             </soapenv:Header>
             <soapenv:Body>
              <tns:obtenerTransaccionRequest xmlns:dic="http://www.transbank.cl/Diccionario" xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1"><!-- mandatory -->
               <enc:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </enc:encabezado>
               <tns:cuerpo><!-- mandatory -->
                <dic:paginacion>
                 <dic:registroInicial>3</dic:registroInicial>
                 <dic:registroPorPagina>3</dic:registroPorPagina>
                 <dic:totalRegistros>3</dic:totalRegistros>
                </dic:paginacion>
                <dic:ordenamiento>
                 <dic:ordenColumna>string</dic:ordenColumna>
                 <dic:tipoOrden>string</dic:tipoOrden>
                </dic:ordenamiento>
                <tns:rut><!-- mandatory -->
                 <dic:rut><!-- mandatory -->3</dic:rut>
                 <dic:dv><!-- mandatory -->string</dic:dv>
                </tns:rut>
                <tns:fechaAbono>2016-04-18</tns:fechaAbono>
                <tns:fechaTransaccionInicio>2016-04-18</tns:fechaTransaccionInicio>
                <tns:fechaTransaccionFin>2016-04-18</tns:fechaTransaccionFin>
                <tns:listaLocales><!-- mandatory -->
                 <tns:local><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:codigoLocal>string</tns:codigoLocal>
                 </tns:local>
                </tns:listaLocales>
                <tns:listaCuentas>
                 <tns:cuentas><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:numeroCuenta>string</tns:numeroCuenta>
                  <tns:codigoBanco>string</tns:codigoBanco>
                  <tns:codigoMoneda>string</tns:codigoMoneda>
                 </tns:cuentas>
                </tns:listaCuentas>
                <tns:listaProductos>
                 <tns:producto><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:codigoProducto>string</tns:codigoProducto>
                 </tns:producto>
                </tns:listaProductos>
                <tns:tipoTransaccion>string</tns:tipoTransaccion>
                <tns:tipoCuota>string</tns:tipoCuota>
                <tns:listaMonedas>
                 <tns:moneda><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:codigoMoneda>string</tns:codigoMoneda>
                 </tns:moneda>
                </tns:listaMonedas>
                <tns:operadorMonto>string</tns:operadorMonto>
                <tns:monto>3</tns:monto>
                <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
                <tns:verTarjeta><!-- mandatory -->true</tns:verTarjeta>
                <tns:numeroTarjeta>string</tns:numeroTarjeta>
                <tns:ordenPedido>string</tns:ordenPedido>
               </tns:cuerpo>
              </tns:obtenerTransaccionRequest>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerTransaccionHeader:
          description: Input headers for wsdl operation obtenerTransaccionRequest
          type: object
          properties:
            Security:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/Security
        obtenerTransaccionOutput:
          description: Output message for wsdl operation obtenerTransaccionRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerTransaccionResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerTransaccionResponse_element_tns
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerTransaccionRequest
            wsdl-message-direction-or-name: obtenerTransaccionRequestResponse
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Body>
              <tns:obtenerTransaccionResponse xmlns:dic="http://www.transbank.cl/Diccionario" xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
               <enc:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </enc:encabezado>
               <tns:cuerpo><!-- mandatory -->
                <dic:estadoRespuestaDetalle><!-- mandatory -->
                 <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                  <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                  <dic:sistema>string</dic:sistema>
                 </dic:estado>
                </dic:estadoRespuestaDetalle>
                <dic:paginacion>
                 <dic:registroInicial>3</dic:registroInicial>
                 <dic:registroPorPagina>3</dic:registroPorPagina>
                 <dic:totalRegistros>3</dic:totalRegistros>
                </dic:paginacion>
                <tns:listaTransaccionFinanciera>
                 <tns:transaccionFinanciera><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:motivo>string</tns:motivo>
                  <tns:transaccion>
                   <tns:codigoLocal>string</tns:codigoLocal>
                   <tns:nombreLocal>string</tns:nombreLocal>
                   <tns:tipoTransaccion>string</tns:tipoTransaccion>
                   <tns:horaTransaccion>string</tns:horaTransaccion>
                   <tns:fechaTransaccion>2016-04-18</tns:fechaTransaccion>
                   <tns:fechaProceso>2016-04-18</tns:fechaProceso>
                   <tns:fechaContable>2016-04-18</tns:fechaContable>
                   <tns:ordenPedido>string</tns:ordenPedido>
                   <tns:numeroPedido>string</tns:numeroPedido>
                   <tns:tarjetaPedido>string</tns:tarjetaPedido>
                   <tns:numeroOperacion>3</tns:numeroOperacion>
                   <tns:idServicio>string</tns:idServicio>
                   <tns:numeroTarjeta>string</tns:numeroTarjeta>
                   <tns:moneda>string</tns:moneda>
                   <tns:bancoEmisor>string</tns:bancoEmisor>
                   <tns:tipoProducto>string</tns:tipoProducto>
                   <tns:tipoMedioPago>string</tns:tipoMedioPago>
                   <tns:tipoVenta>string</tns:tipoVenta>
                   <tns:tipoCuota>string</tns:tipoCuota>
                   <tns:numeroCuota>3</tns:numeroCuota>
                   <tns:totalCuotas>3</tns:totalCuotas>
                   <tns:montoTransaccion>3</tns:montoTransaccion>
                   <tns:montoCuotas>3</tns:montoCuotas>
                   <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
                   <tns:montoAutorizacion>3</tns:montoAutorizacion>
                   <tns:fechaAutorizacion>2016-04-18</tns:fechaAutorizacion>
                   <tns:numeroBoleta>string</tns:numeroBoleta>
                   <tns:fechaAbono>2016-04-18</tns:fechaAbono>
                   <tns:montoAbono>3</tns:montoAbono>
                   <tns:montoOriginalVenta>3</tns:montoOriginalVenta>
                   <tns:montoAfecto>3</tns:montoAfecto>
                   <tns:montoExentoTotal>3</tns:montoExentoTotal>
                   <tns:comision>3</tns:comision>
                   <tns:ivaComision>3</tns:ivaComision>
                   <tns:comisionAdicional>3</tns:comisionAdicional>
                   <tns:ivaComisionAdicional>3</tns:ivaComisionAdicional>
                   <tns:tasaDescuento>3</tns:tasaDescuento>
                   <tns:montoDescuento>3</tns:montoDescuento>
                   <tns:montoRetencion>3</tns:montoRetencion>
                   <tns:montoAnulacion>3</tns:montoAnulacion>
                   <tns:fechaAnulacion>2016-04-18</tns:fechaAnulacion>
                   <tns:tarifaAdicional>3</tns:tarifaAdicional>
                   <tns:desfaseAbono>string</tns:desfaseAbono>
                   <tns:fechaPrimerAbono>2016-04-18</tns:fechaPrimerAbono>
                   <tns:lninsec>string</tns:lninsec>
                   <tns:lninsecAnterior>string</tns:lninsecAnterior>
                   <tns:estado>string</tns:estado>
                   <tns:folio>string</tns:folio>
                   <tns:terminal>string</tns:terminal>
                   <tns:esAnuladaDia>string</tns:esAnuladaDia>
                   <!-- Number of properties exceeds 50, truncated example -->
                  </tns:transaccion>
                  <tns:totalAnulaciones>3</tns:totalAnulaciones>
                  <tns:totalVentas>3</tns:totalVentas>
                 </tns:transaccionFinanciera>
                </tns:listaTransaccionFinanciera>
               </tns:cuerpo>
              </tns:obtenerTransaccionResponse>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerCantidadTransaccionesInput:
          description: Input message for wsdl operation obtenerCantidadTransaccionesRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerCantidadTransaccionesHeader
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerCantidadTransaccionesRequest:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerCantidadTransaccionesRequest_element_tns
                  required:
                    - obtenerCantidadTransaccionesRequest
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerCantidadTransaccionesRequest
            wsdl-message-direction-or-name: obtenerCantidadTransaccionesRequestRequest
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Header>
              <!-- The Security element should be removed if WS-Security is not enabled on the SOAP target-url -->
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
               <wsse:UsernameToken>
                <wsse:Username>string</wsse:Username>
                <wsse:Password>string</wsse:Password>
                <wsse:Nonce EncodingType="string">string</wsse:Nonce>
                <wsu:Created>string</wsu:Created>
               </wsse:UsernameToken>
               <wsu:Timestamp wsu:Id="string">
                <wsu:Created>string</wsu:Created>
                <wsu:Expires>string</wsu:Expires>
               </wsu:Timestamp>
              </wsse:Security>
             </soapenv:Header>
             <soapenv:Body>
              <tns:obtenerCantidadTransaccionesRequest xmlns:dic="http://www.transbank.cl/Diccionario" xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1"><!-- mandatory -->
               <tns:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </tns:encabezado>
               <tns:cuerpo><!-- mandatory -->
                <tns:rut><!-- mandatory -->
                 <dic:rut><!-- mandatory -->3</dic:rut>
                 <dic:dv><!-- mandatory -->string</dic:dv>
                </tns:rut>
                <tns:fechaDesde>2016-04-18</tns:fechaDesde>
                <tns:fechaHasta>2016-04-18</tns:fechaHasta>
                <tns:monedas>string</tns:monedas>
                <tns:productos>string</tns:productos>
                <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
                <tns:tipoMovimiento>string</tns:tipoMovimiento>
                <tns:listaLocales>
                 <tns:local><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <tns:codigoLocal>string</tns:codigoLocal>
                 </tns:local>
                </tns:listaLocales>
               </tns:cuerpo>
              </tns:obtenerCantidadTransaccionesRequest>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerCantidadTransaccionesHeader:
          description: Input headers for wsdl operation obtenerCantidadTransaccionesRequest
          type: object
          properties:
            Security:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/Security
        obtenerCantidadTransaccionesOutput:
          description: >-
            Output message for wsdl operation
            obtenerCantidadTransaccionesRequest
          type: object
          properties:
            Envelope:
              xml:
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                prefix: soapenv
              type: object
              properties:
                Body:
                  xml:
                    namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
                    prefix: soapenv
                  type: object
                  properties:
                    obtenerCantidadTransaccionesResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/obtenerCantidadTransaccionesResponse_element_tns
              required:
                - Body
          required:
            - Envelope
          x-ibm-schema:
            wsdl-port: >-
              {http://www.transbank.cl/entidad/transaccionFinanciera/v1}TransaccionFinancieraSOAP_HTTP_Port
            wsdl-operation: obtenerCantidadTransaccionesRequest
            wsdl-message-direction-or-name: obtenerCantidadTransaccionesRequestResponse
          example: >-

            <soapenv:Envelope
            xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
             <soapenv:Body>
              <tns:obtenerCantidadTransaccionesResponse xmlns:dic="http://www.transbank.cl/Diccionario" xmlns:enc="http://www.transbank.cl/EncabezadoPortal" xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
               <tns:encabezado><!-- mandatory -->
                <enc:canal><!-- mandatory -->string</enc:canal>
                <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
                <enc:usuario><!-- mandatory -->string</enc:usuario>
                <enc:ipUsuario>string</enc:ipUsuario>
                <enc:aplicacion>string</enc:aplicacion>
                <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
                <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
                <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
                <enc:servicio><!-- mandatory -->string</enc:servicio>
                <enc:operacion><!-- mandatory -->string</enc:operacion>
                <enc:credencialSeguridad>
                 <enc:usuario>string</enc:usuario>
                 <enc:token>string</enc:token>
                </enc:credencialSeguridad>
                <enc:estadoRespuesta>
                 <enc:codigo>string</enc:codigo>
                </enc:estadoRespuesta>
               </tns:encabezado>
               <tns:cuerpoObtenerCantidadTransaccionesResponse><!-- mandatory -->
                <tns:estadoRespuestaDetalle><!-- mandatory -->
                 <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                  <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                  <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                  <dic:sistema>string</dic:sistema>
                 </dic:estado>
                </tns:estadoRespuestaDetalle>
                <tns:cantidadTransacciones>
                 <tns:totalVentasAbonadas>3</tns:totalVentasAbonadas>
                 <tns:totalVentasAbonoPendiente>3</tns:totalVentasAbonoPendiente>
                 <tns:totalVentasNoProcesadas>3</tns:totalVentasNoProcesadas>
                 <tns:totalVentasAnuladas>3</tns:totalVentasAnuladas>
                 <tns:totalRegistros>3</tns:totalRegistros>
                </tns:cantidadTransacciones>
               </tns:cuerpoObtenerCantidadTransaccionesResponse>
              </tns:obtenerCantidadTransaccionesResponse>
             </soapenv:Body>
            </soapenv:Envelope>
        obtenerTransaccionCapturaDiferidaRequest_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerTransaccionCapturaDiferidaRequest
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_element_enc
            cuerpo:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerTransaccionCapturaDiferidaRequest_type_tns
          required:
            - encabezado
            - cuerpo
          example: >-

            <tns:obtenerTransaccionCapturaDiferidaRequest
            xmlns:dic="http://www.transbank.cl/Diccionario"
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <enc:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </enc:encabezado>
             <tns:cuerpo><!-- mandatory -->
              <dic:paginacion>
               <dic:registroInicial>3</dic:registroInicial>
               <dic:registroPorPagina>3</dic:registroPorPagina>
               <dic:totalRegistros>3</dic:totalRegistros>
              </dic:paginacion>
              <tns:rutEmpresa>string</tns:rutEmpresa>
              <tns:fechaDesde>2016-04-18</tns:fechaDesde>
              <tns:fechaHasta>2016-04-18</tns:fechaHasta>
              <tns:tarjeta>string</tns:tarjeta>
              <tns:ordenPedido>string</tns:ordenPedido>
              <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
              <tns:monto>3</tns:monto>
              <tns:listaLocales>
               <tns:local><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:codigoLocal>string</tns:codigoLocal>
               </tns:local>
              </tns:listaLocales>
              <dic:ordenamiento>
               <dic:ordenColumna>string</dic:ordenColumna>
               <dic:tipoOrden>string</dic:tipoOrden>
              </dic:ordenamiento>
             </tns:cuerpo>
            </tns:obtenerTransaccionCapturaDiferidaRequest>
        obtenerTransaccionCapturaDiferidaResponse_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerTransaccionCapturaDiferidaResponse
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_element_enc
            cuerpo:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerTransaccionCapturaDiferidaResponse_type_tns
          required:
            - encabezado
          example: >-

            <tns:obtenerTransaccionCapturaDiferidaResponse
            xmlns:dic="http://www.transbank.cl/Diccionario"
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <enc:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </enc:encabezado>
             <tns:cuerpo>
              <dic:estadoRespuestaDetalle><!-- mandatory -->
               <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                <dic:sistema>string</dic:sistema>
               </dic:estado>
              </dic:estadoRespuestaDetalle>
              <dic:paginacion>
               <dic:registroInicial>3</dic:registroInicial>
               <dic:registroPorPagina>3</dic:registroPorPagina>
               <dic:totalRegistros>3</dic:totalRegistros>
              </dic:paginacion>
              <tns:listaCapturasDiferidas>
               <tns:capturasDiferidas><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:codigoComercio>string</tns:codigoComercio>
                <tns:moneda>string</tns:moneda>
                <tns:fechaCaptura>2016-04-18</tns:fechaCaptura>
                <tns:fechaAutorizacion>2016-04-18</tns:fechaAutorizacion>
                <tns:tarjeta>string</tns:tarjeta>
                <tns:numeroPedido>string</tns:numeroPedido>
                <tns:tarjetaPedido>string</tns:tarjetaPedido>
                <tns:montoAutorizacion>3</tns:montoAutorizacion>
                <tns:tipoVenta>string</tns:tipoVenta>
                <tns:numeroCuotas>3</tns:numeroCuotas>
                <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
                <tns:montoVenta>3</tns:montoVenta>
                <tns:vci>3</tns:vci>
               </tns:capturasDiferidas>
              </tns:listaCapturasDiferidas>
             </tns:cuerpo>
            </tns:obtenerTransaccionCapturaDiferidaResponse>
        obtenerDetalleTransaccionRequest_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerDetalleTransaccionRequest
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_element_enc
            cuerpo:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerDetalleTransaccionRequest_type_tns
          required:
            - encabezado
            - cuerpo
          example: >-

            <tns:obtenerDetalleTransaccionRequest
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <enc:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </enc:encabezado>
             <tns:cuerpo><!-- mandatory -->
              <tns:lninsec>string</tns:lninsec>
              <tns:fecha>2016-04-18</tns:fecha>
              <tns:codigoLocal>string</tns:codigoLocal>
              <tns:tipoTransaccion>string</tns:tipoTransaccion>
              <tns:verTarjeta>true</tns:verTarjeta>
             </tns:cuerpo>
            </tns:obtenerDetalleTransaccionRequest>
        obtenerDetalleTransaccionResponse_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerDetalleTransaccionResponse
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_element_enc
            cuerpo:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerDetalleTransaccionResponse_type_tns
          required:
            - encabezado
            - cuerpo
          example: >-

            <tns:obtenerDetalleTransaccionResponse
            xmlns:dic="http://www.transbank.cl/Diccionario"
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <enc:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </enc:encabezado>
             <tns:cuerpo><!-- mandatory -->
              <dic:estadoRespuestaDetalle><!-- mandatory -->
               <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                <dic:sistema>string</dic:sistema>
               </dic:estado>
              </dic:estadoRespuestaDetalle>
              <tns:transaccionFinanciera>
               <tns:transaccionFinanciera><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:motivo>string</tns:motivo>
                <tns:transaccion>
                 <tns:codigoLocal>string</tns:codigoLocal>
                 <tns:nombreLocal>string</tns:nombreLocal>
                 <tns:tipoTransaccion>string</tns:tipoTransaccion>
                 <tns:horaTransaccion>string</tns:horaTransaccion>
                 <tns:fechaTransaccion>2016-04-18</tns:fechaTransaccion>
                 <tns:fechaProceso>2016-04-18</tns:fechaProceso>
                 <tns:fechaContable>2016-04-18</tns:fechaContable>
                 <tns:ordenPedido>string</tns:ordenPedido>
                 <tns:numeroPedido>string</tns:numeroPedido>
                 <tns:tarjetaPedido>string</tns:tarjetaPedido>
                 <tns:numeroOperacion>3</tns:numeroOperacion>
                 <tns:idServicio>string</tns:idServicio>
                 <tns:numeroTarjeta>string</tns:numeroTarjeta>
                 <tns:moneda>string</tns:moneda>
                 <tns:bancoEmisor>string</tns:bancoEmisor>
                 <tns:tipoProducto>string</tns:tipoProducto>
                 <tns:tipoMedioPago>string</tns:tipoMedioPago>
                 <tns:tipoVenta>string</tns:tipoVenta>
                 <tns:tipoCuota>string</tns:tipoCuota>
                 <tns:numeroCuota>3</tns:numeroCuota>
                 <tns:totalCuotas>3</tns:totalCuotas>
                 <tns:montoTransaccion>3</tns:montoTransaccion>
                 <tns:montoCuotas>3</tns:montoCuotas>
                 <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
                 <tns:montoAutorizacion>3</tns:montoAutorizacion>
                 <tns:fechaAutorizacion>2016-04-18</tns:fechaAutorizacion>
                 <tns:numeroBoleta>string</tns:numeroBoleta>
                 <tns:fechaAbono>2016-04-18</tns:fechaAbono>
                 <tns:montoAbono>3</tns:montoAbono>
                 <tns:montoOriginalVenta>3</tns:montoOriginalVenta>
                 <tns:montoAfecto>3</tns:montoAfecto>
                 <tns:montoExentoTotal>3</tns:montoExentoTotal>
                 <tns:comision>3</tns:comision>
                 <tns:ivaComision>3</tns:ivaComision>
                 <tns:comisionAdicional>3</tns:comisionAdicional>
                 <tns:ivaComisionAdicional>3</tns:ivaComisionAdicional>
                 <tns:tasaDescuento>3</tns:tasaDescuento>
                 <tns:montoDescuento>3</tns:montoDescuento>
                 <tns:montoRetencion>3</tns:montoRetencion>
                 <tns:montoAnulacion>3</tns:montoAnulacion>
                 <tns:fechaAnulacion>2016-04-18</tns:fechaAnulacion>
                 <tns:tarifaAdicional>3</tns:tarifaAdicional>
                 <tns:desfaseAbono>string</tns:desfaseAbono>
                 <tns:fechaPrimerAbono>2016-04-18</tns:fechaPrimerAbono>
                 <tns:lninsec>string</tns:lninsec>
                 <tns:lninsecAnterior>string</tns:lninsecAnterior>
                 <tns:estado>string</tns:estado>
                 <tns:folio>string</tns:folio>
                 <tns:terminal>string</tns:terminal>
                 <tns:esAnuladaDia>string</tns:esAnuladaDia>
                 <!-- Number of properties exceeds 50, truncated example -->
                </tns:transaccion>
                <tns:totalAnulaciones>3</tns:totalAnulaciones>
                <tns:totalVentas>3</tns:totalVentas>
               </tns:transaccionFinanciera>
              </tns:transaccionFinanciera>
             </tns:cuerpo>
            </tns:obtenerDetalleTransaccionResponse>
        obtenerMovimientoTransaccionRequest_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerMovimientoTransaccionRequest
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_element_enc
            cuerpo:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerMovimientoTransaccionRequest_type_tns
          required:
            - encabezado
            - cuerpo
          example: >-

            <tns:obtenerMovimientoTransaccionRequest
            xmlns:dic="http://www.transbank.cl/Diccionario"
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <enc:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </enc:encabezado>
             <tns:cuerpo><!-- mandatory -->
              <dic:paginacion>
               <dic:registroInicial>3</dic:registroInicial>
               <dic:registroPorPagina>3</dic:registroPorPagina>
               <dic:totalRegistros>3</dic:totalRegistros>
              </dic:paginacion>
              <dic:ordenamiento>
               <dic:ordenColumna>string</dic:ordenColumna>
               <dic:tipoOrden>string</dic:tipoOrden>
              </dic:ordenamiento>
              <tns:rut>
               <dic:rut><!-- mandatory -->3</dic:rut>
               <dic:dv><!-- mandatory -->string</dic:dv>
              </tns:rut>
              <tns:fecha>2016-04-18</tns:fecha>
              <tns:listaLocales>
               <tns:local><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:codigoLocal>string</tns:codigoLocal>
               </tns:local>
              </tns:listaLocales>
              <tns:cuenta>
               <tns:numeroCuenta>string</tns:numeroCuenta>
               <tns:codigoBanco>string</tns:codigoBanco>
               <tns:codigoMoneda>string</tns:codigoMoneda>
              </tns:cuenta>
              <tns:tipoProducto>string</tns:tipoProducto>
              <tns:verTarjeta>true</tns:verTarjeta>
              <tns:lninsec>string</tns:lninsec>
              <tns:monedas>string</tns:monedas>
              <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
             </tns:cuerpo>
            </tns:obtenerMovimientoTransaccionRequest>
        obtenerMovimientoTransaccionResponse_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerMovimientoTransaccionResponse
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_element_enc
            cuerpo:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerMovimientoTransaccionResponse_type_tns
          required:
            - encabezado
            - cuerpo
          example: >-

            <tns:obtenerMovimientoTransaccionResponse
            xmlns:dic="http://www.transbank.cl/Diccionario"
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <enc:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </enc:encabezado>
             <tns:cuerpo><!-- mandatory -->
              <dic:estadoRespuestaDetalle><!-- mandatory -->
               <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                <dic:sistema>string</dic:sistema>
               </dic:estado>
              </dic:estadoRespuestaDetalle>
              <dic:paginacion>
               <dic:registroInicial>3</dic:registroInicial>
               <dic:registroPorPagina>3</dic:registroPorPagina>
               <dic:totalRegistros>3</dic:totalRegistros>
              </dic:paginacion>
              <tns:listaMovimientos>
               <tns:movimiento><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:codigoComercio>string</tns:codigoComercio>
                <tns:identificadorLocal>string</tns:identificadorLocal>
                <tns:tipoMovimiento>string</tns:tipoMovimiento>
                <tns:tipoTarjeta>string</tns:tipoTarjeta>
                <tns:identificador>string</tns:identificador>
                <tns:idServicio>string</tns:idServicio>
                <tns:bancoEmisor>string</tns:bancoEmisor>
                <tns:moneda>string</tns:moneda>
                <tns:tipoProducto>string</tns:tipoProducto>
                <tns:tipoCuota>string</tns:tipoCuota>
                <tns:numeroCuota>3</tns:numeroCuota>
                <tns:totalCuotas>3</tns:totalCuotas>
                <tns:montoCuota>3</tns:montoCuota>
                <tns:montoOriginalVenta>3</tns:montoOriginalVenta>
                <tns:fechaVenta>2016-04-18</tns:fechaVenta>
                <tns:horaVenta>string</tns:horaVenta>
                <tns:numeroBoleta>string</tns:numeroBoleta>
                <tns:montoAbono>3</tns:montoAbono>
                <tns:montoAfecto>3</tns:montoAfecto>
                <tns:fechaAbono>2016-04-18</tns:fechaAbono>
                <tns:montoExento>3</tns:montoExento>
                <tns:comision>3</tns:comision>
                <tns:ivaComision>3</tns:ivaComision>
                <tns:comisionAdicional>3</tns:comisionAdicional>
                <tns:ivaComisionAdicional>3</tns:ivaComisionAdicional>
                <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
                <tns:lninsec>string</tns:lninsec>
                <tns:lninsecAnterior>string</tns:lninsecAnterior>
                <tns:esAnulacionDia>string</tns:esAnulacionDia>
                <tns:fechaAnulacion>2016-04-18</tns:fechaAnulacion>
                <tns:numeroOrdenPedido>string</tns:numeroOrdenPedido>
                <tns:datoLiquidacion>string</tns:datoLiquidacion>
                <tns:codigoRetencion>string</tns:codigoRetencion>
                <tns:tasaDescuento>string</tns:tasaDescuento>
                <tns:montoDescuento>3</tns:montoDescuento>
                <tns:desfase>string</tns:desfase>
                <tns:estado>string</tns:estado>
                <tns:fechaProceso>2016-04-18</tns:fechaProceso>
                <tns:montoTransaccion>string</tns:montoTransaccion>
                <tns:totalAbonoPesos>3</tns:totalAbonoPesos>
                <tns:totalAbonoDolares>3</tns:totalAbonoDolares>
                <tns:debitoPrepago>string</tns:debitoPrepago>
               </tns:movimiento>
              </tns:listaMovimientos>
             </tns:cuerpo>
            </tns:obtenerMovimientoTransaccionResponse>
        obtenerResumenTransaccionRequest_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerResumenTransaccionRequest
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_element_enc
            cuerpo:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerResumenTransaccionRequest_type_tns
          required:
            - encabezado
            - cuerpo
          example: >-

            <tns:obtenerResumenTransaccionRequest
            xmlns:dic="http://www.transbank.cl/Diccionario"
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <enc:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </enc:encabezado>
             <tns:cuerpo><!-- mandatory -->
              <tns:rut><!-- mandatory -->
               <dic:rut><!-- mandatory -->3</dic:rut>
               <dic:dv><!-- mandatory -->string</dic:dv>
              </tns:rut>
              <tns:tipoTransaccion>string</tns:tipoTransaccion>
              <tns:fechaInicio>2016-04-18</tns:fechaInicio>
              <tns:fechaFin>2016-04-18</tns:fechaFin>
              <tns:listaLocales>
               <tns:local><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:codigoLocal>string</tns:codigoLocal>
               </tns:local>
              </tns:listaLocales>
             </tns:cuerpo>
            </tns:obtenerResumenTransaccionRequest>
        obtenerResumenTransaccionResponse_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerResumenTransaccionResponse
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_element_enc
            cuerpo:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerResumenTransaccionResponse_type_tns
          required:
            - encabezado
            - cuerpo
          example: >-

            <tns:obtenerResumenTransaccionResponse
            xmlns:dic="http://www.transbank.cl/Diccionario"
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <enc:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </enc:encabezado>
             <tns:cuerpo><!-- mandatory -->
              <dic:estadoRespuestaDetalle><!-- mandatory -->
               <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                <dic:sistema>string</dic:sistema>
               </dic:estado>
              </dic:estadoRespuestaDetalle>
              <tns:listaTransaccion><!-- between zero and unlimited repetitions of this element -->
               <tns:transaccion><!-- between zero and unlimited repetitions of this element -->
                <tns:fechaVenta>string</tns:fechaVenta>
                <tns:transaccionPesos>3</tns:transaccionPesos>
                <tns:transaccionPesosCredito>3</tns:transaccionPesosCredito>
                <tns:transaccionPesosDebito>3</tns:transaccionPesosDebito>
                <tns:transaccionDolar>3</tns:transaccionDolar>
                <tns:transaccionDolarCredito>3</tns:transaccionDolarCredito>
                <tns:transaccionDolarDebito>3</tns:transaccionDolarDebito>
                <tns:transaccionPesosPrepago>3</tns:transaccionPesosPrepago>
                <tns:transaccionDolarPrepago>3</tns:transaccionDolarPrepago>
               </tns:transaccion>
              </tns:listaTransaccion>
             </tns:cuerpo>
            </tns:obtenerResumenTransaccionResponse>
        obtenerTransaccionRequest_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerTransaccionRequest
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_element_enc
            cuerpo:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerTransaccionRequest_type_tns
          required:
            - encabezado
            - cuerpo
          example: >-

            <tns:obtenerTransaccionRequest
            xmlns:dic="http://www.transbank.cl/Diccionario"
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <enc:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </enc:encabezado>
             <tns:cuerpo><!-- mandatory -->
              <dic:paginacion>
               <dic:registroInicial>3</dic:registroInicial>
               <dic:registroPorPagina>3</dic:registroPorPagina>
               <dic:totalRegistros>3</dic:totalRegistros>
              </dic:paginacion>
              <dic:ordenamiento>
               <dic:ordenColumna>string</dic:ordenColumna>
               <dic:tipoOrden>string</dic:tipoOrden>
              </dic:ordenamiento>
              <tns:rut><!-- mandatory -->
               <dic:rut><!-- mandatory -->3</dic:rut>
               <dic:dv><!-- mandatory -->string</dic:dv>
              </tns:rut>
              <tns:fechaAbono>2016-04-18</tns:fechaAbono>
              <tns:fechaTransaccionInicio>2016-04-18</tns:fechaTransaccionInicio>
              <tns:fechaTransaccionFin>2016-04-18</tns:fechaTransaccionFin>
              <tns:listaLocales><!-- mandatory -->
               <tns:local><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:codigoLocal>string</tns:codigoLocal>
               </tns:local>
              </tns:listaLocales>
              <tns:listaCuentas>
               <tns:cuentas><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:numeroCuenta>string</tns:numeroCuenta>
                <tns:codigoBanco>string</tns:codigoBanco>
                <tns:codigoMoneda>string</tns:codigoMoneda>
               </tns:cuentas>
              </tns:listaCuentas>
              <tns:listaProductos>
               <tns:producto><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:codigoProducto>string</tns:codigoProducto>
               </tns:producto>
              </tns:listaProductos>
              <tns:tipoTransaccion>string</tns:tipoTransaccion>
              <tns:tipoCuota>string</tns:tipoCuota>
              <tns:listaMonedas>
               <tns:moneda><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:codigoMoneda>string</tns:codigoMoneda>
               </tns:moneda>
              </tns:listaMonedas>
              <tns:operadorMonto>string</tns:operadorMonto>
              <tns:monto>3</tns:monto>
              <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
              <tns:verTarjeta><!-- mandatory -->true</tns:verTarjeta>
              <tns:numeroTarjeta>string</tns:numeroTarjeta>
              <tns:ordenPedido>string</tns:ordenPedido>
             </tns:cuerpo>
            </tns:obtenerTransaccionRequest>
        obtenerTransaccionResponse_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerTransaccionResponse
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_element_enc
            cuerpo:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerTransaccionResponse_type_tns
          required:
            - encabezado
            - cuerpo
          example: >-

            <tns:obtenerTransaccionResponse
            xmlns:dic="http://www.transbank.cl/Diccionario"
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <enc:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </enc:encabezado>
             <tns:cuerpo><!-- mandatory -->
              <dic:estadoRespuestaDetalle><!-- mandatory -->
               <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                <dic:sistema>string</dic:sistema>
               </dic:estado>
              </dic:estadoRespuestaDetalle>
              <dic:paginacion>
               <dic:registroInicial>3</dic:registroInicial>
               <dic:registroPorPagina>3</dic:registroPorPagina>
               <dic:totalRegistros>3</dic:totalRegistros>
              </dic:paginacion>
              <tns:listaTransaccionFinanciera>
               <tns:transaccionFinanciera><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:motivo>string</tns:motivo>
                <tns:transaccion>
                 <tns:codigoLocal>string</tns:codigoLocal>
                 <tns:nombreLocal>string</tns:nombreLocal>
                 <tns:tipoTransaccion>string</tns:tipoTransaccion>
                 <tns:horaTransaccion>string</tns:horaTransaccion>
                 <tns:fechaTransaccion>2016-04-18</tns:fechaTransaccion>
                 <tns:fechaProceso>2016-04-18</tns:fechaProceso>
                 <tns:fechaContable>2016-04-18</tns:fechaContable>
                 <tns:ordenPedido>string</tns:ordenPedido>
                 <tns:numeroPedido>string</tns:numeroPedido>
                 <tns:tarjetaPedido>string</tns:tarjetaPedido>
                 <tns:numeroOperacion>3</tns:numeroOperacion>
                 <tns:idServicio>string</tns:idServicio>
                 <tns:numeroTarjeta>string</tns:numeroTarjeta>
                 <tns:moneda>string</tns:moneda>
                 <tns:bancoEmisor>string</tns:bancoEmisor>
                 <tns:tipoProducto>string</tns:tipoProducto>
                 <tns:tipoMedioPago>string</tns:tipoMedioPago>
                 <tns:tipoVenta>string</tns:tipoVenta>
                 <tns:tipoCuota>string</tns:tipoCuota>
                 <tns:numeroCuota>3</tns:numeroCuota>
                 <tns:totalCuotas>3</tns:totalCuotas>
                 <tns:montoTransaccion>3</tns:montoTransaccion>
                 <tns:montoCuotas>3</tns:montoCuotas>
                 <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
                 <tns:montoAutorizacion>3</tns:montoAutorizacion>
                 <tns:fechaAutorizacion>2016-04-18</tns:fechaAutorizacion>
                 <tns:numeroBoleta>string</tns:numeroBoleta>
                 <tns:fechaAbono>2016-04-18</tns:fechaAbono>
                 <tns:montoAbono>3</tns:montoAbono>
                 <tns:montoOriginalVenta>3</tns:montoOriginalVenta>
                 <tns:montoAfecto>3</tns:montoAfecto>
                 <tns:montoExentoTotal>3</tns:montoExentoTotal>
                 <tns:comision>3</tns:comision>
                 <tns:ivaComision>3</tns:ivaComision>
                 <tns:comisionAdicional>3</tns:comisionAdicional>
                 <tns:ivaComisionAdicional>3</tns:ivaComisionAdicional>
                 <tns:tasaDescuento>3</tns:tasaDescuento>
                 <tns:montoDescuento>3</tns:montoDescuento>
                 <tns:montoRetencion>3</tns:montoRetencion>
                 <tns:montoAnulacion>3</tns:montoAnulacion>
                 <tns:fechaAnulacion>2016-04-18</tns:fechaAnulacion>
                 <tns:tarifaAdicional>3</tns:tarifaAdicional>
                 <tns:desfaseAbono>string</tns:desfaseAbono>
                 <tns:fechaPrimerAbono>2016-04-18</tns:fechaPrimerAbono>
                 <tns:lninsec>string</tns:lninsec>
                 <tns:lninsecAnterior>string</tns:lninsecAnterior>
                 <tns:estado>string</tns:estado>
                 <tns:folio>string</tns:folio>
                 <tns:terminal>string</tns:terminal>
                 <tns:esAnuladaDia>string</tns:esAnuladaDia>
                 <!-- Number of properties exceeds 50, truncated example -->
                </tns:transaccion>
                <tns:totalAnulaciones>3</tns:totalAnulaciones>
                <tns:totalVentas>3</tns:totalVentas>
               </tns:transaccionFinanciera>
              </tns:listaTransaccionFinanciera>
             </tns:cuerpo>
            </tns:obtenerTransaccionResponse>
        obtenerCantidadTransaccionesRequest_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerCantidadTransaccionesRequest
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_type_enc_tns
            cuerpo:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerCantidadTransaccionesRequest_type_tns
          required:
            - encabezado
            - cuerpo
          example: >-

            <tns:obtenerCantidadTransaccionesRequest
            xmlns:dic="http://www.transbank.cl/Diccionario"
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <tns:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </tns:encabezado>
             <tns:cuerpo><!-- mandatory -->
              <tns:rut><!-- mandatory -->
               <dic:rut><!-- mandatory -->3</dic:rut>
               <dic:dv><!-- mandatory -->string</dic:dv>
              </tns:rut>
              <tns:fechaDesde>2016-04-18</tns:fechaDesde>
              <tns:fechaHasta>2016-04-18</tns:fechaHasta>
              <tns:monedas>string</tns:monedas>
              <tns:productos>string</tns:productos>
              <tns:codigoAutorizacion>string</tns:codigoAutorizacion>
              <tns:tipoMovimiento>string</tns:tipoMovimiento>
              <tns:listaLocales>
               <tns:local><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <tns:codigoLocal>string</tns:codigoLocal>
               </tns:local>
              </tns:listaLocales>
             </tns:cuerpo>
            </tns:obtenerCantidadTransaccionesRequest>
        obtenerCantidadTransaccionesResponse_element_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
            name: obtenerCantidadTransaccionesResponse
          type: object
          properties:
            encabezado:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/encabezado_type_enc_tns
            cuerpoObtenerCantidadTransaccionesResponse:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuerpoObtenerCantidadTransaccionesResponse_type_tns
          required:
            - encabezado
            - cuerpoObtenerCantidadTransaccionesResponse
          example: >-

            <tns:obtenerCantidadTransaccionesResponse
            xmlns:dic="http://www.transbank.cl/Diccionario"
            xmlns:enc="http://www.transbank.cl/EncabezadoPortal"
            xmlns:tns="http://www.transbank.cl/entidad/transaccionFinanciera/v1">
             <tns:encabezado><!-- mandatory -->
              <enc:canal><!-- mandatory -->string</enc:canal>
              <enc:ipCanal><!-- mandatory -->string</enc:ipCanal>
              <enc:usuario><!-- mandatory -->string</enc:usuario>
              <enc:ipUsuario>string</enc:ipUsuario>
              <enc:aplicacion>string</enc:aplicacion>
              <enc:idTransaccionCanal><!-- mandatory -->string</enc:idTransaccionCanal>
              <enc:idTransaccionMDW>string</enc:idTransaccionMDW>
              <enc:espacioNombre><!-- mandatory -->string</enc:espacioNombre>
              <enc:servicio><!-- mandatory -->string</enc:servicio>
              <enc:operacion><!-- mandatory -->string</enc:operacion>
              <enc:credencialSeguridad>
               <enc:usuario>string</enc:usuario>
               <enc:token>string</enc:token>
              </enc:credencialSeguridad>
              <enc:estadoRespuesta>
               <enc:codigo>string</enc:codigo>
              </enc:estadoRespuesta>
             </tns:encabezado>
             <tns:cuerpoObtenerCantidadTransaccionesResponse><!-- mandatory -->
              <tns:estadoRespuestaDetalle><!-- mandatory -->
               <dic:estado><!-- mandatory --><!-- between 1 and unlimited repetitions of this element -->
                <dic:codigoRespuesta><!-- mandatory -->string</dic:codigoRespuesta>
                <dic:mensajeRespuesta><!-- mandatory -->string</dic:mensajeRespuesta>
                <dic:sistema>string</dic:sistema>
               </dic:estado>
              </tns:estadoRespuestaDetalle>
              <tns:cantidadTransacciones>
               <tns:totalVentasAbonadas>3</tns:totalVentasAbonadas>
               <tns:totalVentasAbonoPendiente>3</tns:totalVentasAbonoPendiente>
               <tns:totalVentasNoProcesadas>3</tns:totalVentasNoProcesadas>
               <tns:totalVentasAnuladas>3</tns:totalVentasAnuladas>
               <tns:totalRegistros>3</tns:totalRegistros>
              </tns:cantidadTransacciones>
             </tns:cuerpoObtenerCantidadTransaccionesResponse>
            </tns:obtenerCantidadTransaccionesResponse>
        encabezado_element_enc:
          xml:
            namespace: 'http://www.transbank.cl/EncabezadoPortal'
            prefix: enc
          type: object
          properties:
            canal:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            ipCanal:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            usuario:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            ipUsuario:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            aplicacion:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            idTransaccionCanal:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            idTransaccionMDW:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            espacioNombre:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            servicio:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            operacion:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            credencialSeguridad:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/credencialSeguridad_type_enc
            estadoRespuesta:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/estadoRespuesta_type_enc
          required:
            - canal
            - ipCanal
            - usuario
            - idTransaccionCanal
            - espacioNombre
            - servicio
            - operacion
          x-xsi-type: encabezado
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/EncabezadoPortal'
            prefix: enc
          x-xsi-type-uniquename: encabezado_type_enc
        cuerpoObtenerTransaccionCapturaDiferidaRequest_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            paginacion:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/paginacion_element_dic
            rutEmpresa:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            fechaDesde:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            fechaHasta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            tarjeta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            ordenPedido:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            codigoAutorizacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            monto:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: integer
              format: int32
            listaLocales:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/locales_type_tns
            ordenamiento:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/ordenamiento_element_dic
          x-xsi-type: cuerpoObtenerTransaccionCapturaDiferidaRequest
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerTransaccionCapturaDiferidaRequest_type_tns
        cuerpoObtenerTransaccionCapturaDiferidaResponse_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            estadoRespuestaDetalle:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/estadoRespuestaDetalle_element_dic
            paginacion:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/paginacion_element_dic
            listaCapturasDiferidas:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/capturasDiferidasList_type_tns
          required:
            - estadoRespuestaDetalle
          x-xsi-type: cuerpoObtenerTransaccionCapturaDiferidaResponse
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerTransaccionCapturaDiferidaResponse_type_tns
        cuerpoObtenerDetalleTransaccionRequest_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            lninsec:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            fecha:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            codigoLocal:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoTransaccion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            verTarjeta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: boolean
          x-xsi-type: cuerpoObtenerDetalleTransaccionRequest
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerDetalleTransaccionRequest_type_tns
        cuerpoObtenerDetalleTransaccionResponse_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            estadoRespuestaDetalle:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/estadoRespuestaDetalle_element_dic
            transaccionFinanciera:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/transaccionFinancieraList_type_tns
          required:
            - estadoRespuestaDetalle
          x-xsi-type: cuerpoObtenerDetalleTransaccionResponse
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerDetalleTransaccionResponse_type_tns
        cuerpoObtenerMovimientoTransaccionRequest_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            paginacion:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/paginacion_element_dic
            ordenamiento:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/ordenamiento_element_dic
            rut:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/rut_type_dic_tns
            fecha:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            listaLocales:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/localList_type_tns
            cuenta:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuenta_type_tns
            tipoProducto:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            verTarjeta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: boolean
            lninsec:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            monedas:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            codigoAutorizacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
          x-xsi-type: cuerpoObtenerMovimientoTransaccionRequest
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerMovimientoTransaccionRequest_type_tns
        cuerpoObtenerMovimientoTransaccionResponse_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            estadoRespuestaDetalle:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/estadoRespuestaDetalle_element_dic
            paginacion:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/paginacion_element_dic
            listaMovimientos:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/movimientoList_type_tns
          required:
            - estadoRespuestaDetalle
          x-xsi-type: cuerpoObtenerMovimientoTransaccionResponse
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerMovimientoTransaccionResponse_type_tns
        cuerpoObtenerResumenTransaccionRequest_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            rut:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/rut_type_dic_tns
            tipoTransaccion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            fechaInicio:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            fechaFin:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            listaLocales:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/localList_type_tns
          required:
            - rut
          x-xsi-type: cuerpoObtenerResumenTransaccionRequest
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerResumenTransaccionRequest_type_tns
        cuerpoObtenerResumenTransaccionResponse_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            estadoRespuestaDetalle:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/estadoRespuestaDetalle_element_dic
            listaTransaccion:
              type: array
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/listaTransaccionList_type_tns
          required:
            - estadoRespuestaDetalle
          x-xsi-type: cuerpoObtenerResumenTransaccionResponse
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerResumenTransaccionResponse_type_tns
        cuerpoObtenerTransaccionRequest_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            paginacion:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/paginacion_element_dic
            ordenamiento:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/ordenamiento_element_dic
            rut:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/rut_type_dic_tns
            fechaAbono:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            fechaTransaccionInicio:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            fechaTransaccionFin:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            listaLocales:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/localList_type_tns
            listaCuentas:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuentaList_type_tns
            listaProductos:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/productoList_type_tns
            tipoTransaccion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoCuota:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            listaMonedas:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/monedaList1_type_tns
            operadorMonto:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            monto:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            codigoAutorizacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            verTarjeta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: boolean
            numeroTarjeta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            ordenPedido:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
          required:
            - rut
            - listaLocales
            - verTarjeta
          x-xsi-type: cuerpoObtenerTransaccionRequest
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerTransaccionRequest_type_tns
        cuerpoObtenerTransaccionResponse_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            estadoRespuestaDetalle:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/estadoRespuestaDetalle_element_dic
            paginacion:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/paginacion_element_dic
            listaTransaccionFinanciera:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/transaccionFinancieraList_type_tns
          required:
            - estadoRespuestaDetalle
          x-xsi-type: cuerpoObtenerTransaccionResponse
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerTransaccionResponse_type_tns
        encabezado_type_enc_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            canal:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            ipCanal:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            usuario:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            ipUsuario:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            aplicacion:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            idTransaccionCanal:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            idTransaccionMDW:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            espacioNombre:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            servicio:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            operacion:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            credencialSeguridad:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/credencialSeguridad_type_enc
            estadoRespuesta:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/estadoRespuesta_type_enc
          required:
            - canal
            - ipCanal
            - usuario
            - idTransaccionCanal
            - espacioNombre
            - servicio
            - operacion
          x-xsi-type: encabezado
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/EncabezadoPortal'
            prefix: enc
          x-xsi-type-uniquename: encabezado_type_enc_tns
        cuerpoObtenerCantidadTransaccionesRequest_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            rut:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/rut_type_dic_tns
            fechaDesde:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            fechaHasta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            monedas:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            productos:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            codigoAutorizacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoMovimiento:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            listaLocales:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/localList_type_tns
          required:
            - rut
          x-xsi-type: cuerpoObtenerCantidadTransaccionesRequest
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerCantidadTransaccionesRequest_type_tns
        cuerpoObtenerCantidadTransaccionesResponse_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            estadoRespuestaDetalle:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/estadoRespuestaList_type_dic_tns
            cantidadTransacciones:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cantidadTransaccionesList_type_tns
          required:
            - estadoRespuestaDetalle
          x-xsi-type: cuerpoObtenerCantidadTransaccionesResponse
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuerpoObtenerCantidadTransaccionesResponse_type_tns
        paginacion_element_dic:
          xml:
            namespace: 'http://www.transbank.cl/Diccionario'
            prefix: dic
          type: object
          properties:
            registroInicial:
              xml:
                namespace: 'http://www.transbank.cl/Diccionario'
                prefix: dic
              type: number
            registroPorPagina:
              xml:
                namespace: 'http://www.transbank.cl/Diccionario'
                prefix: dic
              type: number
            totalRegistros:
              xml:
                namespace: 'http://www.transbank.cl/Diccionario'
                prefix: dic
              type: number
          x-xsi-type: paginacion
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/Diccionario'
            prefix: dic
          x-xsi-type-uniquename: paginacion_type_dic
        locales_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            local:
              type: array
              minItems: 1
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/local_type_tns
          required:
            - local
          x-xsi-type: locales
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: locales_type_tns
        ordenamiento_element_dic:
          xml:
            namespace: 'http://www.transbank.cl/Diccionario'
            prefix: dic
          type: object
          properties:
            ordenColumna:
              xml:
                namespace: 'http://www.transbank.cl/Diccionario'
                prefix: dic
              type: string
            tipoOrden:
              xml:
                namespace: 'http://www.transbank.cl/Diccionario'
                prefix: dic
              type: string
          x-xsi-type: ordenamientoTipo
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/Diccionario'
            prefix: dic
          x-xsi-type-uniquename: ordenamientoTipo_type_dic
        estadoRespuestaDetalle_element_dic:
          xml:
            namespace: 'http://www.transbank.cl/Diccionario'
            prefix: dic
          type: object
          properties:
            estado:
              type: array
              minItems: 1
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/estadoRespuesta_type_dic
          required:
            - estado
          x-xsi-type: estadoRespuestaList
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/Diccionario'
            prefix: dic
          x-xsi-type-uniquename: estadoRespuestaList_type_dic
        capturasDiferidasList_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            capturasDiferidas:
              type: array
              minItems: 1
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/capturasDiferidas_type_tns
          required:
            - capturasDiferidas
          x-xsi-type: capturasDiferidasList
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: capturasDiferidasList_type_tns
        transaccionFinancieraList_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            transaccionFinanciera:
              type: array
              minItems: 1
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/transaccion_type_tns
          required:
            - transaccionFinanciera
          x-xsi-type: transaccionFinancieraList
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: transaccionFinancieraList_type_tns
        rut_type_dic_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            rut:
              xml:
                namespace: 'http://www.transbank.cl/Diccionario'
                prefix: dic
              type: number
            dv:
              xml:
                namespace: 'http://www.transbank.cl/Diccionario'
                prefix: dic
              type: string
          required:
            - rut
            - dv
          x-xsi-type: rut
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/Diccionario'
            prefix: dic
          x-xsi-type-uniquename: rut_type_dic_tns
        localList_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            local:
              type: array
              minItems: 1
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/local_type_tns
          required:
            - local
          x-xsi-type: localList
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: localList_type_tns
        cuenta_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            numeroCuenta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            codigoBanco:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            codigoMoneda:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
          x-xsi-type: cuenta
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuenta_type_tns
        movimientoList_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            movimiento:
              type: array
              minItems: 1
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/movimientos_type_tns
          required:
            - movimiento
          x-xsi-type: movimientoList
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: movimientoList_type_tns
        listaTransaccionList_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            transaccion:
              type: array
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/transaccionList_type_tns
          x-xsi-type: listaTransaccionList
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: listaTransaccionList_type_tns
        cuentaList_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            cuentas:
              type: array
              minItems: 1
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/cuenta_type_tns
          required:
            - cuentas
          x-xsi-type: cuentaList
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cuentaList_type_tns
        productoList_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            producto:
              type: array
              minItems: 1
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/productos_type_tns
          required:
            - producto
          x-xsi-type: productoList
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: productoList_type_tns
        monedaList1_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            moneda:
              type: array
              minItems: 1
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/monedas1_type_tns
          required:
            - moneda
          x-xsi-type: monedaList1
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: monedaList1_type_tns
        credencialSeguridad_type_enc:
          xml:
            namespace: 'http://www.transbank.cl/EncabezadoPortal'
            prefix: enc
          type: object
          properties:
            usuario:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
            token:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
          x-xsi-type: credencialSeguridad
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/EncabezadoPortal'
            prefix: enc
          x-xsi-type-uniquename: credencialSeguridad_type_enc
        estadoRespuesta_type_enc:
          xml:
            namespace: 'http://www.transbank.cl/EncabezadoPortal'
            prefix: enc
          type: object
          properties:
            codigo:
              xml:
                namespace: 'http://www.transbank.cl/EncabezadoPortal'
                prefix: enc
              type: string
          x-xsi-type: estadoRespuesta
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/EncabezadoPortal'
            prefix: enc
          x-xsi-type-uniquename: estadoRespuesta_type_enc
        estadoRespuestaList_type_dic_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            estado:
              type: array
              minItems: 1
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/estadoRespuesta_type_dic
          required:
            - estado
          x-xsi-type: estadoRespuestaList
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/Diccionario'
            prefix: dic
          x-xsi-type-uniquename: estadoRespuestaList_type_dic_tns
        cantidadTransaccionesList_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            totalVentasAbonadas:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            totalVentasAbonoPendiente:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            totalVentasNoProcesadas:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            totalVentasAnuladas:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            totalRegistros:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
          x-xsi-type: cantidadTransaccionesList
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: cantidadTransaccionesList_type_tns
        local_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            codigoLocal:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
          x-xsi-type: local
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: local_type_tns
        capturasDiferidas_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            codigoComercio:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            moneda:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            fechaCaptura:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            fechaAutorizacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            tarjeta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            numeroPedido:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tarjetaPedido:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            montoAutorizacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            tipoVenta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            numeroCuotas:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            codigoAutorizacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            montoVenta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            vci:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
          x-xsi-type: capturasDiferidas
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: capturasDiferidas_type_tns
        transaccion_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            motivo:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            transaccion:
              $ref: >-
                #/x-ibm-configuration/targets/TransaccionFinancieraSOAP_HTTP_Service/definitions/transaccionFinanciera_type_tns
            totalAnulaciones:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            totalVentas:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
          x-xsi-type: transaccion
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: transaccion_type_tns
        movimientos_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            codigoComercio:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            identificadorLocal:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoMovimiento:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoTarjeta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            identificador:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            idServicio:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            bancoEmisor:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            moneda:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoProducto:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoCuota:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            numeroCuota:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            totalCuotas:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            montoCuota:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            montoOriginalVenta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            fechaVenta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            horaVenta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            numeroBoleta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            montoAbono:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            montoAfecto:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            fechaAbono:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            montoExento:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            comision:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            ivaComision:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            comisionAdicional:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            ivaComisionAdicional:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            codigoAutorizacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            lninsec:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            lninsecAnterior:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            esAnulacionDia:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            fechaAnulacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            numeroOrdenPedido:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            datoLiquidacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            codigoRetencion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tasaDescuento:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            montoDescuento:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            desfase:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            estado:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            fechaProceso:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            montoTransaccion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            totalAbonoPesos:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            totalAbonoDolares:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            debitoPrepago:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
          x-xsi-type: movimientos
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: movimientos_type_tns
        transaccionList_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            fechaVenta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            transaccionPesos:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            transaccionPesosCredito:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            transaccionPesosDebito:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            transaccionDolar:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            transaccionDolarCredito:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            transaccionDolarDebito:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            transaccionPesosPrepago:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            transaccionDolarPrepago:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
          x-xsi-type: transaccionList
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: transaccionList_type_tns
        productos_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            codigoProducto:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
          x-xsi-type: productos
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: productos_type_tns
        monedas1_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            codigoMoneda:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
          x-xsi-type: monedas1
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: monedas1_type_tns
        estadoRespuesta_type_dic:
          xml:
            namespace: 'http://www.transbank.cl/Diccionario'
            prefix: dic
          type: object
          properties:
            codigoRespuesta:
              xml:
                namespace: 'http://www.transbank.cl/Diccionario'
                prefix: dic
              type: string
            mensajeRespuesta:
              xml:
                namespace: 'http://www.transbank.cl/Diccionario'
                prefix: dic
              type: string
            sistema:
              xml:
                namespace: 'http://www.transbank.cl/Diccionario'
                prefix: dic
              type: string
          required:
            - codigoRespuesta
            - mensajeRespuesta
          x-xsi-type: estadoRespuesta
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/Diccionario'
            prefix: dic
          x-xsi-type-uniquename: estadoRespuesta_type_dic
        transaccionFinanciera_type_tns:
          xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          type: object
          properties:
            codigoLocal:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            nombreLocal:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoTransaccion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            horaTransaccion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            fechaTransaccion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            fechaProceso:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            fechaContable:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            ordenPedido:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            numeroPedido:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tarjetaPedido:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            numeroOperacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            idServicio:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            numeroTarjeta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            moneda:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            bancoEmisor:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoProducto:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoMedioPago:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoVenta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoCuota:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            numeroCuota:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            totalCuotas:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            montoTransaccion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            montoCuotas:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            codigoAutorizacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            montoAutorizacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            fechaAutorizacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            numeroBoleta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            fechaAbono:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            montoAbono:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            montoOriginalVenta:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            montoAfecto:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            montoExentoTotal:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            comision:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            ivaComision:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            comisionAdicional:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            ivaComisionAdicional:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            tasaDescuento:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            montoDescuento:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            montoRetencion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            montoAnulacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            fechaAnulacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            tarifaAdicional:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: number
            desfaseAbono:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            fechaPrimerAbono:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
              format: date
            lninsec:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            lninsecAnterior:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            estado:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            folio:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            terminal:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            esAnuladaDia:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            codigoRetencion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            datoLiquidacion:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            debitoPrepago:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            tipoDocumento:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
            vcbal:
              xml:
                namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
                prefix: tns
              type: string
          x-xsi-type: transaccionFinanciera
          x-xsi-type-xml:
            namespace: 'http://www.transbank.cl/entidad/transaccionFinanciera/v1'
            prefix: tns
          x-xsi-type-uniquename: transaccionFinanciera_type_tns
tags:
  - name: Ventas
definitions:
  TransacccionOnline:
    title: ''
    description: ''
    type: object
    properties:
      codigoAutorizacion:
        type: string
      ordenCompra:
        type: string
      tarjeta:
        type: string
      numeroTarjeta:
        type: string
      numeroCuenta:
        type: string
      moneda:
        type: string
      numeroEmpleado:
        type: string
      nombreFantasia:
        type: string
      tipoCuotas:
        type: string
      montoCuota:
        format: double
        type: number
      numeroCuota:
        type: string
      numeroCuotas:
        type: integer
      tasaInteres:
        format: double
        type: number
      numeroBoleta:
        type: string
      tipoMensaje:
        type: string
      numeroOperacion:
        type: string
      tipoMovimiento:
        type: string
      codigoLocal:
        type: string
      idServicio:
        type: string
      numeroEquipo:
        type: string
      numeroSerieTerminal:
        type: string
      propina:
        format: double
        type: number
      montoTransaccion:
        format: double
        type: number
      diaTransaccion:
        format: int32
        type: integer
      horaTransaccion:
        type: string
      mesTransaccion:
        format: int32
        type: integer
      tipoTransaccion:
        type: string
      anioTransaccion:
        format: int32
        type: integer
      vuelto:
        format: int32
        type: integer
      tipovoucher:
        type: string
      direccion:
        $ref: '#/definitions/Direccion'
    example:
      codigoAutorizacion: '123456789'
      ordenCompra: '233413412'
      tarjeta: V
      numeroTarjeta: XXX944
      numeroCuenta: '12345678998'
      moneda: CLP
      numeroEmpleado: '345675676787'
      nombreFantasia: COMPAÑIA LIMITADA
      tipoCuotas: tipo
      montoCuota: 990000.59
      numeroCuota: '4'
      numeroCuotas: 28
      tasaInteres: 2
      numeroBoleta: '12345'
      tipoMensaje: 121
      numeroOperacion: '555555445'
      tipoMovimiento: some text
      codigoLocal: some text
      idServicio: some text
      numeroEquipo: some text
      numeroSerieTerminal: some text
      propina: 64.77
      montoTransaccion: 21.8
      diaTransaccion: 12
      horaTransaccion: '165733'
      mesTransaccion: 2
      tipoTransaccion: falta mapeo
      anioTransaccion: 66
      vuelto: 40
      tipovoucher: falta mapeo
      direccion:
        comuna: RANCAGUA
        ciudad: SANTIAGO
        pais: CL
        direccionCompleta: MAPOCHO
  TransaccionesRs:
    description: ''
    required:
      - data
    type: object
    properties:
      meta:
        $ref: '#/definitions/_meta'
        description: ''
      data:
        description: Respuesta del servicio
        type: array
        items:
          $ref: '#/definitions/Transaccion'
      links:
        $ref: '#/definitions/_pagination'
        description: Paginación
    example:
      meta:
        _msgId: 3eaf202d-f360-4b76-b84a-927538b54fec
        _version: 1.0.0
        _rqDateTime: '2018-02-10T09:30Z'
        _rsSize: 2
        _clientId: 19eb8a69-8754-4311-934c-c8b04cb7f504
        _transactionId: eae9fa42-f64a-4926-b96a-9909eb8111ed
      data:
        - codigoLocal: '21312321'
          nombreLocal: COOPEUCH 194
          tipoTransaccion: some text
          fechaTransaccion: '2018-01-17'
          numeroTarjeta: XXXX932
          tipoProducto: some text
          tipoCuota: Normal
          totalCuotas: 1
          montoCuotas: 0
          codigoAutorizacion: '2345567889'
          montoAfecto: 160000.84
          montoExentoTotal: 10000.81
        - codigoLocal: '2722334'
          nombreLocal: COOPEUCH ALAMEDA 192
          tipoTransaccion: V
          fechaTransaccion: '2018-01-17'
          numeroTarjeta: XXX2446
          tipoProducto: D
          tipoCuota: Normal
          totalCuotas: 1
          montoCuotas: 0
          codigoAutorizacion: '9019334'
          montoAfecto: 30030.4
          montoExentoTotal: 3000
      links:
        first: 'https://$(catalog.host)/transacciones?page-number=1&page-size=10'
        last: 'https://$(catalog.host)/transacciones?page-number=10&page-size=10'
        prev: 'https://$(catalog.host)/transacciones?page-number=2&page-size=10'
        next: 'https://$(catalog.host)/transacciones?page-number=4&page-size=10'
        self: 'https://$(catalog.host)/transacciones?page-number=3&page-size=10'
  _error:
    description: Definición de mensaje de error de JSON-API
    type: object
    properties:
      errors:
        description: Arreglo de los errores presentados
        type: array
        items:
          $ref: '#/definitions/Error'
      meta:
        $ref: '#/definitions/_meta'
        description: ''
    example:
      errors:
        - code: 422
          title: fecha-hasta deberia ser posterior a fecha-desde
          source:
            pointer: fecha-hasta
          detail: >-
            La fecha-hasta 2019-10-20T12:00:00 es menor a la fecha-desde
            2019-11-12T12:20:54 
        - status: '422'
          title: Fecha desde inválida
          detail: Fecha desde mayor a fecha actual
          source:
            parameter: fecha-desde
      meta:
        _msgId: cb588422-56d7-4227-9863-99ca0458559e
        _version: 6df75c2a-7a99-11ea-bc55-0242ac130003
        _rqDateTime: '2018-02-10T09:30Z'
        _rsLength: 22
        _clientId: 91f7aa98-bcdb-4d1e-a0e2-74c5af5bd607
        _transactionId: 1718692c-065e-4f3c-bb1b-47730bbad9c2
  _links:
    description: |-
      Definición de link de JSON-API
      A resource object **MAY** contain references to other resource objects
    type: object
    properties:
      self:
        format: uri
        description: 'A self member, whose value is a URL for the relationship data'
        type: string
      related:
        format: uri
        type: string
  _pagination:
    type: object
    properties:
      first:
        format: uri-reference
        description: The first page of data
        type: string
      last:
        format: uri-reference
        description: The last page of data
        type: string
      prev:
        format: uri-reference
        description: The previous page of data
        type: string
      next:
        format: uri-reference
        description: The next page of data
        type: string
    example:
      first: 'https://$(catalog.host)/transacciones?page-number=1&page-size=10'
      last: 'https://$(catalog.host)/transacciones?page-number=10&page-size=10'
      prev: 'https://$(catalog.host)/transacciones?page-number=2&page-size=10'
      next: 'https://$(catalog.host)/transacciones?page-number=4&page-size=10'
      self: 'https://$(catalog.host)/transacciones?page-number=3&page-size=10'
  ResumenTransaccion:
    description: ''
    type: object
    properties:
      fechaVenta:
        format: date
        description: ''
        type: string
      transaccionPesos:
        format: double
        description: ''
        type: number
      transaccionPesosCredito:
        format: double
        description: ''
        type: number
      transaccionPesosDebito:
        format: double
        description: ''
        type: number
      transaccionDolar:
        format: double
        description: ''
        type: number
      transaccionDolarCredito:
        format: double
        description: ''
        type: number
      transaccionDolarDebito:
        format: double
        description: ''
        type: number
      transaccionPesosPrepago:
        format: double
        description: ''
        type: number
      transaccionDolarPrepago:
        format: double
        description: ''
        type: number
    example:
      fechaVenta: '2020-03-10T00:00:00.000Z'
      transaccionPesos: 10000
      transaccionPesosCredito: 25000
      transaccionPesosDebito: 2500
      transaccionDolar: 3200
      transaccionDolarCredito: 795000
      transaccionDolarDebito: 75000
      transaccionPesosPrepago: 142300
      transaccionDolarPrepago: 45300
  ListaTransaccion:
    description: ''
    type: object
    properties:
      listatransaccion:
        description: ''
        type: array
        items:
          $ref: '#/definitions/ResumenTransaccion'
  TotalesTransacciones:
    description: ''
    type: object
    properties:
      totalVentasAbonadas:
        description: ''
        type: integer
      totalVentasAbonoPendiente:
        description: ''
        type: integer
      totalVentasNoProcesadas:
        description: ''
        type: integer
      totalVentasAnuladas:
        description: ''
        type: integer
      totalRegistros:
        description: ''
        type: integer
    example:
      totalVentasAbonadas: 100
      totalVentasAbonoPendiente: 8
      totalVentasNoProcesadas: 150
      totalVentasAnuladas: 9
      totalRegistros: 130
  TotalesTransaccionesRs:
    description: ''
    required:
      - data
    type: object
    properties:
      meta:
        $ref: '#/definitions/_meta'
        description: ''
      data:
        $ref: '#/definitions/TotalesTransacciones'
        description: Respuesta del servicio
      links:
        $ref: '#/definitions/_links'
        description: ''
    example: |-
      {
          "meta": {
              "_msgId": "439ddd94-7f69-11ea-bc55-0242ac130003",
              "_version": "1.1.0",
              "_rqDateTime": "2018-02-10T09:30Z",
              "_rsLength": 30,
              "_clientId": "257ae1b8-7f69-11ea-bc55-0242ac130003"
              _transactionId: 3eaf202d-f360-4b76-b84a-927538b54fec
          },
          "data": {
              "totalVentasAbonadas": 10,
              "totalVentasAbonoPendiente": 68,
              "totalVentasNoProcesadas": 94,
              "totalVentasAnuladas": 98,
              "totalRegistros": 77
          },
          "links": {
              "self": "https://$(catalog.host)/transbank/sandbox/abonos/totales-proximos?fecha-desde=2020-05-01&fecha-hasta=2020-06-01&tipo-detalle=XX",
          }
      }
  VentasRs:
    description: ''
    type: object
    properties:
      data:
        description: ''
        type: array
        items:
          $ref: '#/definitions/Venta'
      links:
        $ref: '#/definitions/_links'
        description: ''
      meta:
        $ref: '#/definitions/_meta'
        description: ''
  Venta:
    description: ''
    type: object
    properties:
      codigoComercio:
        description: ''
        type: string
      fechaVenta:
        format: date
        description: ''
        type: string
      tipoMovimiento:
        description: Valor por defecto "V"
        type: string
      tipoTarjeta:
        description: ''
        type: string
      numeroCuota:
        description: ''
        type: integer
      montoCuota:
        format: float
        description: ''
        type: number
      montoOriginalVenta:
        format: double
        description: ''
        type: number
      numeroBoleta:
        description: ''
        type: integer
      comision:
        format: double
        description: ''
        type: number
      ivaComision:
        format: double
        description: ''
        type: number
      comisionAdicional:
        format: double
        description: ''
        type: number
      ivaComisionAdicional:
        format: double
        description: ''
        type: number
      codigoAutorizacion:
        description: ''
        type: string
      numeroOrdenPedido:
        description: ''
        type: integer
      totalAbonoPesos:
        format: double
        description: ''
        type: number
      totalAbonoDolares:
        format: double
        description: ''
        type: number
  _verificationError:
    description: Error de verificaciones previas a ejecución de API
    type: object
    properties:
      httpCode:
        type: string
      httpMessage:
        type: string
      moreInformation:
        type: string
    example:
      httpCode: '429'
      httpMessage: Too Many Requests
      moreInformation: Too Many Requests. Upgrade the plan
  _meta:
    description: Definición de metadata de respuesta (definida por JSON-API)
    required:
      - _msgId
    type: object
    properties:
      _msgId:
        type: string
        example: c4e6bd04-5149-11e7-b114-b2f933d5fe66
      _version:
        type: string
        example: '1.0'
      _rqDateTime:
        format: date-time
        type: string
        example: '2017-01-24T05:00:00.000Z'
      _rsLength:
        type: integer
        example: 1
      _clientId:
        type: string
        example: 1231231231-1
      _transactionId:
        description: identificador de transacción
        type: string
        example: b2f933d5fe66b2f933d5fe66b2f933d5fe66
    additionalProperties: true
    example:
      _msgId: e8410f95-5097-4604-8dc3-6bd4a97ba5a3
      _version: 1.0.2
      _rqDateTime: '2018-02-10T09:30Z'
      _rsLength: 2
      _clientId: 0242ac130003-64589f74-7f69-bc55
      _transactionId: 64589f74-7f69-11ea-bc55-0242ac130003
  Transaccion:
    description: 'Entidad transaccion utilizada para la respuesta de obtenerTransacciones '
    type: object
    properties:
      codigoLocal:
        type: string
      nombreLocal:
        type: string
      tipoTransaccion:
        type: string
      fechaTransaccion:
        format: date
        type: string
      numeroTarjeta:
        type: string
      tipoProducto:
        type: string
      tipoCuota:
        type: string
      totalCuotas:
        type: integer
      montoCuotas:
        type: integer
      codigoAutorizacion:
        type: string
      montoAfecto:
        format: double
        type: number
      montoExentoTotal:
        format: double
        type: number
    example:
      codigoLocal: '2722334'
      nombreLocal: COOPEUCH ALAMEDA 192
      tipoTransaccion: V
      fechaTransaccion: '2018-01-17T00:00:00.000Z'
      numeroTarjeta: XXX2446
      tipoProducto: D
      tipoCuota: Normal
      totalCuotas: 1
      montoCuotas: 0
      codigoAutorizacion: '9019334'
      montoAfecto: 30030.4
      montoExentoTotal: 3000
  ResumenTransaccionesRs:
    description: ''
    required:
      - data
    type: object
    properties:
      meta:
        $ref: '#/definitions/_meta'
        description: ''
      data:
        description: Respuesta del servicio
        type: array
        items:
          $ref: '#/definitions/ResumenTransaccion'
      links:
        $ref: '#/definitions/_links'
        description: ''
    example:
      data:
        - fechaVenta: '2021-01-17T00:00:00.000Z'
          transaccionPesos: 61000.5
          transaccionPesosCredito: 5000
          transaccionPesosDebito: 50900.1
          transaccionDolar: 124.5
          transaccionDolarCredito: 200
          transaccionDolarDebito: 460
          transaccionPesosPrepago: 20010
          transaccionDolarPrepago: 60
        - fechaVenta: '2021-01-17T00:00:00.000Z'
          transaccionPesos: 62500.2
          transaccionPesosCredito: 47455.34
          transaccionPesosDebito: 920000
          transaccionDolar: 39288.2
          transaccionDolarCredito: 1454.5
          transaccionDolarDebito: 358.5
          transaccionPesosPrepago: 88911.1
          transaccionDolarPrepago: 2556.1
      links:
        first: >-
          https://$(catalog.host)//transbank/sandbox/transacciones/resumen-ventas?page-number=1&page-size=10
        last: >-
          https://$(catalog.host)//transbank/sandbox/transacciones/resumen-ventas?page-number=10&page-size=10
        prev: >-
          https://$(catalog.host)//transbank/sandbox/transacciones/resumen-ventas?page-number=2&page-size=10
        next: >-
          https://$(catalog.host)//transbank/sandbox/transacciones/resumen-ventas?page-number=4&page-size=10
        self: >-
          https://$(catalog.host)//transbank/sandbox/transacciones/resumen-ventas?page-number=3&page-size=10
      meta:
        _rqDateTime: '2020-03-31T19:58:01.000Z'
        _version: 1.0.0
        _rsLength: 1
        _clientId: f66c16e3-f896-46f5-9639-46c8e9b3ed07
        _msgId: ca590d41999dde350b7598b570e1fda3
        _transactionId: a7afd26f-3ee1-496e-b63a-4f06b926bead
  TransaccionesOnlineRs:
    description: ''
    required:
      - data
      - links
    type: object
    properties:
      meta:
        $ref: '#/definitions/_meta'
        description: ''
      data:
        description: ''
        type: array
        items:
          $ref: '#/definitions/TransacccionOnline'
      links:
        $ref: '#/definitions/_pagination'
        description: paginación
    example:
      meta:
        _msgId: e8410f95-5097-4604-8dc3-6bd4a97ba5a3
        _version: 1.0.2
        _rqDateTime: '2018-02-10T09:30Z'
        _rsLength: 2
        _clientId: 1231231231-1
        _transactionId: c28fe7b1-35b1-4804-8537-162fd6d9e35b
      data:
        - codigoAutorizacion: '123456789'
          ordenCompra: '233413412'
          tarjeta: V
          numeroTarjeta: XXX944
          numeroCuenta: '12345678998'
          moneda: CLP
          numeroEmpleado: '345675676787'
          nombreFantasia: COMPAÑIA LIMITADA
          tipoCuotas: tipo
          montoCuota: 990000.59
          numeroCuota: '4'
          numeroCuotas: 28
          tasaInteres: 2
          numeroBoleta: '12345'
          tipoMensaje: 121
          numeroOperacion: '555555445'
          tipoMovimiento: some text
          codigoLocal: some text
          idServicio: some text
          numeroEquipo: some text
          numeroSerieTerminal: some text
          propina: 64.77
          montoTransaccion: 21.8
          diaTransaccion: 12
          horaTransaccion: '165733'
          mesTransaccion: 2
          tipoTransaccion: falta mapeo
          anioTransaccion: 66
          vuelto: 40
          tipovoucher: falta mapeo
          address:
            comune: RANCAGUA
            city: SANTIAGO
            country: CL
            fullAddress: MAPOCHO
        - codigoAutorizacion: '123456789'
          ordenCompra: '233413412'
          tarjeta: V
          numeroTarjeta: XXX944
          numeroCuenta: '12345678998'
          moneda: CLP
          numeroEmpleado: '345675676787'
          nombreFantasia: COMPAÑIA LIMITADA
          tipoCuotas: tipo
          montoCuota: 990000.59
          numeroCuota: '4'
          numeroCuotas: 28
          tasaInteres: 2
          numeroBoleta: '12345'
          tipoMensaje: 121
          numeroOperacion: '555555445'
          tipoMovimiento: some text
          codigoLocal: some text
          idServicio: some text
          numeroEquipo: some text
          numeroSerieTerminal: some text
          propina: 64.77
          montoTransaccion: 21.8
          diaTransaccion: 12
          horaTransaccion: '165733'
          mesTransaccion: 2
          tipoTransaccion: falta mapeo
          anioTransaccion: 66
          vuelto: 40
          tipovoucher: falta mapeo
          address:
            comune: RANCAGUA
            city: SANTIAGO
            country: CL
            fullAddress: MAPOCHO
      links:
        first: >-
          https://$(catalog.host)/transbank/sandbox/transacciones/online?page-number=1&page-size=10
        last: >-
          https://$(catalog.host)/transbank/sandbox/transacciones/online?page-number=10&page-size=10
        prev: >-
          https://$(catalog.host)/transbank/sandbox/transacciones/online?page-number=2&page-size=10
        next: >-
          https://$(catalog.host)/transbank/sandbox/transacciones/online?page-number=4&page-size=10
        self: >-
          https://$(catalog.host)/transbank/sandbox/transacciones/online?page-number=3&page-size=10
  Direccion:
    description: Entidad dirección utilizada para transacciones online
    type: object
    properties:
      comuna:
        type: string
      ciudad:
        type: string
      pais:
        type: string
      direccionCompleta:
        type: string
    example:
      comuna: RANCAGUA
      ciudad: SANTIAGO
      pais: CL
      direccionCompleta: MAPOCHO
  Error:
    description: Representación del error presentado JSON-API
    type: object
    properties:
      id:
        description: >-
          JSON-API Error A unique identifier for this particular occurrence of
          the problem.
        type: string
      links:
        $ref: '#/definitions/_links'
      status:
        description: >-
          The HTTP status code applicable to this problem, expressed as a string
          value.
        type: string
      code:
        description: 'An application-specific error code, expressed as a string value.'
        type: string
      title:
        description: >-
          A short, human-readable summary of the problem. It **SHOULD NOT**
          change from occurrence to occurrence of the problem, except for
          purposes of localization.
        type: string
      detail:
        description: >-
          A human-readable explanation specific to this occurrence of the
          problem.
        type: string
      source:
        type: object
        properties:
          pointer:
            description: >-
              A JSON Pointer [RFC6901] to the associated entity in the request
              document [e.g. "/data" for a primary data object, or
              "/data/attributes/title" for a specific attribute].
            type: string
          parameter:
            description: A string indicating which query parameter caused the error.
            type: string
    example:
      status: '422'
      code: MNI-2021
      title: Dato incorrecto
      detail: El rango de fecha es incorrecto para realizar alguna consulta
      source:
        parameter: fecha-hasta menor a fecha-desde
paths:
  /transacciones/resumen-ventas:
    get:
      tags:
        - Ventas
      parameters:
        - name: fecha-desde
          in: query
          required: true
          description: >-
            Define la fecha inicial para la consulta por rango de Fecha de la
            transaccion con el formato YYYY-MM-DDTHH:MM:SS ej
            2019-10-21T09:10:23 
          type: string
        - name: fecha-hasta
          in: query
          required: true
          description: >-
            Define la fecha final para la consulta por rango de Fecha de la
            transaccion con el format YYYY-MM-DDTHH:MM:SS ej 2019-10-21T09:10:23
          type: string
        - name: codigos-comercio
          in: query
          required: false
          description: >-
            Un String con los codigos de cometcio separados por coma ej
            codigo1,codigo2
          type: string
      responses:
        '200':
          description: Resumen de ventas obtenido con exito
          schema:
            $ref: '#/definitions/ResumenTransaccionesRs'
        '400':
          description: Errores de Validación de mensajería y precondiciones de invocación
          schema:
            $ref: '#/definitions/_verificationError'
        '422':
          description: Los datos enviados para la consulta presentan inconsistencias
          schema:
            $ref: '#/definitions/_error'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/_error'
      operationId: obtenerResumenTransaccion
      description: Obtener resumen de ventas por un rango de fechas
      consumes: []
      produces: []
  /transacciones/online:
    get:
      tags:
        - Ventas
      parameters:
        - name: fecha-desde
          in: query
          required: true
          description: >-
            Fecha inicio del rango de la consulta YYYY-MM-DDTHH:MM:SS ej
            2020-02-21T12:20:23
          type: string
        - name: fecha-hasta
          in: query
          required: true
          description: >-
            Fecha inicio del rango de la consulta YYYY-MM-DDTHH:MM:SS ej
            2020-02-21T13:10:50
          type: string
        - name: page-number
          in: query
          required: false
          description: >-
            Número de pagina que se quiere consultar. Depende del tamaño de la
            pagina. Los registros que se entregan son page-number*page-size
            hasta page-number*(page-size+1). El valor default es 1.
          type: integer
          format: int32
        - name: page-size
          in: query
          required: false
          description: >-
            Tamaño de pagina del resultado. El valor default es un valor
            definido por Transbank tradicionalmente 10.
          type: integer
          format: int32
        - name: codigos-comercio
          in: query
          required: false
          description: >-
            Un String con los codigos de comercio separados por coma ej
            comercio1,comercio2,comercio3
          type: string
        - name: tipo-tarjeta
          in: query
          required: false
          description: >-
            Filtra la consulta por el tipo de tarjeta especificado: CREDITO,
            DEBITO o PREPAGO
          type: string
        - name: tipo-ventas
          in: query
          required: false
          description: 'Filtra la consulta por el tipo de operación: VENTA o ANULACION'
          type: string
      responses:
        '200':
          description: Listado de ventas en linea optenido con exito
          schema:
            $ref: '#/definitions/TransaccionesOnlineRs'
        '400':
          description: Errores de Validación de mensajería y precondiciones de invocación
          schema:
            $ref: '#/definitions/_verificationError'
        '422':
          description: Consulta no procesable
          schema:
            $ref: '#/definitions/_error'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/_error'
      operationId: obtenerMovimientoTransaccion
      description: >-
        Consulta el listado de las ventas en linea


        Obtiene el listado de las ventas en linea en el rango de fechas,
        adicionalmente se pueden 

        filtrar codigos de locales.


        El resultado se entrega páginado
      consumes: []
      produces: []
  /transacciones:
    get:
      tags:
        - Ventas
      parameters:
        - name: fecha-desde
          in: query
          required: true
          description: >-
            Define la fecha inicial para la consulta por rango de Fecha de la
            transaccion con el formato YYYY-MM-DDTHH:MM:SS ej
            2019-10-21T09:10:23 
          type: string
        - name: fecha-hasta
          in: query
          required: true
          description: >-
            Define la fecha final para la consulta por rango de Fecha de la
            transaccion con el format YYYY-MM-DDTHH:MM:SS ej 2019-10-21T09:10:23
          type: string
        - name: codigos-comercio
          in: query
          required: false
          description: >-
            Un String con los codigos de comercio separados por coma ej
            comercio1,comercio2
          type: string
        - name: page-number
          in: query
          required: false
          description: >-
            Número de pagina que se quiere consultar. Depende del tamaño de la
            pagina. Los registros que se entregan son page-number x page-size
            hasta page-number x (page-size+1). El valor default es 1.
          type: integer
          format: int32
        - name: page-size
          in: query
          required: false
          description: >-
            Tamaño de pagina del resultado. El valor default es un valor
            definido por Transbank tradicionalmente 10.

            El máximo valor esta definido por otro parametro. El valor de este
            parametro es 200.
          type: integer
          format: int32
      responses:
        '200':
          description: |-
            Se listan las transacciones en el rango de fechas enviado.
            Si el resultado no entrega datos la lista es vacia.
          schema:
            $ref: '#/definitions/TransaccionesRs'
        '400':
          description: Errores de Validación de mensajería y precondiciones de invocación
          schema:
            $ref: '#/definitions/_verificationError'
        '422':
          description: Los datos enviados para la consulta presentan inconsistencias
          schema:
            $ref: '#/definitions/_error'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/_error'
      operationId: obtenerTransaccion
      description: |-
        Consultar la lista de transacciones incluyendo ventas y anulaciones.

        Obtiene la lista de transacciones para el rango de fechas especificado.
      consumes: []
      produces: []
  /transacciones/totales:
    get:
      tags:
        - Ventas
      parameters:
        - name: fecha-desde
          in: query
          required: true
          description: >-
            Define la fecha inicial para la consulta por rango de Fecha de la
            transaccion con el formato YYYY-MM-DDTHH:MM:SS ej
            2019-10-21T09:10:23 
          type: string
        - name: fecha-hasta
          in: query
          required: true
          description: >-
            Define la fecha final para la consulta por rango de Fecha de la
            transaccion con el format YYYY-MM-DDTHH:MM:SS ej 2019-10-21T09:10:23
          type: string
        - name: codigos-comercio
          in: query
          required: false
          description: >-
            Un String con los codigos de comercio separados por coma ej
            codigo1,codigo2
          type: string
      responses:
        '200':
          description: >-
            Lista de las cantidades totales de transacciones en las fechas
            especificadas
          schema:
            $ref: '#/definitions/TotalesTransaccionesRs'
        '400':
          description: Errores de Validación de mensajería y precondiciones de invocación
          schema:
            $ref: '#/definitions/_verificationError'
        '422':
          description: Los datos enviados para la consulta presentan inconsistencias
          schema:
            $ref: '#/definitions/_error'
        '503':
          description: Service Unavailable
          schema:
            $ref: '#/definitions/_error'
      description: Cantidades de transacciones de venta por fecha
      consumes: []
      produces: []
